<html>
<head>
<title>gfxdraw_test.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #629755; font-style: italic;}
.s3 { color: #6897bb;}
.s4 { color: #808080;}
.s5 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
gfxdraw_test.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">unittest</span>
<span class="s0">import </span><span class="s1">pygame</span>
<span class="s0">import </span><span class="s1">pygame.gfxdraw</span>
<span class="s0">from </span><span class="s1">pygame.locals </span><span class="s0">import </span><span class="s1">*</span>
<span class="s0">from </span><span class="s1">pygame.tests.test_utils </span><span class="s0">import </span><span class="s1">SurfaceSubclass</span>


<span class="s0">def </span><span class="s1">intensity(c</span><span class="s0">, </span><span class="s1">i):</span>
    <span class="s2">&quot;&quot;&quot;Return color c changed by intensity i 
 
    For 0 &lt;= i &lt;= 127 the color is a shade, with 0 being black, 127 being the 
    unaltered color. 
 
    For 128 &lt;= i &lt;= 255 the color is a tint, with 255 being white, 128 the 
    unaltered color. 
 
    &quot;&quot;&quot;</span>
    <span class="s1">r</span><span class="s0">, </span><span class="s1">g</span><span class="s0">, </span><span class="s1">b = c[</span><span class="s3">0</span><span class="s1">:</span><span class="s3">3</span><span class="s1">]</span>
    <span class="s0">if </span><span class="s3">0 </span><span class="s1">&lt;= i &lt;= </span><span class="s3">127</span><span class="s1">:</span>
        <span class="s4"># Darken</span>
        <span class="s0">return </span><span class="s1">((r * i) // </span><span class="s3">127</span><span class="s0">, </span><span class="s1">(g * i) // </span><span class="s3">127</span><span class="s0">, </span><span class="s1">(b * i) // </span><span class="s3">127</span><span class="s1">)</span>
    <span class="s4"># Lighten</span>
    <span class="s0">return </span><span class="s1">(</span>
        <span class="s1">r + ((</span><span class="s3">255 </span><span class="s1">- r) * (</span><span class="s3">255 </span><span class="s1">- i)) // </span><span class="s3">127</span><span class="s0">,</span>
        <span class="s1">g + ((</span><span class="s3">255 </span><span class="s1">- g) * (</span><span class="s3">255 </span><span class="s1">- i)) // </span><span class="s3">127</span><span class="s0">,</span>
        <span class="s1">b + ((</span><span class="s3">255 </span><span class="s1">- b) * (</span><span class="s3">255 </span><span class="s1">- i)) // </span><span class="s3">127</span><span class="s0">,</span>
    <span class="s1">)</span>


<span class="s0">class </span><span class="s1">GfxdrawDefaultTest(unittest.TestCase):</span>

    <span class="s1">is_started = </span><span class="s0">False</span>

    <span class="s1">foreground_color = (</span><span class="s3">128</span><span class="s0">, </span><span class="s3">64</span><span class="s0">, </span><span class="s3">8</span><span class="s1">)</span>
    <span class="s1">background_color = (</span><span class="s3">255</span><span class="s0">, </span><span class="s3">255</span><span class="s0">, </span><span class="s3">255</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">make_palette(base_color):</span>
        <span class="s2">&quot;&quot;&quot;Return color palette that is various intensities of base_color&quot;&quot;&quot;</span>
        <span class="s4"># Need this function for Python 3.x so the base_color</span>
        <span class="s4"># is within the scope of the list comprehension.</span>
        <span class="s0">return </span><span class="s1">[intensity(base_color</span><span class="s0">, </span><span class="s1">i) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(</span><span class="s3">0</span><span class="s0">, </span><span class="s3">256</span><span class="s1">)]</span>

    <span class="s1">default_palette = make_palette(foreground_color)</span>

    <span class="s1">default_size = (</span><span class="s3">100</span><span class="s0">, </span><span class="s3">100</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">check_at(self</span><span class="s0">, </span><span class="s1">surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">color):</span>
        <span class="s1">sc = surf.get_at(posn)</span>
        <span class="s1">fail_msg = </span><span class="s5">&quot;%s != %s at %s, bitsize: %i, flags: %i, masks: %s&quot; </span><span class="s1">% (</span>
            <span class="s1">sc</span><span class="s0">,</span>
            <span class="s1">color</span><span class="s0">,</span>
            <span class="s1">posn</span><span class="s0">,</span>
            <span class="s1">surf.get_bitsize()</span><span class="s0">,</span>
            <span class="s1">surf.get_flags()</span><span class="s0">,</span>
            <span class="s1">surf.get_masks()</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(sc</span><span class="s0">, </span><span class="s1">color</span><span class="s0">, </span><span class="s1">fail_msg)</span>

    <span class="s0">def </span><span class="s1">check_not_at(self</span><span class="s0">, </span><span class="s1">surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">color):</span>
        <span class="s1">sc = surf.get_at(posn)</span>
        <span class="s1">fail_msg = </span><span class="s5">&quot;%s != %s at %s, bitsize: %i, flags: %i, masks: %s&quot; </span><span class="s1">% (</span>
            <span class="s1">sc</span><span class="s0">,</span>
            <span class="s1">color</span><span class="s0">,</span>
            <span class="s1">posn</span><span class="s0">,</span>
            <span class="s1">surf.get_bitsize()</span><span class="s0">,</span>
            <span class="s1">surf.get_flags()</span><span class="s0">,</span>
            <span class="s1">surf.get_masks()</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertNotEqual(sc</span><span class="s0">, </span><span class="s1">color</span><span class="s0">, </span><span class="s1">fail_msg)</span>

    <span class="s1">@classmethod</span>
    <span class="s0">def </span><span class="s1">setUpClass(cls):</span>
        <span class="s4"># Necessary for Surface.set_palette.</span>
        <span class="s1">pygame.init()</span>
        <span class="s1">pygame.display.set_mode((</span><span class="s3">1</span><span class="s0">, </span><span class="s3">1</span><span class="s1">))</span>

    <span class="s1">@classmethod</span>
    <span class="s0">def </span><span class="s1">tearDownClass(cls):</span>
        <span class="s1">pygame.quit()</span>

    <span class="s0">def </span><span class="s1">setUp(self):</span>
        <span class="s4"># This makes sure pygame is always initialized before each test (in</span>
        <span class="s4"># case a test calls pygame.quit()).</span>
        <span class="s0">if not </span><span class="s1">pygame.get_init():</span>
            <span class="s1">pygame.init()</span>

        <span class="s1">Surface = pygame.Surface</span>
        <span class="s1">size = self.default_size</span>
        <span class="s1">palette = self.default_palette</span>
        <span class="s0">if not </span><span class="s1">self.is_started:</span>
            <span class="s4"># Create test surfaces</span>
            <span class="s1">self.surfaces = [</span>
                <span class="s1">Surface(size</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s3">8</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">Surface(size</span><span class="s0">, </span><span class="s1">SRCALPHA</span><span class="s0">, </span><span class="s3">16</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">Surface(size</span><span class="s0">, </span><span class="s1">SRCALPHA</span><span class="s0">, </span><span class="s3">32</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">]</span>
            <span class="s1">self.surfaces[</span><span class="s3">0</span><span class="s1">].set_palette(palette)</span>
            <span class="s1">nonpalette_fmts = (</span>
                <span class="s4"># (8, (0xe0, 0x1c, 0x3, 0x0)),</span>
                <span class="s1">(</span><span class="s3">12</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xF00</span><span class="s0">, </span><span class="s3">0xF0</span><span class="s0">, </span><span class="s3">0xF</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">15</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0x7C00</span><span class="s0">, </span><span class="s3">0x3E0</span><span class="s0">, </span><span class="s3">0x1F</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">15</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0x1F</span><span class="s0">, </span><span class="s3">0x3E0</span><span class="s0">, </span><span class="s3">0x7C00</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xF00</span><span class="s0">, </span><span class="s3">0xF0</span><span class="s0">, </span><span class="s3">0xF</span><span class="s0">, </span><span class="s3">0xF000</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xF000</span><span class="s0">, </span><span class="s3">0xF00</span><span class="s0">, </span><span class="s3">0xF0</span><span class="s0">, </span><span class="s3">0xF</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xF</span><span class="s0">, </span><span class="s3">0xF0</span><span class="s0">, </span><span class="s3">0xF00</span><span class="s0">, </span><span class="s3">0xF000</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xF0</span><span class="s0">, </span><span class="s3">0xF00</span><span class="s0">, </span><span class="s3">0xF000</span><span class="s0">, </span><span class="s3">0xF</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0x7C00</span><span class="s0">, </span><span class="s3">0x3E0</span><span class="s0">, </span><span class="s3">0x1F</span><span class="s0">, </span><span class="s3">0x8000</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xF800</span><span class="s0">, </span><span class="s3">0x7C0</span><span class="s0">, </span><span class="s3">0x3E</span><span class="s0">, </span><span class="s3">0x1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0x1F</span><span class="s0">, </span><span class="s3">0x3E0</span><span class="s0">, </span><span class="s3">0x7C00</span><span class="s0">, </span><span class="s3">0x8000</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0x3E</span><span class="s0">, </span><span class="s3">0x7C0</span><span class="s0">, </span><span class="s3">0xF800</span><span class="s0">, </span><span class="s3">0x1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xF800</span><span class="s0">, </span><span class="s3">0x7E0</span><span class="s0">, </span><span class="s3">0x1F</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">16</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0x1F</span><span class="s0">, </span><span class="s3">0x7E0</span><span class="s0">, </span><span class="s3">0xF800</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">24</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF</span><span class="s0">, </span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">24</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">32</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">32</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF000000</span><span class="s0">, </span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">32</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF</span><span class="s0">, </span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">32</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0xFF000000</span><span class="s0">, </span><span class="s3">0x0</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">32</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF</span><span class="s0">, </span><span class="s3">0xFF000000</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">32</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF000000</span><span class="s0">, </span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">32</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF</span><span class="s0">, </span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0xFF000000</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s3">32</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0xFF00</span><span class="s0">, </span><span class="s3">0xFF0000</span><span class="s0">, </span><span class="s3">0xFF000000</span><span class="s0">, </span><span class="s3">0xFF</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">)</span>
            <span class="s0">for </span><span class="s1">bitsize</span><span class="s0">, </span><span class="s1">masks </span><span class="s0">in </span><span class="s1">nonpalette_fmts:</span>
                <span class="s1">self.surfaces.append(Surface(size</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s1">bitsize</span><span class="s0">, </span><span class="s1">masks))</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">surf.fill(self.background_color)</span>

    <span class="s0">def </span><span class="s1">test_gfxdraw__subclassed_surface(self):</span>
        <span class="s2">&quot;&quot;&quot;Ensure pygame.gfxdraw works on subclassed surfaces.&quot;&quot;&quot;</span>
        <span class="s1">surface = SurfaceSubclass((</span><span class="s3">11</span><span class="s0">, </span><span class="s3">13</span><span class="s1">)</span><span class="s0">, </span><span class="s1">SRCALPHA</span><span class="s0">, </span><span class="s3">32</span><span class="s1">)</span>
        <span class="s1">surface.fill(pygame.Color(</span><span class="s5">&quot;blue&quot;</span><span class="s1">))</span>
        <span class="s1">expected_color = pygame.Color(</span><span class="s5">&quot;red&quot;</span><span class="s1">)</span>
        <span class="s1">x</span><span class="s0">, </span><span class="s1">y = </span><span class="s3">1</span><span class="s0">, </span><span class="s3">2</span>

        <span class="s1">pygame.gfxdraw.pixel(surface</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">expected_color)</span>

        <span class="s1">self.assertEqual(surface.get_at((x</span><span class="s0">, </span><span class="s1">y))</span><span class="s0">, </span><span class="s1">expected_color)</span>

    <span class="s0">def </span><span class="s1">test_pixel(self):</span>
        <span class="s2">&quot;&quot;&quot;pixel(surface, x, y, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.pixel(surf</span><span class="s0">, </span><span class="s3">2</span><span class="s0">, </span><span class="s3">2</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">x </span><span class="s0">in </span><span class="s1">range(</span><span class="s3">1</span><span class="s0">, </span><span class="s3">4</span><span class="s1">):</span>
                <span class="s0">for </span><span class="s1">y </span><span class="s0">in </span><span class="s1">range(</span><span class="s3">1</span><span class="s0">, </span><span class="s3">4</span><span class="s1">):</span>
                    <span class="s0">if </span><span class="s1">x == </span><span class="s3">2 </span><span class="s0">and </span><span class="s1">y == </span><span class="s3">2</span><span class="s1">:</span>
                        <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
                    <span class="s0">else</span><span class="s1">:</span>
                        <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_hline(self):</span>
        <span class="s2">&quot;&quot;&quot;hline(surface, x1, x2, y, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">startx = </span><span class="s3">10</span>
        <span class="s1">stopx = </span><span class="s3">80</span>
        <span class="s1">y = </span><span class="s3">50</span>
        <span class="s1">fg_test_points = [(startx</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">(stopx</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">((stopx - startx) // </span><span class="s3">2</span><span class="s0">, </span><span class="s1">y)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(startx - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(stopx + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(startx</span><span class="s0">, </span><span class="s1">y - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(startx</span><span class="s0">, </span><span class="s1">y + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(stopx</span><span class="s0">, </span><span class="s1">y - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(stopx</span><span class="s0">, </span><span class="s1">y + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.hline(surf</span><span class="s0">, </span><span class="s1">startx</span><span class="s0">, </span><span class="s1">stopx</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_vline(self):</span>
        <span class="s2">&quot;&quot;&quot;vline(surface, x, y1, y2, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">50</span>
        <span class="s1">starty = </span><span class="s3">10</span>
        <span class="s1">stopy = </span><span class="s3">80</span>
        <span class="s1">fg_test_points = [(x</span><span class="s0">, </span><span class="s1">starty)</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">stopy)</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">(stopy - starty) // </span><span class="s3">2</span><span class="s1">)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">starty - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">stopy + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">starty)</span><span class="s0">,</span>
            <span class="s1">(x + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">starty)</span><span class="s0">,</span>
            <span class="s1">(x - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">stopy)</span><span class="s0">,</span>
            <span class="s1">(x + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">stopy)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.vline(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">starty</span><span class="s0">, </span><span class="s1">stopy</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_rectangle(self):</span>
        <span class="s2">&quot;&quot;&quot;rectangle(surface, rect, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">rect = pygame.Rect(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">15</span><span class="s0">, </span><span class="s3">55</span><span class="s0">, </span><span class="s3">62</span><span class="s1">)</span>
        <span class="s1">rect_tuple = tuple(rect)</span>
        <span class="s1">fg_test_points = [</span>
            <span class="s1">rect.topleft</span><span class="s0">,</span>
            <span class="s1">(rect.right - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.top)</span><span class="s0">,</span>
            <span class="s1">(rect.left</span><span class="s0">, </span><span class="s1">rect.bottom - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.right - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.bottom - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(rect.left - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.top - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.left + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.top + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.right</span><span class="s0">, </span><span class="s1">rect.top - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.right - </span><span class="s3">2</span><span class="s0">, </span><span class="s1">rect.top + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.left - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.bottom)</span><span class="s0">,</span>
            <span class="s1">(rect.left + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.bottom - </span><span class="s3">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.right</span><span class="s0">, </span><span class="s1">rect.bottom)</span><span class="s0">,</span>
            <span class="s1">(rect.right - </span><span class="s3">2</span><span class="s0">, </span><span class="s1">rect.bottom - </span><span class="s3">2</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.rectangle(surf</span><span class="s0">, </span><span class="s1">rect</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>
            <span class="s1">surf.fill(bg)</span>
            <span class="s1">pygame.gfxdraw.rectangle(surf</span><span class="s0">, </span><span class="s1">rect_tuple</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_box(self):</span>
        <span class="s2">&quot;&quot;&quot;box(surface, rect, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">rect = pygame.Rect(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">15</span><span class="s0">, </span><span class="s3">55</span><span class="s0">, </span><span class="s3">62</span><span class="s1">)</span>
        <span class="s1">rect_tuple = tuple(rect)</span>
        <span class="s1">fg_test_points = [</span>
            <span class="s1">rect.topleft</span><span class="s0">,</span>
            <span class="s1">(rect.left + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.top + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.right - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.top)</span><span class="s0">,</span>
            <span class="s1">(rect.right - </span><span class="s3">2</span><span class="s0">, </span><span class="s1">rect.top + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.left</span><span class="s0">, </span><span class="s1">rect.bottom - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.left + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.bottom - </span><span class="s3">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.right - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.bottom - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.right - </span><span class="s3">2</span><span class="s0">, </span><span class="s1">rect.bottom - </span><span class="s3">2</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(rect.left - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.top - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.right</span><span class="s0">, </span><span class="s1">rect.top - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(rect.left - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">rect.bottom)</span><span class="s0">,</span>
            <span class="s1">(rect.right</span><span class="s0">, </span><span class="s1">rect.bottom)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.box(surf</span><span class="s0">, </span><span class="s1">rect</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>
            <span class="s1">surf.fill(bg)</span>
            <span class="s1">pygame.gfxdraw.box(surf</span><span class="s0">, </span><span class="s1">rect_tuple</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_line(self):</span>
        <span class="s2">&quot;&quot;&quot;line(surface, x1, y1, x2, y2, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x1 = </span><span class="s3">10</span>
        <span class="s1">y1 = </span><span class="s3">15</span>
        <span class="s1">x2 = </span><span class="s3">92</span>
        <span class="s1">y2 = </span><span class="s3">77</span>
        <span class="s1">fg_test_points = [(x1</span><span class="s0">, </span><span class="s1">y1)</span><span class="s0">, </span><span class="s1">(x2</span><span class="s0">, </span><span class="s1">y2)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x1 - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y1)</span><span class="s0">,</span>
            <span class="s1">(x1</span><span class="s0">, </span><span class="s1">y1 - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x1 - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y1 - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x2 + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y2)</span><span class="s0">,</span>
            <span class="s1">(x2</span><span class="s0">, </span><span class="s1">y2 + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x2 + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y2 + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.line(surf</span><span class="s0">, </span><span class="s1">x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_circle(self):</span>
        <span class="s2">&quot;&quot;&quot;circle(surface, x, y, r, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">45</span>
        <span class="s1">y = </span><span class="s3">40</span>
        <span class="s1">r = </span><span class="s3">30</span>
        <span class="s1">fg_test_points = [(x</span><span class="s0">, </span><span class="s1">y - r)</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r)</span><span class="s0">, </span><span class="s1">(x - r</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">(x + r</span><span class="s0">, </span><span class="s1">y)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - r + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - r - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - r - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x - r + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.circle(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">r</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_arc(self):</span>
        <span class="s2">&quot;&quot;&quot;arc(surface, x, y, r, start, end, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">45</span>
        <span class="s1">y = </span><span class="s3">40</span>
        <span class="s1">r = </span><span class="s3">30</span>
        <span class="s1">start = </span><span class="s3">0  </span><span class="s4"># +x direction, but not (x + r, y) (?)</span>
        <span class="s1">end = </span><span class="s3">90  </span><span class="s4"># -y direction, including (x, y + r)</span>
        <span class="s1">fg_test_points = [(x</span><span class="s0">, </span><span class="s1">y + r)</span><span class="s0">, </span><span class="s1">(x + r</span><span class="s0">, </span><span class="s1">y + </span><span class="s3">1</span><span class="s1">)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - r)</span><span class="s0">,</span>
            <span class="s1">(x - r</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y + r)</span><span class="s0">,</span>
            <span class="s1">(x + r + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.arc(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">r</span><span class="s0">, </span><span class="s1">start</span><span class="s0">, </span><span class="s1">end</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_aacircle(self):</span>
        <span class="s2">&quot;&quot;&quot;aacircle(surface, x, y, r, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">45</span>
        <span class="s1">y = </span><span class="s3">40</span>
        <span class="s1">r = </span><span class="s3">30</span>
        <span class="s1">fg_test_points = [(x</span><span class="s0">, </span><span class="s1">y - r)</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r)</span><span class="s0">, </span><span class="s1">(x - r</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">(x + r</span><span class="s0">, </span><span class="s1">y)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - r + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - r - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - r - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x - r + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.aacircle(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">r</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_not_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_filled_circle(self):</span>
        <span class="s2">&quot;&quot;&quot;filled_circle(surface, x, y, r, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">45</span>
        <span class="s1">y = </span><span class="s3">40</span>
        <span class="s1">r = </span><span class="s3">30</span>
        <span class="s1">fg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - r)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - r + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - r</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x - r + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - r - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - r - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.filled_circle(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">r</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_ellipse(self):</span>
        <span class="s2">&quot;&quot;&quot;ellipse(surface, x, y, rx, ry, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">45</span>
        <span class="s1">y = </span><span class="s3">40</span>
        <span class="s1">rx = </span><span class="s3">30</span>
        <span class="s1">ry = </span><span class="s3">35</span>
        <span class="s1">fg_test_points = [(x</span><span class="s0">, </span><span class="s1">y - ry)</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry)</span><span class="s0">, </span><span class="s1">(x - rx</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">(x + rx</span><span class="s0">, </span><span class="s1">y)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - ry + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - ry - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - rx - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x - rx + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + rx + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + rx - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.ellipse(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">rx</span><span class="s0">, </span><span class="s1">ry</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_aaellipse(self):</span>
        <span class="s2">&quot;&quot;&quot;aaellipse(surface, x, y, rx, ry, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">45</span>
        <span class="s1">y = </span><span class="s3">40</span>
        <span class="s1">rx = </span><span class="s3">30</span>
        <span class="s1">ry = </span><span class="s3">35</span>
        <span class="s1">fg_test_points = [(x</span><span class="s0">, </span><span class="s1">y - ry)</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry)</span><span class="s0">, </span><span class="s1">(x - rx</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">(x + rx</span><span class="s0">, </span><span class="s1">y)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - ry + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - ry - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - rx - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x - rx + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + rx + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + rx - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.aaellipse(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">rx</span><span class="s0">, </span><span class="s1">ry</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_not_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_filled_ellipse(self):</span>
        <span class="s2">&quot;&quot;&quot;filled_ellipse(surface, x, y, rx, ry, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">45</span>
        <span class="s1">y = </span><span class="s3">40</span>
        <span class="s1">rx = </span><span class="s3">30</span>
        <span class="s1">ry = </span><span class="s3">35</span>
        <span class="s1">fg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - ry)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - ry + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - rx</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x - rx + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + rx</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + rx - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - ry - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + ry + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - rx - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + rx + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.filled_ellipse(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">rx</span><span class="s0">, </span><span class="s1">ry</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_pie(self):</span>
        <span class="s2">&quot;&quot;&quot;pie(surface, x, y, r, start, end, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x = </span><span class="s3">45</span>
        <span class="s1">y = </span><span class="s3">40</span>
        <span class="s1">r = </span><span class="s3">30</span>
        <span class="s1">start = </span><span class="s3">0  </span><span class="s4"># +x direction, including (x + r, y)</span>
        <span class="s1">end = </span><span class="s3">90  </span><span class="s4"># -y direction, but not (x, y + r) (?)</span>
        <span class="s1">fg_test_points = [(x</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">(x + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">, </span><span class="s1">(x</span><span class="s0">, </span><span class="s1">y + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(x + r</span><span class="s0">, </span><span class="s1">y)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x + r + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y)</span><span class="s0">,</span>
            <span class="s1">(x + r</span><span class="s0">, </span><span class="s1">y - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y + r + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.pie(surf</span><span class="s0">, </span><span class="s1">x</span><span class="s0">, </span><span class="s1">y</span><span class="s0">, </span><span class="s1">r</span><span class="s0">, </span><span class="s1">start</span><span class="s0">, </span><span class="s1">end</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_trigon(self):</span>
        <span class="s2">&quot;&quot;&quot;trigon(surface, x1, y1, x2, y2, x3, y3, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x1 = </span><span class="s3">10</span>
        <span class="s1">y1 = </span><span class="s3">15</span>
        <span class="s1">x2 = </span><span class="s3">92</span>
        <span class="s1">y2 = </span><span class="s3">77</span>
        <span class="s1">x3 = </span><span class="s3">20</span>
        <span class="s1">y3 = </span><span class="s3">60</span>
        <span class="s1">fg_test_points = [(x1</span><span class="s0">, </span><span class="s1">y1)</span><span class="s0">, </span><span class="s1">(x2</span><span class="s0">, </span><span class="s1">y2)</span><span class="s0">, </span><span class="s1">(x3</span><span class="s0">, </span><span class="s1">y3)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x1 - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y1 - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x2 + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y2 + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x3 - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y3 + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x1 + </span><span class="s3">10</span><span class="s0">, </span><span class="s1">y1 + </span><span class="s3">30</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.trigon(surf</span><span class="s0">, </span><span class="s1">x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2</span><span class="s0">, </span><span class="s1">x3</span><span class="s0">, </span><span class="s1">y3</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_aatrigon(self):</span>
        <span class="s2">&quot;&quot;&quot;aatrigon(surface, x1, y1, x2, y2, x3, y3, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x1 = </span><span class="s3">10</span>
        <span class="s1">y1 = </span><span class="s3">15</span>
        <span class="s1">x2 = </span><span class="s3">92</span>
        <span class="s1">y2 = </span><span class="s3">77</span>
        <span class="s1">x3 = </span><span class="s3">20</span>
        <span class="s1">y3 = </span><span class="s3">60</span>
        <span class="s1">fg_test_points = [(x1</span><span class="s0">, </span><span class="s1">y1)</span><span class="s0">, </span><span class="s1">(x2</span><span class="s0">, </span><span class="s1">y2)</span><span class="s0">, </span><span class="s1">(x3</span><span class="s0">, </span><span class="s1">y3)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(x1 - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y1 - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x2 + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y2 + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x3 - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y3 + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(x1 + </span><span class="s3">10</span><span class="s0">, </span><span class="s1">y1 + </span><span class="s3">30</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.aatrigon(surf</span><span class="s0">, </span><span class="s1">x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2</span><span class="s0">, </span><span class="s1">x3</span><span class="s0">, </span><span class="s1">y3</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_not_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_aatrigon__with_horizontal_edge(self):</span>
        <span class="s2">&quot;&quot;&quot;Ensure aatrigon draws horizontal edges correctly. 
 
        This test creates 2 surfaces and draws an aatrigon on each. The pixels 
        on each surface are compared to ensure they are the same. The only 
        difference between the 2 aatrigons is the order the points are drawn. 
        The order of the points should have no impact on the final drawing. 
 
        Related to issue #622. 
        &quot;&quot;&quot;</span>
        <span class="s1">bg_color = pygame.Color(</span><span class="s5">&quot;white&quot;</span><span class="s1">)</span>
        <span class="s1">line_color = pygame.Color(</span><span class="s5">&quot;black&quot;</span><span class="s1">)</span>
        <span class="s1">width</span><span class="s0">, </span><span class="s1">height = </span><span class="s3">11</span><span class="s0">, </span><span class="s3">10</span>
        <span class="s1">expected_surface = pygame.Surface((width</span><span class="s0">, </span><span class="s1">height)</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s3">32</span><span class="s1">)</span>
        <span class="s1">expected_surface.fill(bg_color)</span>
        <span class="s1">surface = pygame.Surface((width</span><span class="s0">, </span><span class="s1">height)</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s3">32</span><span class="s1">)</span>
        <span class="s1">surface.fill(bg_color)</span>

        <span class="s1">x1</span><span class="s0">, </span><span class="s1">y1 = width - </span><span class="s3">1</span><span class="s0">, </span><span class="s3">0</span>
        <span class="s1">x2</span><span class="s0">, </span><span class="s1">y2 = (width - </span><span class="s3">1</span><span class="s1">) // </span><span class="s3">2</span><span class="s0">, </span><span class="s1">height - </span><span class="s3">1</span>
        <span class="s1">x3</span><span class="s0">, </span><span class="s1">y3 = </span><span class="s3">0</span><span class="s0">, </span><span class="s3">0</span>

        <span class="s4"># The points in this order draw as expected.</span>
        <span class="s1">pygame.gfxdraw.aatrigon(expected_surface</span><span class="s0">, </span><span class="s1">x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2</span><span class="s0">, </span><span class="s1">x3</span><span class="s0">, </span><span class="s1">y3</span><span class="s0">, </span><span class="s1">line_color)</span>

        <span class="s4"># The points in reverse order fail to draw the horizontal edge along</span>
        <span class="s4"># the top.</span>
        <span class="s1">pygame.gfxdraw.aatrigon(surface</span><span class="s0">, </span><span class="s1">x3</span><span class="s0">, </span><span class="s1">y3</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2</span><span class="s0">, </span><span class="s1">x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">line_color)</span>

        <span class="s4"># The surfaces are locked for a possible speed up of pixel access.</span>
        <span class="s1">expected_surface.lock()</span>
        <span class="s1">surface.lock()</span>
        <span class="s0">for </span><span class="s1">x </span><span class="s0">in </span><span class="s1">range(width):</span>
            <span class="s0">for </span><span class="s1">y </span><span class="s0">in </span><span class="s1">range(height):</span>
                <span class="s1">self.assertEqual(</span>
                    <span class="s1">expected_surface.get_at((x</span><span class="s0">, </span><span class="s1">y))</span><span class="s0">,</span>
                    <span class="s1">surface.get_at((x</span><span class="s0">, </span><span class="s1">y))</span><span class="s0">,</span>
                    <span class="s5">f&quot;pos=(</span><span class="s0">{</span><span class="s1">x</span><span class="s0">}</span><span class="s5">, </span><span class="s0">{</span><span class="s1">y</span><span class="s0">}</span><span class="s5">)&quot;</span><span class="s0">,</span>
                <span class="s1">)</span>

        <span class="s1">surface.unlock()</span>
        <span class="s1">expected_surface.unlock()</span>

    <span class="s0">def </span><span class="s1">test_filled_trigon(self):</span>
        <span class="s2">&quot;&quot;&quot;filled_trigon(surface, x1, y1, x2, y2, x3, y3, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">x1 = </span><span class="s3">10</span>
        <span class="s1">y1 = </span><span class="s3">15</span>
        <span class="s1">x2 = </span><span class="s3">92</span>
        <span class="s1">y2 = </span><span class="s3">77</span>
        <span class="s1">x3 = </span><span class="s3">20</span>
        <span class="s1">y3 = </span><span class="s3">60</span>
        <span class="s1">fg_test_points = [(x1</span><span class="s0">, </span><span class="s1">y1)</span><span class="s0">, </span><span class="s1">(x2</span><span class="s0">, </span><span class="s1">y2)</span><span class="s0">, </span><span class="s1">(x3</span><span class="s0">, </span><span class="s1">y3)</span><span class="s0">, </span><span class="s1">(x1 + </span><span class="s3">10</span><span class="s0">, </span><span class="s1">y1 + </span><span class="s3">30</span><span class="s1">)]</span>
        <span class="s1">bg_test_points = [(x1 - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y1 - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(x2 + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y2 + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(x3 - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">y3 + </span><span class="s3">1</span><span class="s1">)]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.filled_trigon(surf</span><span class="s0">, </span><span class="s1">x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2</span><span class="s0">, </span><span class="s1">x3</span><span class="s0">, </span><span class="s1">y3</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_polygon(self):</span>
        <span class="s2">&quot;&quot;&quot;polygon(surface, points, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">points = [(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">15</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)]</span>
        <span class="s1">fg_test_points = points + [</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.polygon(surf</span><span class="s0">, </span><span class="s1">points</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_aapolygon(self):</span>
        <span class="s2">&quot;&quot;&quot;aapolygon(surface, points, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">points = [(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">15</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)]</span>
        <span class="s1">fg_test_points = points</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.aapolygon(surf</span><span class="s0">, </span><span class="s1">points</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_not_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_aapolygon__with_horizontal_edge(self):</span>
        <span class="s2">&quot;&quot;&quot;Ensure aapolygon draws horizontal edges correctly. 
 
        This test creates 2 surfaces and draws a polygon on each. The pixels 
        on each surface are compared to ensure they are the same. The only 
        difference between the 2 polygons is that one is drawn using 
        aapolygon() and the other using multiple line() calls. They should 
        produce the same final drawing. 
 
        Related to issue #622. 
        &quot;&quot;&quot;</span>
        <span class="s1">bg_color = pygame.Color(</span><span class="s5">&quot;white&quot;</span><span class="s1">)</span>
        <span class="s1">line_color = pygame.Color(</span><span class="s5">&quot;black&quot;</span><span class="s1">)</span>
        <span class="s1">width</span><span class="s0">, </span><span class="s1">height = </span><span class="s3">11</span><span class="s0">, </span><span class="s3">10</span>
        <span class="s1">expected_surface = pygame.Surface((width</span><span class="s0">, </span><span class="s1">height)</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s3">32</span><span class="s1">)</span>
        <span class="s1">expected_surface.fill(bg_color)</span>
        <span class="s1">surface = pygame.Surface((width</span><span class="s0">, </span><span class="s1">height)</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s3">32</span><span class="s1">)</span>
        <span class="s1">surface.fill(bg_color)</span>

        <span class="s1">points = ((</span><span class="s3">0</span><span class="s0">, </span><span class="s3">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0</span><span class="s0">, </span><span class="s1">height - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(width - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">height - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(width - </span><span class="s3">1</span><span class="s0">, </span><span class="s3">0</span><span class="s1">))</span>

        <span class="s4"># The points are used to draw the expected aapolygon using the line()</span>
        <span class="s4"># function.</span>
        <span class="s0">for </span><span class="s1">(x1</span><span class="s0">, </span><span class="s1">y1)</span><span class="s0">, </span><span class="s1">(x2</span><span class="s0">, </span><span class="s1">y2) </span><span class="s0">in </span><span class="s1">zip(points</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">:] + points[:</span><span class="s3">1</span><span class="s1">]):</span>
            <span class="s1">pygame.gfxdraw.line(expected_surface</span><span class="s0">, </span><span class="s1">x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2</span><span class="s0">, </span><span class="s1">line_color)</span>

        <span class="s4"># The points in this order fail to draw the horizontal edge along</span>
        <span class="s4"># the top.</span>
        <span class="s1">pygame.gfxdraw.aapolygon(surface</span><span class="s0">, </span><span class="s1">points</span><span class="s0">, </span><span class="s1">line_color)</span>

        <span class="s4"># The surfaces are locked for a possible speed up of pixel access.</span>
        <span class="s1">expected_surface.lock()</span>
        <span class="s1">surface.lock()</span>
        <span class="s0">for </span><span class="s1">x </span><span class="s0">in </span><span class="s1">range(width):</span>
            <span class="s0">for </span><span class="s1">y </span><span class="s0">in </span><span class="s1">range(height):</span>
                <span class="s1">self.assertEqual(</span>
                    <span class="s1">expected_surface.get_at((x</span><span class="s0">, </span><span class="s1">y))</span><span class="s0">,</span>
                    <span class="s1">surface.get_at((x</span><span class="s0">, </span><span class="s1">y))</span><span class="s0">,</span>
                    <span class="s5">f&quot;pos=(</span><span class="s0">{</span><span class="s1">x</span><span class="s0">}</span><span class="s5">, </span><span class="s0">{</span><span class="s1">y</span><span class="s0">}</span><span class="s5">)&quot;</span><span class="s0">,</span>
                <span class="s1">)</span>

        <span class="s1">surface.unlock()</span>
        <span class="s1">expected_surface.unlock()</span>

    <span class="s0">def </span><span class="s1">test_filled_polygon(self):</span>
        <span class="s2">&quot;&quot;&quot;filled_polygon(surface, points, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">points = [(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">15</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)]</span>
        <span class="s1">fg_test_points = points + [</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.filled_polygon(surf</span><span class="s0">, </span><span class="s1">points</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

    <span class="s0">def </span><span class="s1">test_textured_polygon(self):</span>
        <span class="s2">&quot;&quot;&quot;textured_polygon(surface, points, texture, tx, ty): return None&quot;&quot;&quot;</span>
        <span class="s1">w</span><span class="s0">, </span><span class="s1">h = self.default_size</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">tx = </span><span class="s3">0</span>
        <span class="s1">ty = </span><span class="s3">0</span>
        <span class="s1">texture = pygame.Surface((w + tx</span><span class="s0">, </span><span class="s1">h + ty)</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s3">24</span><span class="s1">)</span>
        <span class="s1">texture.fill(fg</span><span class="s0">, </span><span class="s1">(</span><span class="s3">0</span><span class="s0">, </span><span class="s3">0</span><span class="s0">, </span><span class="s1">w</span><span class="s0">, </span><span class="s1">h))</span>
        <span class="s1">points = [(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">15</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)]</span>
        <span class="s4"># Don't know how to really check this as boarder points may</span>
        <span class="s4"># or may not be included in the textured polygon.</span>
        <span class="s1">fg_test_points = [(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">30</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">40</span><span class="s1">)]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces[</span><span class="s3">1</span><span class="s1">:]:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.textured_polygon(surf</span><span class="s0">, </span><span class="s1">points</span><span class="s0">, </span><span class="s1">texture</span><span class="s0">, </span><span class="s1">-tx</span><span class="s0">, </span><span class="s1">-ty)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>

        <span class="s4"># Alpha blit to 8 bits-per-pixel surface forbidden.</span>
        <span class="s1">texture = pygame.Surface(self.default_size</span><span class="s0">, </span><span class="s1">SRCALPHA</span><span class="s0">, </span><span class="s3">32</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ValueError</span><span class="s0">,</span>
            <span class="s1">pygame.gfxdraw.textured_polygon</span><span class="s0">,</span>
            <span class="s1">self.surfaces[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">,</span>
            <span class="s1">points</span><span class="s0">,</span>
            <span class="s1">texture</span><span class="s0">,</span>
            <span class="s3">0</span><span class="s0">,</span>
            <span class="s3">0</span><span class="s0">,</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_bezier(self):</span>
        <span class="s2">&quot;&quot;&quot;bezier(surface, points, steps, color): return None&quot;&quot;&quot;</span>
        <span class="s1">fg = self.foreground_color</span>
        <span class="s1">bg = self.background_color</span>
        <span class="s1">points = [(</span><span class="s3">10</span><span class="s0">, </span><span class="s3">50</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">25</span><span class="s0">, </span><span class="s3">15</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">60</span><span class="s0">, </span><span class="s3">80</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s3">92</span><span class="s0">, </span><span class="s3">30</span><span class="s1">)]</span>
        <span class="s1">fg_test_points = [points[</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">]]</span>
        <span class="s1">bg_test_points = [</span>
            <span class="s1">(points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] - </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">0</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">0</span><span class="s1">] + </span><span class="s3">1</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">3</span><span class="s1">][</span><span class="s3">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">1</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] + </span><span class="s3">3</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">points[</span><span class="s3">2</span><span class="s1">][</span><span class="s3">1</span><span class="s1">] - </span><span class="s3">3</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">surf </span><span class="s0">in </span><span class="s1">self.surfaces:</span>
            <span class="s1">fg_adjusted = surf.unmap_rgb(surf.map_rgb(fg))</span>
            <span class="s1">bg_adjusted = surf.unmap_rgb(surf.map_rgb(bg))</span>
            <span class="s1">pygame.gfxdraw.bezier(surf</span><span class="s0">, </span><span class="s1">points</span><span class="s0">, </span><span class="s3">30</span><span class="s0">, </span><span class="s1">fg)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">fg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">fg_adjusted)</span>
            <span class="s0">for </span><span class="s1">posn </span><span class="s0">in </span><span class="s1">bg_test_points:</span>
                <span class="s1">self.check_at(surf</span><span class="s0">, </span><span class="s1">posn</span><span class="s0">, </span><span class="s1">bg_adjusted)</span>


<span class="s0">if </span><span class="s1">__name__ == </span><span class="s5">&quot;__main__&quot;</span><span class="s1">:</span>
    <span class="s1">unittest.main()</span>
</pre>
</body>
</html>