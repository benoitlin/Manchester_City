<html>
<head>
<title>rect_test.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6897bb;}
.s3 { color: #808080;}
.s4 { color: #629755; font-style: italic;}
.s5 { color: #6a8759;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
rect_test.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">math</span>
<span class="s0">import </span><span class="s1">unittest</span>
<span class="s0">from </span><span class="s1">collections.abc </span><span class="s0">import </span><span class="s1">Collection</span><span class="s0">, </span><span class="s1">Sequence</span>

<span class="s0">from </span><span class="s1">pygame </span><span class="s0">import </span><span class="s1">Rect</span><span class="s0">, </span><span class="s1">Vector2</span>
<span class="s0">from </span><span class="s1">pygame.tests </span><span class="s0">import </span><span class="s1">test_utils</span>


<span class="s0">class </span><span class="s1">RectTypeTest(unittest.TestCase):</span>
    <span class="s0">def </span><span class="s1">_assertCountEqual(self</span><span class="s0">, </span><span class="s1">*args</span><span class="s0">, </span><span class="s1">**kwargs):</span>
        <span class="s1">self.assertCountEqual(*args</span><span class="s0">, </span><span class="s1">**kwargs)</span>

    <span class="s0">def </span><span class="s1">testConstructionXYWidthHeight(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">r.left)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">2</span><span class="s0">, </span><span class="s1">r.top)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">3</span><span class="s0">, </span><span class="s1">r.width)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">4</span><span class="s0">, </span><span class="s1">r.height)</span>

    <span class="s0">def </span><span class="s1">testConstructionTopLeftSize(self):</span>
        <span class="s1">r = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">r.left)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">2</span><span class="s0">, </span><span class="s1">r.top)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">3</span><span class="s0">, </span><span class="s1">r.width)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">4</span><span class="s0">, </span><span class="s1">r.height)</span>

    <span class="s0">def </span><span class="s1">testCalculatedAttributes(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(r.left + r.width</span><span class="s0">, </span><span class="s1">r.right)</span>
        <span class="s1">self.assertEqual(r.top + r.height</span><span class="s0">, </span><span class="s1">r.bottom)</span>
        <span class="s1">self.assertEqual((r.width</span><span class="s0">, </span><span class="s1">r.height)</span><span class="s0">, </span><span class="s1">r.size)</span>
        <span class="s1">self.assertEqual((r.left</span><span class="s0">, </span><span class="s1">r.top)</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual((r.right</span><span class="s0">, </span><span class="s1">r.top)</span><span class="s0">, </span><span class="s1">r.topright)</span>
        <span class="s1">self.assertEqual((r.left</span><span class="s0">, </span><span class="s1">r.bottom)</span><span class="s0">, </span><span class="s1">r.bottomleft)</span>
        <span class="s1">self.assertEqual((r.right</span><span class="s0">, </span><span class="s1">r.bottom)</span><span class="s0">, </span><span class="s1">r.bottomright)</span>

        <span class="s1">midx = r.left + r.width // </span><span class="s2">2</span>
        <span class="s1">midy = r.top + r.height // </span><span class="s2">2</span>

        <span class="s1">self.assertEqual(midx</span><span class="s0">, </span><span class="s1">r.centerx)</span>
        <span class="s1">self.assertEqual(midy</span><span class="s0">, </span><span class="s1">r.centery)</span>
        <span class="s1">self.assertEqual((r.centerx</span><span class="s0">, </span><span class="s1">r.centery)</span><span class="s0">, </span><span class="s1">r.center)</span>
        <span class="s1">self.assertEqual((r.centerx</span><span class="s0">, </span><span class="s1">r.top)</span><span class="s0">, </span><span class="s1">r.midtop)</span>
        <span class="s1">self.assertEqual((r.centerx</span><span class="s0">, </span><span class="s1">r.bottom)</span><span class="s0">, </span><span class="s1">r.midbottom)</span>
        <span class="s1">self.assertEqual((r.left</span><span class="s0">, </span><span class="s1">r.centery)</span><span class="s0">, </span><span class="s1">r.midleft)</span>
        <span class="s1">self.assertEqual((r.right</span><span class="s0">, </span><span class="s1">r.centery)</span><span class="s0">, </span><span class="s1">r.midright)</span>

    <span class="s0">def </span><span class="s1">test_rect_iter(self):</span>
        <span class="s1">rect = Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">150</span><span class="s0">, </span><span class="s2">200</span><span class="s1">)</span>

        <span class="s3"># call __iter__ explicitly to test that it is defined</span>
        <span class="s1">rect_iterator = rect.__iter__()</span>
        <span class="s0">for </span><span class="s1">i</span><span class="s0">, </span><span class="s1">val </span><span class="s0">in </span><span class="s1">enumerate(rect_iterator):</span>
            <span class="s1">self.assertEqual(rect[i]</span><span class="s0">, </span><span class="s1">val)</span>

    <span class="s0">def </span><span class="s1">test_normalize(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures normalize works when width and height are both negative.&quot;&quot;&quot;</span>
        <span class="s1">test_rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(-</span><span class="s2">3</span><span class="s0">, </span><span class="s1">-</span><span class="s2">6</span><span class="s1">))</span>
        <span class="s1">expected_normalized_rect = (</span>
            <span class="s1">(test_rect.x + test_rect.w</span><span class="s0">, </span><span class="s1">test_rect.y + test_rect.h)</span><span class="s0">,</span>
            <span class="s1">(-test_rect.w</span><span class="s0">, </span><span class="s1">-test_rect.h)</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s1">test_rect.normalize()</span>

        <span class="s1">self.assertEqual(test_rect</span><span class="s0">, </span><span class="s1">expected_normalized_rect)</span>

    <span class="s0">def </span><span class="s1">test_normalize__positive_height(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures normalize works with a negative width and a positive height.&quot;&quot;&quot;</span>
        <span class="s1">test_rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(-</span><span class="s2">3</span><span class="s0">, </span><span class="s2">6</span><span class="s1">))</span>
        <span class="s1">expected_normalized_rect = (</span>
            <span class="s1">(test_rect.x + test_rect.w</span><span class="s0">, </span><span class="s1">test_rect.y)</span><span class="s0">,</span>
            <span class="s1">(-test_rect.w</span><span class="s0">, </span><span class="s1">test_rect.h)</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s1">test_rect.normalize()</span>

        <span class="s1">self.assertEqual(test_rect</span><span class="s0">, </span><span class="s1">expected_normalized_rect)</span>

    <span class="s0">def </span><span class="s1">test_normalize__positive_width(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures normalize works with a positive width and a negative height.&quot;&quot;&quot;</span>
        <span class="s1">test_rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">3</span><span class="s0">, </span><span class="s1">-</span><span class="s2">6</span><span class="s1">))</span>
        <span class="s1">expected_normalized_rect = (</span>
            <span class="s1">(test_rect.x</span><span class="s0">, </span><span class="s1">test_rect.y + test_rect.h)</span><span class="s0">,</span>
            <span class="s1">(test_rect.w</span><span class="s0">, </span><span class="s1">-test_rect.h)</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s1">test_rect.normalize()</span>

        <span class="s1">self.assertEqual(test_rect</span><span class="s0">, </span><span class="s1">expected_normalized_rect)</span>

    <span class="s0">def </span><span class="s1">test_normalize__zero_height(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures normalize works with a negative width and a zero height.&quot;&quot;&quot;</span>
        <span class="s1">test_rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(-</span><span class="s2">3</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span>
        <span class="s1">expected_normalized_rect = (</span>
            <span class="s1">(test_rect.x + test_rect.w</span><span class="s0">, </span><span class="s1">test_rect.y)</span><span class="s0">,</span>
            <span class="s1">(-test_rect.w</span><span class="s0">, </span><span class="s1">test_rect.h)</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s1">test_rect.normalize()</span>

        <span class="s1">self.assertEqual(test_rect</span><span class="s0">, </span><span class="s1">expected_normalized_rect)</span>

    <span class="s0">def </span><span class="s1">test_normalize__zero_width(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures normalize works with a zero width and a negative height.&quot;&quot;&quot;</span>
        <span class="s1">test_rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">0</span><span class="s0">, </span><span class="s1">-</span><span class="s2">6</span><span class="s1">))</span>
        <span class="s1">expected_normalized_rect = (</span>
            <span class="s1">(test_rect.x</span><span class="s0">, </span><span class="s1">test_rect.y + test_rect.h)</span><span class="s0">,</span>
            <span class="s1">(test_rect.w</span><span class="s0">, </span><span class="s1">-test_rect.h)</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s1">test_rect.normalize()</span>

        <span class="s1">self.assertEqual(test_rect</span><span class="s0">, </span><span class="s1">expected_normalized_rect)</span>

    <span class="s0">def </span><span class="s1">test_normalize__non_negative(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures normalize works when width and height are both non-negative. 
 
        Tests combinations of positive and zero values for width and height. 
        The normalize method has no impact when both width and height are 
        non-negative. 
        &quot;&quot;&quot;</span>
        <span class="s0">for </span><span class="s1">size </span><span class="s0">in </span><span class="s1">((</span><span class="s2">3</span><span class="s0">, </span><span class="s2">6</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">6</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)):</span>
            <span class="s1">test_rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">size)</span>
            <span class="s1">expected_normalized_rect = Rect(test_rect)</span>

            <span class="s1">test_rect.normalize()</span>

            <span class="s1">self.assertEqual(test_rect</span><span class="s0">, </span><span class="s1">expected_normalized_rect)</span>

    <span class="s0">def </span><span class="s1">test_x(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures changing the x attribute moves the rect and does not change 
        the rect's size. 
        &quot;&quot;&quot;</span>
        <span class="s1">expected_x = </span><span class="s2">10</span>
        <span class="s1">expected_y = </span><span class="s2">2</span>
        <span class="s1">expected_size = (</span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">r = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s1">expected_y)</span><span class="s0">, </span><span class="s1">expected_size)</span>

        <span class="s1">r.x = expected_x</span>

        <span class="s1">self.assertEqual(r.x</span><span class="s0">, </span><span class="s1">expected_x)</span>
        <span class="s1">self.assertEqual(r.x</span><span class="s0">, </span><span class="s1">r.left)</span>
        <span class="s1">self.assertEqual(r.y</span><span class="s0">, </span><span class="s1">expected_y)</span>
        <span class="s1">self.assertEqual(r.size</span><span class="s0">, </span><span class="s1">expected_size)</span>

    <span class="s0">def </span><span class="s1">test_x__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the x attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.x = value</span>

    <span class="s0">def </span><span class="s1">test_x__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the x attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.x</span>

    <span class="s0">def </span><span class="s1">test_y(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures changing the y attribute moves the rect and does not change 
        the rect's size. 
        &quot;&quot;&quot;</span>
        <span class="s1">expected_x = </span><span class="s2">1</span>
        <span class="s1">expected_y = </span><span class="s2">20</span>
        <span class="s1">expected_size = (</span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">r = Rect((expected_x</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected_size)</span>

        <span class="s1">r.y = expected_y</span>

        <span class="s1">self.assertEqual(r.y</span><span class="s0">, </span><span class="s1">expected_y)</span>
        <span class="s1">self.assertEqual(r.y</span><span class="s0">, </span><span class="s1">r.top)</span>
        <span class="s1">self.assertEqual(r.x</span><span class="s0">, </span><span class="s1">expected_x)</span>
        <span class="s1">self.assertEqual(r.size</span><span class="s0">, </span><span class="s1">expected_size)</span>

    <span class="s0">def </span><span class="s1">test_y__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the y attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.y = value</span>

    <span class="s0">def </span><span class="s1">test_y__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the y attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.y</span>

    <span class="s0">def </span><span class="s1">test_left(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the left attribute moves the rect and does not change 
        the rect's width 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_left = </span><span class="s2">10</span>

        <span class="s1">r.left = new_left</span>
        <span class="s1">self.assertEqual(new_left</span><span class="s0">, </span><span class="s1">r.left)</span>
        <span class="s1">self.assertEqual(Rect(new_left</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r)</span>

    <span class="s0">def </span><span class="s1">test_left__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the left attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.left = value</span>

    <span class="s0">def </span><span class="s1">test_left__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the left attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.left</span>

    <span class="s0">def </span><span class="s1">test_right(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the right attribute moves the rect and does not change 
        the rect's width 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_right = r.right + </span><span class="s2">20</span>
        <span class="s1">expected_left = r.left + </span><span class="s2">20</span>
        <span class="s1">old_width = r.width</span>

        <span class="s1">r.right = new_right</span>
        <span class="s1">self.assertEqual(new_right</span><span class="s0">, </span><span class="s1">r.right)</span>
        <span class="s1">self.assertEqual(expected_left</span><span class="s0">, </span><span class="s1">r.left)</span>
        <span class="s1">self.assertEqual(old_width</span><span class="s0">, </span><span class="s1">r.width)</span>

    <span class="s0">def </span><span class="s1">test_right__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the right attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.right = value</span>

    <span class="s0">def </span><span class="s1">test_right__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the right attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.right</span>

    <span class="s0">def </span><span class="s1">test_top(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the top attribute moves the rect and does not change 
        the rect's width 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_top = </span><span class="s2">10</span>

        <span class="s1">r.top = new_top</span>
        <span class="s1">self.assertEqual(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">new_top</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r)</span>
        <span class="s1">self.assertEqual(new_top</span><span class="s0">, </span><span class="s1">r.top)</span>

    <span class="s0">def </span><span class="s1">test_top__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the top attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.top = value</span>

    <span class="s0">def </span><span class="s1">test_top__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the top attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.top</span>

    <span class="s0">def </span><span class="s1">test_bottom(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the bottom attribute moves the rect and does not change 
        the rect's height 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_bottom = r.bottom + </span><span class="s2">20</span>
        <span class="s1">expected_top = r.top + </span><span class="s2">20</span>
        <span class="s1">old_height = r.height</span>

        <span class="s1">r.bottom = new_bottom</span>
        <span class="s1">self.assertEqual(new_bottom</span><span class="s0">, </span><span class="s1">r.bottom)</span>
        <span class="s1">self.assertEqual(expected_top</span><span class="s0">, </span><span class="s1">r.top)</span>
        <span class="s1">self.assertEqual(old_height</span><span class="s0">, </span><span class="s1">r.height)</span>

    <span class="s0">def </span><span class="s1">test_bottom__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the bottom attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.bottom = value</span>

    <span class="s0">def </span><span class="s1">test_bottom__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the bottom attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.bottom</span>

    <span class="s0">def </span><span class="s1">test_centerx(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the centerx attribute moves the rect and does not change 
        the rect's width 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_centerx = r.centerx + </span><span class="s2">20</span>
        <span class="s1">expected_left = r.left + </span><span class="s2">20</span>
        <span class="s1">old_width = r.width</span>

        <span class="s1">r.centerx = new_centerx</span>
        <span class="s1">self.assertEqual(new_centerx</span><span class="s0">, </span><span class="s1">r.centerx)</span>
        <span class="s1">self.assertEqual(expected_left</span><span class="s0">, </span><span class="s1">r.left)</span>
        <span class="s1">self.assertEqual(old_width</span><span class="s0">, </span><span class="s1">r.width)</span>

    <span class="s0">def </span><span class="s1">test_centerx__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the centerx attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.centerx = value</span>

    <span class="s0">def </span><span class="s1">test_centerx__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the centerx attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.centerx</span>

    <span class="s0">def </span><span class="s1">test_centery(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the centery attribute moves the rect and does not change 
        the rect's width 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_centery = r.centery + </span><span class="s2">20</span>
        <span class="s1">expected_top = r.top + </span><span class="s2">20</span>
        <span class="s1">old_height = r.height</span>

        <span class="s1">r.centery = new_centery</span>
        <span class="s1">self.assertEqual(new_centery</span><span class="s0">, </span><span class="s1">r.centery)</span>
        <span class="s1">self.assertEqual(expected_top</span><span class="s0">, </span><span class="s1">r.top)</span>
        <span class="s1">self.assertEqual(old_height</span><span class="s0">, </span><span class="s1">r.height)</span>

    <span class="s0">def </span><span class="s1">test_centery__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the centery attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.centery = value</span>

    <span class="s0">def </span><span class="s1">test_centery__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the centery attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.centery</span>

    <span class="s0">def </span><span class="s1">test_topleft(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the topleft attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.topleft = new_topleft</span>
        <span class="s1">self.assertEqual(new_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_topleft__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the topleft attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.topleft = value</span>

    <span class="s0">def </span><span class="s1">test_topleft__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the topleft attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.topleft</span>

    <span class="s0">def </span><span class="s1">test_bottomleft(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the bottomleft attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_bottomleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.bottom + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">expected_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.bottomleft = new_bottomleft</span>
        <span class="s1">self.assertEqual(new_bottomleft</span><span class="s0">, </span><span class="s1">r.bottomleft)</span>
        <span class="s1">self.assertEqual(expected_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_bottomleft__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the bottomleft attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.bottomleft = value</span>

    <span class="s0">def </span><span class="s1">test_bottomleft__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the bottomleft attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.bottomleft</span>

    <span class="s0">def </span><span class="s1">test_topright(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the topright attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_topright = (r.right + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">expected_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.topright = new_topright</span>
        <span class="s1">self.assertEqual(new_topright</span><span class="s0">, </span><span class="s1">r.topright)</span>
        <span class="s1">self.assertEqual(expected_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_topright__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the topright attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.topright = value</span>

    <span class="s0">def </span><span class="s1">test_topright__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the topright attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.topright</span>

    <span class="s0">def </span><span class="s1">test_bottomright(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the bottomright attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_bottomright = (r.right + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.bottom + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">expected_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.bottomright = new_bottomright</span>
        <span class="s1">self.assertEqual(new_bottomright</span><span class="s0">, </span><span class="s1">r.bottomright)</span>
        <span class="s1">self.assertEqual(expected_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_bottomright__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the bottomright attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.bottomright = value</span>

    <span class="s0">def </span><span class="s1">test_bottomright__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the bottomright attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.bottomright</span>

    <span class="s0">def </span><span class="s1">test_center(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the center attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_center = (r.centerx + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.centery + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">expected_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.center = new_center</span>
        <span class="s1">self.assertEqual(new_center</span><span class="s0">, </span><span class="s1">r.center)</span>
        <span class="s1">self.assertEqual(expected_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_center__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the center attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.center = value</span>

    <span class="s0">def </span><span class="s1">test_center__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the center attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.center</span>

    <span class="s0">def </span><span class="s1">test_midleft(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the midleft attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_midleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.centery + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">expected_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.midleft = new_midleft</span>
        <span class="s1">self.assertEqual(new_midleft</span><span class="s0">, </span><span class="s1">r.midleft)</span>
        <span class="s1">self.assertEqual(expected_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_midleft__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the midleft attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.midleft = value</span>

    <span class="s0">def </span><span class="s1">test_midleft__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the midleft attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.midleft</span>

    <span class="s0">def </span><span class="s1">test_midright(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the midright attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_midright = (r.right + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.centery + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">expected_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.midright = new_midright</span>
        <span class="s1">self.assertEqual(new_midright</span><span class="s0">, </span><span class="s1">r.midright)</span>
        <span class="s1">self.assertEqual(expected_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_midright__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the midright attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.midright = value</span>

    <span class="s0">def </span><span class="s1">test_midright__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the midright attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.midright</span>

    <span class="s0">def </span><span class="s1">test_midtop(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the midtop attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_midtop = (r.centerx + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">expected_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.midtop = new_midtop</span>
        <span class="s1">self.assertEqual(new_midtop</span><span class="s0">, </span><span class="s1">r.midtop)</span>
        <span class="s1">self.assertEqual(expected_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_midtop__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the midtop attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.midtop = value</span>

    <span class="s0">def </span><span class="s1">test_midtop__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the midtop attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.midtop</span>

    <span class="s0">def </span><span class="s1">test_midbottom(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the midbottom attribute moves the rect and does not change 
        the rect's size 
        &quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_midbottom = (r.centerx + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.bottom + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">expected_topleft = (r.left + </span><span class="s2">20</span><span class="s0">, </span><span class="s1">r.top + </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">old_size = r.size</span>

        <span class="s1">r.midbottom = new_midbottom</span>
        <span class="s1">self.assertEqual(new_midbottom</span><span class="s0">, </span><span class="s1">r.midbottom)</span>
        <span class="s1">self.assertEqual(expected_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">self.assertEqual(old_size</span><span class="s0">, </span><span class="s1">r.size)</span>

    <span class="s0">def </span><span class="s1">test_midbottom__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the midbottom attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.midbottom = value</span>

    <span class="s0">def </span><span class="s1">test_midbottom__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the midbottom attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.midbottom</span>

    <span class="s0">def </span><span class="s1">test_width(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the width resizes the rect from the top-left corner&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_width = </span><span class="s2">10</span>
        <span class="s1">old_topleft = r.topleft</span>
        <span class="s1">old_height = r.height</span>

        <span class="s1">r.width = new_width</span>
        <span class="s1">self.assertEqual(new_width</span><span class="s0">, </span><span class="s1">r.width)</span>
        <span class="s1">self.assertEqual(old_height</span><span class="s0">, </span><span class="s1">r.height)</span>
        <span class="s1">self.assertEqual(old_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>

    <span class="s0">def </span><span class="s1">test_width__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the width attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.width = value</span>

    <span class="s0">def </span><span class="s1">test_width__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the width attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.width</span>

    <span class="s0">def </span><span class="s1">test_height(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the height resizes the rect from the top-left corner&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_height = </span><span class="s2">10</span>
        <span class="s1">old_topleft = r.topleft</span>
        <span class="s1">old_width = r.width</span>

        <span class="s1">r.height = new_height</span>
        <span class="s1">self.assertEqual(new_height</span><span class="s0">, </span><span class="s1">r.height)</span>
        <span class="s1">self.assertEqual(old_width</span><span class="s0">, </span><span class="s1">r.width)</span>
        <span class="s1">self.assertEqual(old_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>

    <span class="s0">def </span><span class="s1">test_height__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the height attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.height = value</span>

    <span class="s0">def </span><span class="s1">test_height__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the height attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.height</span>

    <span class="s0">def </span><span class="s1">test_size(self):</span>
        <span class="s4">&quot;&quot;&quot;Changing the size resizes the rect from the top-left corner&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">new_size = (</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span>
        <span class="s1">old_topleft = r.topleft</span>

        <span class="s1">r.size = new_size</span>
        <span class="s1">self.assertEqual(new_size</span><span class="s0">, </span><span class="s1">r.size)</span>
        <span class="s1">self.assertEqual(old_topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>

    <span class="s0">def </span><span class="s1">test_size__invalid_value(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the size attribute handles invalid values correctly.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">for </span><span class="s1">value </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">[]</span><span class="s0">, </span><span class="s5">&quot;1&quot;</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">]):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">r.size = value</span>

    <span class="s0">def </span><span class="s1">test_size__del(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures the size attribute can't be deleted.&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s0">del </span><span class="s1">r.size</span>

    <span class="s0">def </span><span class="s1">test_contains(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>

        <span class="s1">self.assertTrue(</span>
            <span class="s1">r.contains(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">, </span><span class="s5">&quot;r does not contain Rect(2, 3, 1, 1)&quot;</span>
        <span class="s1">)</span>
        <span class="s1">self.assertTrue(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">) </span><span class="s0">in </span><span class="s1">r</span><span class="s0">, </span><span class="s5">&quot;r does not contain Rect(2, 3, 1, 1) 2&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(</span>
            <span class="s1">r.contains(Rect(r))</span><span class="s0">, </span><span class="s5">&quot;r does not contain the same rect as itself&quot;</span>
        <span class="s1">)</span>
        <span class="s1">self.assertTrue(r </span><span class="s0">in </span><span class="s1">Rect(r)</span><span class="s0">, </span><span class="s5">&quot;r does not contain the same rect as itself&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(</span>
            <span class="s1">r.contains(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s5">&quot;r does not contain an empty rect within its bounds&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertTrue(</span>
            <span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">) </span><span class="s0">in </span><span class="s1">r</span><span class="s0">,</span>
            <span class="s5">&quot;r does not contain an empty rect within its bounds&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(r.contains(Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span><span class="s0">, </span><span class="s5">&quot;r contains Rect(0, 0, 1, 2)&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertFalse(r.contains(Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">, </span><span class="s5">&quot;r contains Rect(4, 6, 1, 1)&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertFalse(r.contains(Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span><span class="s0">, </span><span class="s5">&quot;r contains Rect(4, 6, 0, 0)&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertFalse(Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">) </span><span class="s0">in </span><span class="s1">r</span><span class="s0">, </span><span class="s5">&quot;r contains Rect(0, 0, 1, 2)&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertFalse(Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">) </span><span class="s0">in </span><span class="s1">r</span><span class="s0">, </span><span class="s5">&quot;r contains Rect(4, 6, 1, 1)&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertFalse(Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">) </span><span class="s0">in </span><span class="s1">r</span><span class="s0">, </span><span class="s5">&quot;r contains Rect(4, 6, 0, 0)&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(</span><span class="s2">2 </span><span class="s0">in </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s5">&quot;r does not contain 2&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertFalse(</span><span class="s2">3 </span><span class="s0">in </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s5">&quot;r contains 3&quot;</span><span class="s1">)</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">&quot;string&quot; </span><span class="s0">in </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s2">4 </span><span class="s1">+ </span><span class="s2">3j </span><span class="s0">in </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_collidepoint(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>

        <span class="s1">self.assertTrue(</span>
            <span class="s1">r.collidepoint(r.left</span><span class="s0">, </span><span class="s1">r.top)</span><span class="s0">, </span><span class="s5">&quot;r does not collide with point (left, top)&quot;</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r.collidepoint(r.left - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">r.top)</span><span class="s0">, </span><span class="s5">&quot;r collides with point (left - 1, top)&quot;</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r.collidepoint(r.left</span><span class="s0">, </span><span class="s1">r.top - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s5">&quot;r collides with point (left, top - 1)&quot;</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r.collidepoint(r.left - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">r.top - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s5">&quot;r collides with point (left - 1, top - 1)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s1">self.assertTrue(</span>
            <span class="s1">r.collidepoint(r.right - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">r.bottom - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s5">&quot;r does not collide with point (right - 1, bottom - 1)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r.collidepoint(r.right</span><span class="s0">, </span><span class="s1">r.bottom)</span><span class="s0">, </span><span class="s5">&quot;r collides with point (right, bottom)&quot;</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r.collidepoint(r.right - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">r.bottom)</span><span class="s0">,</span>
            <span class="s5">&quot;r collides with point (right - 1, bottom)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r.collidepoint(r.right</span><span class="s0">, </span><span class="s1">r.bottom - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s5">&quot;r collides with point (right, bottom - 1)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_inflate__larger(self):</span>
        <span class="s4">&quot;&quot;&quot;The inflate method inflates around the center of the rectangle&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">8</span><span class="s1">)</span>
        <span class="s1">r2 = r.inflate(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(r.center</span><span class="s0">, </span><span class="s1">r2.center)</span>
        <span class="s1">self.assertEqual(r.left - </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r2.left)</span>
        <span class="s1">self.assertEqual(r.top - </span><span class="s2">3</span><span class="s0">, </span><span class="s1">r2.top)</span>
        <span class="s1">self.assertEqual(r.right + </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r2.right)</span>
        <span class="s1">self.assertEqual(r.bottom + </span><span class="s2">3</span><span class="s0">, </span><span class="s1">r2.bottom)</span>
        <span class="s1">self.assertEqual(r.width + </span><span class="s2">4</span><span class="s0">, </span><span class="s1">r2.width)</span>
        <span class="s1">self.assertEqual(r.height + </span><span class="s2">6</span><span class="s0">, </span><span class="s1">r2.height)</span>

    <span class="s0">def </span><span class="s1">test_inflate__smaller(self):</span>
        <span class="s4">&quot;&quot;&quot;The inflate method inflates around the center of the rectangle&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">8</span><span class="s1">)</span>
        <span class="s1">r2 = r.inflate(-</span><span class="s2">4</span><span class="s0">, </span><span class="s1">-</span><span class="s2">6</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(r.center</span><span class="s0">, </span><span class="s1">r2.center)</span>
        <span class="s1">self.assertEqual(r.left + </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r2.left)</span>
        <span class="s1">self.assertEqual(r.top + </span><span class="s2">3</span><span class="s0">, </span><span class="s1">r2.top)</span>
        <span class="s1">self.assertEqual(r.right - </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r2.right)</span>
        <span class="s1">self.assertEqual(r.bottom - </span><span class="s2">3</span><span class="s0">, </span><span class="s1">r2.bottom)</span>
        <span class="s1">self.assertEqual(r.width - </span><span class="s2">4</span><span class="s0">, </span><span class="s1">r2.width)</span>
        <span class="s1">self.assertEqual(r.height - </span><span class="s2">6</span><span class="s0">, </span><span class="s1">r2.height)</span>

    <span class="s0">def </span><span class="s1">test_inflate_ip__larger(self):</span>
        <span class="s4">&quot;&quot;&quot;The inflate_ip method inflates around the center of the rectangle&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">8</span><span class="s1">)</span>
        <span class="s1">r2 = Rect(r)</span>
        <span class="s1">r2.inflate_ip(-</span><span class="s2">4</span><span class="s0">, </span><span class="s1">-</span><span class="s2">6</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(r.center</span><span class="s0">, </span><span class="s1">r2.center)</span>
        <span class="s1">self.assertEqual(r.left + </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r2.left)</span>
        <span class="s1">self.assertEqual(r.top + </span><span class="s2">3</span><span class="s0">, </span><span class="s1">r2.top)</span>
        <span class="s1">self.assertEqual(r.right - </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r2.right)</span>
        <span class="s1">self.assertEqual(r.bottom - </span><span class="s2">3</span><span class="s0">, </span><span class="s1">r2.bottom)</span>
        <span class="s1">self.assertEqual(r.width - </span><span class="s2">4</span><span class="s0">, </span><span class="s1">r2.width)</span>
        <span class="s1">self.assertEqual(r.height - </span><span class="s2">6</span><span class="s0">, </span><span class="s1">r2.height)</span>

    <span class="s0">def </span><span class="s1">test_inflate_ip__smaller(self):</span>
        <span class="s4">&quot;&quot;&quot;The inflate method inflates around the center of the rectangle&quot;&quot;&quot;</span>
        <span class="s1">r = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">8</span><span class="s1">)</span>
        <span class="s1">r2 = Rect(r)</span>
        <span class="s1">r2.inflate_ip(-</span><span class="s2">4</span><span class="s0">, </span><span class="s1">-</span><span class="s2">6</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(r.center</span><span class="s0">, </span><span class="s1">r2.center)</span>
        <span class="s1">self.assertEqual(r.left + </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r2.left)</span>
        <span class="s1">self.assertEqual(r.top + </span><span class="s2">3</span><span class="s0">, </span><span class="s1">r2.top)</span>
        <span class="s1">self.assertEqual(r.right - </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r2.right)</span>
        <span class="s1">self.assertEqual(r.bottom - </span><span class="s2">3</span><span class="s0">, </span><span class="s1">r2.bottom)</span>
        <span class="s1">self.assertEqual(r.width - </span><span class="s2">4</span><span class="s0">, </span><span class="s1">r2.width)</span>
        <span class="s1">self.assertEqual(r.height - </span><span class="s2">6</span><span class="s0">, </span><span class="s1">r2.height)</span>

    <span class="s0">def </span><span class="s1">test_clamp(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">c = Rect(</span><span class="s2">19</span><span class="s0">, </span><span class="s2">12</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">).clamp(r)</span>
        <span class="s1">self.assertEqual(c.right</span><span class="s0">, </span><span class="s1">r.right)</span>
        <span class="s1">self.assertEqual(c.top</span><span class="s0">, </span><span class="s2">12</span><span class="s1">)</span>
        <span class="s1">c = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">).clamp(r)</span>
        <span class="s1">self.assertEqual(c.topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">c = Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">500</span><span class="s0">, </span><span class="s2">22</span><span class="s0">, </span><span class="s2">33</span><span class="s1">).clamp(r)</span>
        <span class="s1">self.assertEqual(c.center</span><span class="s0">, </span><span class="s1">r.center)</span>

    <span class="s0">def </span><span class="s1">test_clamp_ip(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">c = Rect(</span><span class="s2">19</span><span class="s0">, </span><span class="s2">12</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span>
        <span class="s1">c.clamp_ip(r)</span>
        <span class="s1">self.assertEqual(c.right</span><span class="s0">, </span><span class="s1">r.right)</span>
        <span class="s1">self.assertEqual(c.top</span><span class="s0">, </span><span class="s2">12</span><span class="s1">)</span>
        <span class="s1">c = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">c.clamp_ip(r)</span>
        <span class="s1">self.assertEqual(c.topleft</span><span class="s0">, </span><span class="s1">r.topleft)</span>
        <span class="s1">c = Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">500</span><span class="s0">, </span><span class="s2">22</span><span class="s0">, </span><span class="s2">33</span><span class="s1">)</span>
        <span class="s1">c.clamp_ip(r)</span>
        <span class="s1">self.assertEqual(c.center</span><span class="s0">, </span><span class="s1">r.center)</span>

    <span class="s0">def </span><span class="s1">test_clip(self):</span>
        <span class="s1">r1 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r1.clip(Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r1.clip(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r1.clip(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual((</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r1.clip(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">6</span><span class="s1">).size)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">r1</span><span class="s0">, </span><span class="s1">r1.clip(Rect(r1))</span><span class="s0">, </span><span class="s5">&quot;r1 does not clip an identical rect to itself&quot;</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_clipline(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles four int parameters. 
 
        Tests the clipline(x1, y1, x2, y2) format. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">35</span><span class="s0">, </span><span class="s2">40</span><span class="s1">))</span>
        <span class="s1">x1 = </span><span class="s2">5</span>
        <span class="s1">y1 = </span><span class="s2">6</span>
        <span class="s1">x2 = </span><span class="s2">11</span>
        <span class="s1">y2 = </span><span class="s2">19</span>
        <span class="s1">expected_line = ((x1</span><span class="s0">, </span><span class="s1">y1)</span><span class="s0">, </span><span class="s1">(x2</span><span class="s0">, </span><span class="s1">y2))</span>

        <span class="s1">clipped_line = rect.clipline(x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2)</span>

        <span class="s1">self.assertIsInstance(clipped_line</span><span class="s0">, </span><span class="s1">tuple)</span>
        <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__two_sequences(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles a sequence of two sequences. 
 
        Tests the clipline((x1, y1), (x2, y2)) format. 
        Tests the sequences as different types. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">35</span><span class="s0">, </span><span class="s2">40</span><span class="s1">))</span>
        <span class="s1">pt1 = (</span><span class="s2">5</span><span class="s0">, </span><span class="s2">6</span><span class="s1">)</span>
        <span class="s1">pt2 = (</span><span class="s2">11</span><span class="s0">, </span><span class="s2">19</span><span class="s1">)</span>

        <span class="s1">INNER_SEQUENCES = (list</span><span class="s0">, </span><span class="s1">tuple</span><span class="s0">, </span><span class="s1">Vector2)</span>
        <span class="s1">expected_line = (pt1</span><span class="s0">, </span><span class="s1">pt2)</span>

        <span class="s0">for </span><span class="s1">inner_seq1 </span><span class="s0">in </span><span class="s1">INNER_SEQUENCES:</span>
            <span class="s1">endpt1 = inner_seq1(pt1)</span>

            <span class="s0">for </span><span class="s1">inner_seq2 </span><span class="s0">in </span><span class="s1">INNER_SEQUENCES:</span>
                <span class="s1">clipped_line = rect.clipline((endpt1</span><span class="s0">, </span><span class="s1">inner_seq2(pt2)))</span>

                <span class="s1">self.assertIsInstance(clipped_line</span><span class="s0">, </span><span class="s1">tuple)</span>
                <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__sequence_of_four_ints(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles a sequence of four ints. 
 
        Tests the clipline((x1, y1, x2, y2)) format. 
        Tests the sequence as different types. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">35</span><span class="s0">, </span><span class="s2">40</span><span class="s1">))</span>
        <span class="s1">line = (</span><span class="s2">5</span><span class="s0">, </span><span class="s2">6</span><span class="s0">, </span><span class="s2">11</span><span class="s0">, </span><span class="s2">19</span><span class="s1">)</span>
        <span class="s1">expected_line = ((line[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">line[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">, </span><span class="s1">(line[</span><span class="s2">2</span><span class="s1">]</span><span class="s0">, </span><span class="s1">line[</span><span class="s2">3</span><span class="s1">]))</span>

        <span class="s0">for </span><span class="s1">outer_seq </span><span class="s0">in </span><span class="s1">(list</span><span class="s0">, </span><span class="s1">tuple):</span>
            <span class="s1">clipped_line = rect.clipline(outer_seq(line))</span>

            <span class="s1">self.assertIsInstance(clipped_line</span><span class="s0">, </span><span class="s1">tuple)</span>
            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__sequence_of_two_sequences(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles a sequence of two sequences. 
 
        Tests the clipline(((x1, y1), (x2, y2))) format. 
        Tests the sequences as different types. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">35</span><span class="s0">, </span><span class="s2">40</span><span class="s1">))</span>
        <span class="s1">pt1 = (</span><span class="s2">5</span><span class="s0">, </span><span class="s2">6</span><span class="s1">)</span>
        <span class="s1">pt2 = (</span><span class="s2">11</span><span class="s0">, </span><span class="s2">19</span><span class="s1">)</span>

        <span class="s1">INNER_SEQUENCES = (list</span><span class="s0">, </span><span class="s1">tuple</span><span class="s0">, </span><span class="s1">Vector2)</span>
        <span class="s1">expected_line = (pt1</span><span class="s0">, </span><span class="s1">pt2)</span>

        <span class="s0">for </span><span class="s1">inner_seq1 </span><span class="s0">in </span><span class="s1">INNER_SEQUENCES:</span>
            <span class="s1">endpt1 = inner_seq1(pt1)</span>

            <span class="s0">for </span><span class="s1">inner_seq2 </span><span class="s0">in </span><span class="s1">INNER_SEQUENCES:</span>
                <span class="s1">endpt2 = inner_seq2(pt2)</span>

                <span class="s0">for </span><span class="s1">outer_seq </span><span class="s0">in </span><span class="s1">(list</span><span class="s0">, </span><span class="s1">tuple):</span>
                    <span class="s1">clipped_line = rect.clipline(outer_seq((endpt1</span><span class="s0">, </span><span class="s1">endpt2)))</span>

                    <span class="s1">self.assertIsInstance(clipped_line</span><span class="s0">, </span><span class="s1">tuple)</span>
                    <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__floats(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles float parameters.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">35</span><span class="s0">, </span><span class="s2">40</span><span class="s1">))</span>
        <span class="s1">x1 = </span><span class="s2">5.9</span>
        <span class="s1">y1 = </span><span class="s2">6.9</span>
        <span class="s1">x2 = </span><span class="s2">11.9</span>
        <span class="s1">y2 = </span><span class="s2">19.9</span>

        <span class="s3"># Floats are truncated.</span>
        <span class="s1">expected_line = (</span>
            <span class="s1">(math.floor(x1)</span><span class="s0">, </span><span class="s1">math.floor(y1))</span><span class="s0">,</span>
            <span class="s1">(math.floor(x2)</span><span class="s0">, </span><span class="s1">math.floor(y2))</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s1">clipped_line = rect.clipline(x1</span><span class="s0">, </span><span class="s1">y1</span><span class="s0">, </span><span class="s1">x2</span><span class="s0">, </span><span class="s1">y2)</span>

        <span class="s1">self.assertIsInstance(clipped_line</span><span class="s0">, </span><span class="s1">tuple)</span>
        <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__no_overlap(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures lines that do not overlap the rect are not clipped.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">10</span><span class="s0">, </span><span class="s2">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s3"># Use a bigger rect to help create test lines.</span>
        <span class="s1">big_rect = rect.inflate(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">lines = (</span>
            <span class="s1">(big_rect.bottomleft</span><span class="s0">, </span><span class="s1">big_rect.topleft)</span><span class="s0">,  </span><span class="s3"># Left edge.</span>
            <span class="s1">(big_rect.topleft</span><span class="s0">, </span><span class="s1">big_rect.topright)</span><span class="s0">,  </span><span class="s3"># Top edge.</span>
            <span class="s1">(big_rect.topright</span><span class="s0">, </span><span class="s1">big_rect.bottomright)</span><span class="s0">,  </span><span class="s3"># Right edge.</span>
            <span class="s1">(big_rect.bottomright</span><span class="s0">, </span><span class="s1">big_rect.bottomleft)</span><span class="s0">,</span>
        <span class="s1">)  </span><span class="s3"># Bottom edge.</span>
        <span class="s1">expected_line = ()</span>

        <span class="s3"># Test lines outside rect.</span>
        <span class="s0">for </span><span class="s1">line </span><span class="s0">in </span><span class="s1">lines:</span>
            <span class="s1">clipped_line = rect.clipline(line)</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__both_endpoints_outside(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures lines that overlap the rect are clipped. 
 
        Testing lines with both endpoints outside the rect. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s3"># Use a bigger rect to help create test lines.</span>
        <span class="s1">big_rect = rect.inflate(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>

        <span class="s3"># Create a dict of lines and expected results.</span>
        <span class="s1">line_dict = {</span>
            <span class="s1">(big_rect.midleft</span><span class="s0">, </span><span class="s1">big_rect.midright): (</span>
                <span class="s1">rect.midleft</span><span class="s0">,</span>
                <span class="s1">(rect.midright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.midright[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(big_rect.midtop</span><span class="s0">, </span><span class="s1">big_rect.midbottom): (</span>
                <span class="s1">rect.midtop</span><span class="s0">,</span>
                <span class="s1">(rect.midbottom[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">rect.midbottom[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s3"># Diagonals.</span>
            <span class="s1">(big_rect.topleft</span><span class="s0">, </span><span class="s1">big_rect.bottomright): (</span>
                <span class="s1">rect.topleft</span><span class="s0">,</span>
                <span class="s1">(rect.bottomright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.bottomright[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s3"># This line needs a small adjustment to make sure it intersects</span>
            <span class="s3"># the rect correctly.</span>
            <span class="s1">(</span>
                <span class="s1">(big_rect.topright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">big_rect.topright[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">,</span>
                <span class="s1">(big_rect.bottomleft[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">big_rect.bottomleft[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">): (</span>
                <span class="s1">(rect.topright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.topright[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">,</span>
                <span class="s1">(rect.bottomleft[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">rect.bottomleft[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">}</span>

        <span class="s0">for </span><span class="s1">line</span><span class="s0">, </span><span class="s1">expected_line </span><span class="s0">in </span><span class="s1">line_dict.items():</span>
            <span class="s1">clipped_line = rect.clipline(line)</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

            <span class="s3"># Swap endpoints to test for symmetry.</span>
            <span class="s1">expected_line = (expected_line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">expected_line[</span><span class="s2">0</span><span class="s1">])</span>

            <span class="s1">clipped_line = rect.clipline((line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">line[</span><span class="s2">0</span><span class="s1">]))</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__both_endpoints_inside(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures lines that overlap the rect are clipped. 
 
        Testing lines with both endpoints inside the rect. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((-</span><span class="s2">10</span><span class="s0">, </span><span class="s1">-</span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s3"># Use a smaller rect to help create test lines.</span>
        <span class="s1">small_rect = rect.inflate(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s1">)</span>

        <span class="s1">lines = (</span>
            <span class="s1">(small_rect.midleft</span><span class="s0">, </span><span class="s1">small_rect.midright)</span><span class="s0">,</span>
            <span class="s1">(small_rect.midtop</span><span class="s0">, </span><span class="s1">small_rect.midbottom)</span><span class="s0">,</span>
            <span class="s3"># Diagonals.</span>
            <span class="s1">(small_rect.topleft</span><span class="s0">, </span><span class="s1">small_rect.bottomright)</span><span class="s0">,</span>
            <span class="s1">(small_rect.topright</span><span class="s0">, </span><span class="s1">small_rect.bottomleft)</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s0">for </span><span class="s1">line </span><span class="s0">in </span><span class="s1">lines:</span>
            <span class="s1">expected_line = line</span>

            <span class="s1">clipped_line = rect.clipline(line)</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

            <span class="s3"># Swap endpoints to test for symmetry.</span>
            <span class="s1">expected_line = (expected_line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">expected_line[</span><span class="s2">0</span><span class="s1">])</span>

            <span class="s1">clipped_line = rect.clipline((line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">line[</span><span class="s2">0</span><span class="s1">]))</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__endpoints_inside_and_outside(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures lines that overlap the rect are clipped. 
 
        Testing lines with one endpoint outside the rect and the other is 
        inside the rect. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">21</span><span class="s0">, </span><span class="s2">21</span><span class="s1">))</span>
        <span class="s3"># Use a bigger rect to help create test lines.</span>
        <span class="s1">big_rect = rect.inflate(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>

        <span class="s3"># Create a dict of lines and expected results.</span>
        <span class="s1">line_dict = {</span>
            <span class="s1">(big_rect.midleft</span><span class="s0">, </span><span class="s1">rect.center): (rect.midleft</span><span class="s0">, </span><span class="s1">rect.center)</span><span class="s0">,</span>
            <span class="s1">(big_rect.midtop</span><span class="s0">, </span><span class="s1">rect.center): (rect.midtop</span><span class="s0">, </span><span class="s1">rect.center)</span><span class="s0">,</span>
            <span class="s1">(big_rect.midright</span><span class="s0">, </span><span class="s1">rect.center): (</span>
                <span class="s1">(rect.midright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.midright[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">,</span>
                <span class="s1">rect.center</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(big_rect.midbottom</span><span class="s0">, </span><span class="s1">rect.center): (</span>
                <span class="s1">(rect.midbottom[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">rect.midbottom[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">rect.center</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s3"># Diagonals.</span>
            <span class="s1">(big_rect.topleft</span><span class="s0">, </span><span class="s1">rect.center): (rect.topleft</span><span class="s0">, </span><span class="s1">rect.center)</span><span class="s0">,</span>
            <span class="s1">(big_rect.topright</span><span class="s0">, </span><span class="s1">rect.center): (</span>
                <span class="s1">(rect.topright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.topright[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">,</span>
                <span class="s1">rect.center</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(big_rect.bottomright</span><span class="s0">, </span><span class="s1">rect.center): (</span>
                <span class="s1">(rect.bottomright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.bottomright[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">rect.center</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s3"># This line needs a small adjustment to make sure it intersects</span>
            <span class="s3"># the rect correctly.</span>
            <span class="s1">((big_rect.bottomleft[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">big_rect.bottomleft[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">rect.center): (</span>
                <span class="s1">(rect.bottomleft[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">rect.bottomleft[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">rect.center</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">}</span>

        <span class="s0">for </span><span class="s1">line</span><span class="s0">, </span><span class="s1">expected_line </span><span class="s0">in </span><span class="s1">line_dict.items():</span>
            <span class="s1">clipped_line = rect.clipline(line)</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

            <span class="s3"># Swap endpoints to test for symmetry.</span>
            <span class="s1">expected_line = (expected_line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">expected_line[</span><span class="s2">0</span><span class="s1">])</span>

            <span class="s1">clipped_line = rect.clipline((line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">line[</span><span class="s2">0</span><span class="s1">]))</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__edges(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline properly clips line that are along the rect edges.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">10</span><span class="s0">, </span><span class="s2">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>

        <span class="s3"># Create a dict of edges and expected results.</span>
        <span class="s1">edge_dict = {</span>
            <span class="s3"># Left edge.</span>
            <span class="s1">(rect.bottomleft</span><span class="s0">, </span><span class="s1">rect.topleft): (</span>
                <span class="s1">(rect.bottomleft[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">rect.bottomleft[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">rect.topleft</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s3"># Top edge.</span>
            <span class="s1">(rect.topleft</span><span class="s0">, </span><span class="s1">rect.topright): (</span>
                <span class="s1">rect.topleft</span><span class="s0">,</span>
                <span class="s1">(rect.topright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.topright[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s3"># Right edge.</span>
            <span class="s1">(rect.topright</span><span class="s0">, </span><span class="s1">rect.bottomright): ()</span><span class="s0">,</span>
            <span class="s3"># Bottom edge.</span>
            <span class="s1">(rect.bottomright</span><span class="s0">, </span><span class="s1">rect.bottomleft): ()</span><span class="s0">,</span>
        <span class="s1">}</span>

        <span class="s0">for </span><span class="s1">edge</span><span class="s0">, </span><span class="s1">expected_line </span><span class="s0">in </span><span class="s1">edge_dict.items():</span>
            <span class="s1">clipped_line = rect.clipline(edge)</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

            <span class="s3"># Swap endpoints to test for symmetry.</span>
            <span class="s0">if </span><span class="s1">expected_line:</span>
                <span class="s1">expected_line = (expected_line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">expected_line[</span><span class="s2">0</span><span class="s1">])</span>

            <span class="s1">clipped_line = rect.clipline((edge[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">edge[</span><span class="s2">0</span><span class="s1">]))</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__equal_endpoints_with_overlap(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles lines with both endpoints the same. 
 
        Testing lines that overlap the rect. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">10</span><span class="s0">, </span><span class="s2">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>

        <span class="s3"># Test all the points in and on a rect.</span>
        <span class="s1">pts = (</span>
            <span class="s1">(x</span><span class="s0">, </span><span class="s1">y)</span>
            <span class="s0">for </span><span class="s1">x </span><span class="s0">in </span><span class="s1">range(rect.left</span><span class="s0">, </span><span class="s1">rect.right)</span>
            <span class="s0">for </span><span class="s1">y </span><span class="s0">in </span><span class="s1">range(rect.top</span><span class="s0">, </span><span class="s1">rect.bottom)</span>
        <span class="s1">)</span>

        <span class="s0">for </span><span class="s1">pt </span><span class="s0">in </span><span class="s1">pts:</span>
            <span class="s1">expected_line = (pt</span><span class="s0">, </span><span class="s1">pt)</span>

            <span class="s1">clipped_line = rect.clipline((pt</span><span class="s0">, </span><span class="s1">pt))</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__equal_endpoints_no_overlap(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles lines with both endpoints the same. 
 
        Testing lines that do not overlap the rect. 
        &quot;&quot;&quot;</span>
        <span class="s1">expected_line = ()</span>
        <span class="s1">rect = Rect((</span><span class="s2">10</span><span class="s0">, </span><span class="s2">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>

        <span class="s3"># Test points outside rect.</span>
        <span class="s0">for </span><span class="s1">pt </span><span class="s0">in </span><span class="s1">test_utils.rect_perimeter_pts(rect.inflate(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)):</span>
            <span class="s1">clipped_line = rect.clipline((pt</span><span class="s0">, </span><span class="s1">pt))</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__zero_size_rect(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles zero sized rects correctly.&quot;&quot;&quot;</span>
        <span class="s1">expected_line = ()</span>

        <span class="s0">for </span><span class="s1">size </span><span class="s0">in </span><span class="s1">((</span><span class="s2">0</span><span class="s0">, </span><span class="s2">15</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)):</span>
            <span class="s1">rect = Rect((</span><span class="s2">10</span><span class="s0">, </span><span class="s2">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">size)</span>

            <span class="s1">clipped_line = rect.clipline(rect.topleft</span><span class="s0">, </span><span class="s1">rect.topleft)</span>

            <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__negative_size_rect(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles negative sized rects correctly.&quot;&quot;&quot;</span>
        <span class="s1">expected_line = ()</span>

        <span class="s0">for </span><span class="s1">size </span><span class="s0">in </span><span class="s1">((-</span><span class="s2">15</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">15</span><span class="s0">, </span><span class="s1">-</span><span class="s2">20</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(-</span><span class="s2">15</span><span class="s0">, </span><span class="s1">-</span><span class="s2">20</span><span class="s1">)):</span>
            <span class="s1">rect = Rect((</span><span class="s2">10</span><span class="s0">, </span><span class="s2">25</span><span class="s1">)</span><span class="s0">, </span><span class="s1">size)</span>
            <span class="s1">norm_rect = rect.copy()</span>
            <span class="s1">norm_rect.normalize()</span>
            <span class="s3"># Use a bigger rect to help create test lines.</span>
            <span class="s1">big_rect = norm_rect.inflate(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>

            <span class="s3"># Create a dict of lines and expected results. Some line have both</span>
            <span class="s3"># endpoints outside the rect and some have one inside and one</span>
            <span class="s3"># outside.</span>
            <span class="s1">line_dict = {</span>
                <span class="s1">(big_rect.midleft</span><span class="s0">, </span><span class="s1">big_rect.midright): (</span>
                    <span class="s1">norm_rect.midleft</span><span class="s0">,</span>
                    <span class="s1">(norm_rect.midright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">norm_rect.midright[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">,</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">(big_rect.midtop</span><span class="s0">, </span><span class="s1">big_rect.midbottom): (</span>
                    <span class="s1">norm_rect.midtop</span><span class="s0">,</span>
                    <span class="s1">(norm_rect.midbottom[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">norm_rect.midbottom[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">(big_rect.midleft</span><span class="s0">, </span><span class="s1">norm_rect.center): (</span>
                    <span class="s1">norm_rect.midleft</span><span class="s0">,</span>
                    <span class="s1">norm_rect.center</span><span class="s0">,</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">(big_rect.midtop</span><span class="s0">, </span><span class="s1">norm_rect.center): (</span>
                    <span class="s1">norm_rect.midtop</span><span class="s0">,</span>
                    <span class="s1">norm_rect.center</span><span class="s0">,</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">(big_rect.midright</span><span class="s0">, </span><span class="s1">norm_rect.center): (</span>
                    <span class="s1">(norm_rect.midright[</span><span class="s2">0</span><span class="s1">] - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">norm_rect.midright[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">,</span>
                    <span class="s1">norm_rect.center</span><span class="s0">,</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">(big_rect.midbottom</span><span class="s0">, </span><span class="s1">norm_rect.center): (</span>
                    <span class="s1">(norm_rect.midbottom[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">norm_rect.midbottom[</span><span class="s2">1</span><span class="s1">] - </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                    <span class="s1">norm_rect.center</span><span class="s0">,</span>
                <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">}</span>

            <span class="s0">for </span><span class="s1">line</span><span class="s0">, </span><span class="s1">expected_line </span><span class="s0">in </span><span class="s1">line_dict.items():</span>
                <span class="s1">clipped_line = rect.clipline(line)</span>

                <span class="s3"># Make sure rect wasn't normalized.</span>
                <span class="s1">self.assertNotEqual(rect</span><span class="s0">, </span><span class="s1">norm_rect)</span>
                <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

                <span class="s3"># Swap endpoints to test for symmetry.</span>
                <span class="s1">expected_line = (expected_line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">expected_line[</span><span class="s2">0</span><span class="s1">])</span>

                <span class="s1">clipped_line = rect.clipline((line[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">line[</span><span class="s2">0</span><span class="s1">]))</span>

                <span class="s1">self.assertTupleEqual(clipped_line</span><span class="s0">, </span><span class="s1">expected_line)</span>

    <span class="s0">def </span><span class="s1">test_clipline__invalid_line(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures clipline handles invalid lines correctly.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect((</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s1">invalid_lines = (</span>
            <span class="s1">()</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">,</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">3</span><span class="s0">,</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">6</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s0">for </span><span class="s1">line </span><span class="s0">in </span><span class="s1">invalid_lines:</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">clipped_line = rect.clipline(line)</span>

            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">clipped_line = rect.clipline(*line)</span>

    <span class="s0">def </span><span class="s1">test_move(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">move_x = </span><span class="s2">10</span>
        <span class="s1">move_y = </span><span class="s2">20</span>
        <span class="s1">r2 = r.move(move_x</span><span class="s0">, </span><span class="s1">move_y)</span>
        <span class="s1">expected_r2 = Rect(r.left + move_x</span><span class="s0">, </span><span class="s1">r.top + move_y</span><span class="s0">, </span><span class="s1">r.width</span><span class="s0">, </span><span class="s1">r.height)</span>
        <span class="s1">self.assertEqual(expected_r2</span><span class="s0">, </span><span class="s1">r2)</span>

    <span class="s0">def </span><span class="s1">test_move_ip(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">r2 = Rect(r)</span>
        <span class="s1">move_x = </span><span class="s2">10</span>
        <span class="s1">move_y = </span><span class="s2">20</span>
        <span class="s1">r2.move_ip(move_x</span><span class="s0">, </span><span class="s1">move_y)</span>
        <span class="s1">expected_r2 = Rect(r.left + move_x</span><span class="s0">, </span><span class="s1">r.top + move_y</span><span class="s0">, </span><span class="s1">r.width</span><span class="s0">, </span><span class="s1">r.height)</span>
        <span class="s1">self.assertEqual(expected_r2</span><span class="s0">, </span><span class="s1">r2)</span>

    <span class="s0">def </span><span class="s1">test_update_XYWidthHeight(self):</span>
        <span class="s4">&quot;&quot;&quot;Test update with 4 int values(x, y, w, h)&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">rect.update(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.left)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">2</span><span class="s0">, </span><span class="s1">rect.top)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">3</span><span class="s0">, </span><span class="s1">rect.width)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">4</span><span class="s0">, </span><span class="s1">rect.height)</span>

    <span class="s0">def </span><span class="s1">test_update__TopLeftSize(self):</span>
        <span class="s4">&quot;&quot;&quot;Test update with 2 tuples((x, y), (w, h))&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">rect.update((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))</span>

        <span class="s1">self.assertEqual(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.left)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">2</span><span class="s0">, </span><span class="s1">rect.top)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">3</span><span class="s0">, </span><span class="s1">rect.width)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">4</span><span class="s0">, </span><span class="s1">rect.height)</span>

    <span class="s0">def </span><span class="s1">test_update__List(self):</span>
        <span class="s4">&quot;&quot;&quot;Test update with list&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">rect2 = [</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">]</span>
        <span class="s1">rect.update(rect2)</span>

        <span class="s1">self.assertEqual(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.left)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">2</span><span class="s0">, </span><span class="s1">rect.top)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">3</span><span class="s0">, </span><span class="s1">rect.width)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">4</span><span class="s0">, </span><span class="s1">rect.height)</span>

    <span class="s0">def </span><span class="s1">test_update__RectObject(self):</span>
        <span class="s4">&quot;&quot;&quot;Test update with other rect object&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">rect2 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">rect.update(rect2)</span>

        <span class="s1">self.assertEqual(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">rect.left)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">2</span><span class="s0">, </span><span class="s1">rect.top)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">3</span><span class="s0">, </span><span class="s1">rect.width)</span>
        <span class="s1">self.assertEqual(</span><span class="s2">4</span><span class="s0">, </span><span class="s1">rect.height)</span>

    <span class="s0">def </span><span class="s1">test_union(self):</span>
        <span class="s1">r1 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">r2 = Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r1.union(r2))</span>

    <span class="s0">def </span><span class="s1">test_union__with_identical_Rect(self):</span>
        <span class="s1">r1 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r1</span><span class="s0">, </span><span class="s1">r1.union(Rect(r1)))</span>

    <span class="s0">def </span><span class="s1">test_union_ip(self):</span>
        <span class="s1">r1 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">r2 = Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">r1.union_ip(r2)</span>
        <span class="s1">self.assertEqual(Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r1)</span>

    <span class="s0">def </span><span class="s1">test_unionall(self):</span>
        <span class="s1">r1 = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">r2 = Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">r3 = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s1">r4 = r1.unionall([r2</span><span class="s0">, </span><span class="s1">r3])</span>
        <span class="s1">self.assertEqual(Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r4)</span>

    <span class="s0">def </span><span class="s1">test_unionall__invalid_rect_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures unionall correctly handles invalid rect parameters.&quot;&quot;&quot;</span>
        <span class="s1">numbers = [</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1.2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3.3</span><span class="s1">]</span>
        <span class="s1">strs = [</span><span class="s5">&quot;a&quot;</span><span class="s0">, </span><span class="s5">&quot;b&quot;</span><span class="s0">, </span><span class="s5">&quot;c&quot;</span><span class="s1">]</span>
        <span class="s1">nones = [</span><span class="s0">None, None</span><span class="s1">]</span>

        <span class="s0">for </span><span class="s1">invalid_rects </span><span class="s0">in </span><span class="s1">(numbers</span><span class="s0">, </span><span class="s1">strs</span><span class="s0">, </span><span class="s1">nones):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">).unionall(invalid_rects)</span>

    <span class="s0">def </span><span class="s1">test_unionall_ip(self):</span>
        <span class="s1">r1 = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">r2 = Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">r3 = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s1">r1.unionall_ip([r2</span><span class="s0">, </span><span class="s1">r3])</span>
        <span class="s1">self.assertEqual(Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">r1)</span>

        <span class="s3"># Bug for an empty list. Would return a Rect instead of None.</span>
        <span class="s1">self.assertTrue(r1.unionall_ip([]) </span><span class="s0">is None</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_colliderect(self):</span>
        <span class="s1">r1 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(</span>
            <span class="s1">r1.colliderect(Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s5">&quot;r1 does not collide with Rect(0, 0, 2, 3)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r1.colliderect(Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span><span class="s0">, </span><span class="s5">&quot;r1 collides with Rect(0, 0, 1, 2)&quot;</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r1.colliderect(Rect(r1.right</span><span class="s0">, </span><span class="s1">r1.bottom</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s5">&quot;r1 collides with Rect(r1.right, r1.bottom, 2, 2)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertTrue(</span>
            <span class="s1">r1.colliderect(Rect(r1.left + </span><span class="s2">1</span><span class="s0">, </span><span class="s1">r1.top + </span><span class="s2">1</span><span class="s0">, </span><span class="s1">r1.width - </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r1.height - </span><span class="s2">2</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s5">&quot;r1 does not collide with Rect(r1.left + 1, r1.top + 1, &quot;</span>
            <span class="s1">+ </span><span class="s5">&quot;r1.width - 2, r1.height - 2)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertTrue(</span>
            <span class="s1">r1.colliderect(Rect(r1.left - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">r1.top - </span><span class="s2">1</span><span class="s0">, </span><span class="s1">r1.width + </span><span class="s2">2</span><span class="s0">, </span><span class="s1">r1.height + </span><span class="s2">2</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s5">&quot;r1 does not collide with Rect(r1.left - 1, r1.top - 1, &quot;</span>
            <span class="s1">+ </span><span class="s5">&quot;r1.width + 2, r1.height + 2)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertTrue(</span>
            <span class="s1">r1.colliderect(Rect(r1))</span><span class="s0">, </span><span class="s5">&quot;r1 does not collide with an identical rect&quot;</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r1.colliderect(Rect(r1.right</span><span class="s0">, </span><span class="s1">r1.bottom</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s5">&quot;r1 collides with Rect(r1.right, r1.bottom, 0, 0)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertFalse(</span>
            <span class="s1">r1.colliderect(Rect(r1.right</span><span class="s0">, </span><span class="s1">r1.bottom</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s5">&quot;r1 collides with Rect(r1.right, r1.bottom, 1, 1)&quot;</span><span class="s0">,</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testEquals(self):</span>
        <span class="s4">&quot;&quot;&quot;check to see how the rect uses __eq__&quot;&quot;&quot;</span>
        <span class="s1">r1 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">r2 = Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span>
        <span class="s1">r3 = (</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span>
        <span class="s1">r4 = Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span>

        <span class="s0">class </span><span class="s1">foo(Rect):</span>
            <span class="s0">def </span><span class="s1">__eq__(self</span><span class="s0">, </span><span class="s1">other):</span>
                <span class="s0">return </span><span class="s1">id(self) == id(other)</span>

            <span class="s0">def </span><span class="s1">__ne__(self</span><span class="s0">, </span><span class="s1">other):</span>
                <span class="s0">return </span><span class="s1">id(self) != id(other)</span>

        <span class="s0">class </span><span class="s1">foo2(Rect):</span>
            <span class="s0">pass</span>

        <span class="s1">r5 = foo(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span>
        <span class="s1">r6 = foo2(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span>

        <span class="s1">self.assertNotEqual(r5</span><span class="s0">, </span><span class="s1">r2)</span>

        <span class="s3"># because we define equality differently for this subclass.</span>
        <span class="s1">self.assertEqual(r6</span><span class="s0">, </span><span class="s1">r2)</span>

        <span class="s1">rect_list = [r1</span><span class="s0">, </span><span class="s1">r2</span><span class="s0">, </span><span class="s1">r3</span><span class="s0">, </span><span class="s1">r4</span><span class="s0">, </span><span class="s1">r6]</span>

        <span class="s3"># see if we can remove 4 of these.</span>
        <span class="s1">rect_list.remove(r2)</span>
        <span class="s1">rect_list.remove(r2)</span>
        <span class="s1">rect_list.remove(r2)</span>
        <span class="s1">rect_list.remove(r2)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">rect_list.remove</span><span class="s0">, </span><span class="s1">r2)</span>

    <span class="s0">def </span><span class="s1">test_collidedict(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict detects collisions.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">collide_item1 = (</span><span class="s5">&quot;collide 1&quot;</span><span class="s0">, </span><span class="s1">rect.copy())</span>
        <span class="s1">collide_item2 = (</span><span class="s5">&quot;collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">60</span><span class="s0">, </span><span class="s2">60</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">70</span><span class="s0">, </span><span class="s2">70</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict(</span>
            <span class="s1">(collide_item1</span><span class="s0">, </span><span class="s1">collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2)</span>
        <span class="s1">)</span>
        <span class="s1">value_collide_items = (collide_item1</span><span class="s0">, </span><span class="s1">collide_item2)</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>
        <span class="s1">key_collide_items = tuple((tuple(v)</span><span class="s0">, </span><span class="s1">k) </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">value_collide_items)</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s0">if </span><span class="s1">use_values:</span>
                <span class="s1">expected_items = value_collide_items</span>
                <span class="s1">d = rect_values</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">expected_items = key_collide_items</span>
                <span class="s1">d = rect_keys</span>

            <span class="s1">collide_item = rect.collidedict(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s3"># The detected collision could be any of the possible items.</span>
            <span class="s1">self.assertIn(collide_item</span><span class="s0">, </span><span class="s1">expected_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__no_collision(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict returns None when no collisions.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">60</span><span class="s0">, </span><span class="s2">60</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item3 = (</span><span class="s5">&quot;no collide 3&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">70</span><span class="s0">, </span><span class="s2">70</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict((no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item3))</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s1">d = rect_values </span><span class="s0">if </span><span class="s1">use_values </span><span class="s0">else </span><span class="s1">rect_keys</span>

            <span class="s1">collide_item = rect.collidedict(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s1">self.assertIsNone(collide_item)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__barely_touching(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict works correctly for rects that barely touch.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s3"># Small rect to test barely touching collisions.</span>
        <span class="s1">collide_rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s1">collide_item1 = (</span><span class="s5">&quot;collide 1&quot;</span><span class="s0">, </span><span class="s1">collide_rect)</span>
        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">60</span><span class="s0">, </span><span class="s2">60</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item3 = (</span><span class="s5">&quot;no collide 3&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">70</span><span class="s0">, </span><span class="s2">70</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">no_collide_rect_values = dict(</span>
            <span class="s1">(no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item3)</span>
        <span class="s1">)</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">no_collide_rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">no_collide_rect_values.items()}</span>

        <span class="s3"># Tests the collide_rect on each of the rect's corners.</span>
        <span class="s0">for </span><span class="s1">attr </span><span class="s0">in </span><span class="s1">(</span><span class="s5">&quot;topleft&quot;</span><span class="s0">, </span><span class="s5">&quot;topright&quot;</span><span class="s0">, </span><span class="s5">&quot;bottomright&quot;</span><span class="s0">, </span><span class="s5">&quot;bottomleft&quot;</span><span class="s1">):</span>
            <span class="s1">setattr(collide_rect</span><span class="s0">, </span><span class="s1">attr</span><span class="s0">, </span><span class="s1">getattr(rect</span><span class="s0">, </span><span class="s1">attr))</span>

            <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
                <span class="s0">if </span><span class="s1">use_values:</span>
                    <span class="s1">expected_item = collide_item1</span>
                    <span class="s1">d = dict(no_collide_rect_values)</span>
                <span class="s0">else</span><span class="s1">:</span>
                    <span class="s1">expected_item = (tuple(collide_item1[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">, </span><span class="s1">collide_item1[</span><span class="s2">0</span><span class="s1">])</span>
                    <span class="s1">d = dict(no_collide_rect_keys)</span>

                <span class="s1">d.update((expected_item</span><span class="s0">,</span><span class="s1">))  </span><span class="s3"># Add in the expected item.</span>

                <span class="s1">collide_item = rect.collidedict(d</span><span class="s0">, </span><span class="s1">use_values)</span>

                <span class="s1">self.assertTupleEqual(collide_item</span><span class="s0">, </span><span class="s1">expected_item)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__zero_sized_rects(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict works correctly with zero sized rects. 
 
        There should be no collisions with zero sized rects. 
        &quot;&quot;&quot;</span>
        <span class="s1">zero_rect1 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">zero_rect2 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">zero_rect3 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">zero_rect4 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">zero_rect5 = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s1">)</span>

        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">zero_rect1.copy())</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">zero_rect2.copy())</span>
        <span class="s1">no_collide_item3 = (</span><span class="s5">&quot;no collide 3&quot;</span><span class="s0">, </span><span class="s1">zero_rect3.copy())</span>
        <span class="s1">no_collide_item4 = (</span><span class="s5">&quot;no collide 4&quot;</span><span class="s0">, </span><span class="s1">zero_rect4.copy())</span>
        <span class="s1">no_collide_item5 = (</span><span class="s5">&quot;no collide 5&quot;</span><span class="s0">, </span><span class="s1">zero_rect5.copy())</span>
        <span class="s1">no_collide_item6 = (</span><span class="s5">&quot;no collide 6&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item7 = (</span><span class="s5">&quot;no collide 7&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict(</span>
            <span class="s1">(</span>
                <span class="s1">no_collide_item1</span><span class="s0">,</span>
                <span class="s1">no_collide_item2</span><span class="s0">,</span>
                <span class="s1">no_collide_item3</span><span class="s0">,</span>
                <span class="s1">no_collide_item4</span><span class="s0">,</span>
                <span class="s1">no_collide_item5</span><span class="s0">,</span>
                <span class="s1">no_collide_item6</span><span class="s0">,</span>
                <span class="s1">no_collide_item7</span><span class="s0">,</span>
            <span class="s1">)</span>
        <span class="s1">)</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s1">d = rect_values </span><span class="s0">if </span><span class="s1">use_values </span><span class="s0">else </span><span class="s1">rect_keys</span>

            <span class="s0">for </span><span class="s1">zero_rect </span><span class="s0">in </span><span class="s1">(</span>
                <span class="s1">zero_rect1</span><span class="s0">,</span>
                <span class="s1">zero_rect2</span><span class="s0">,</span>
                <span class="s1">zero_rect3</span><span class="s0">,</span>
                <span class="s1">zero_rect4</span><span class="s0">,</span>
                <span class="s1">zero_rect5</span><span class="s0">,</span>
            <span class="s1">):</span>
                <span class="s1">collide_item = zero_rect.collidedict(d</span><span class="s0">, </span><span class="s1">use_values)</span>

                <span class="s1">self.assertIsNone(collide_item)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__zero_sized_rects_as_args(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict works correctly with zero sized rects as args. 
 
        There should be no collisions with zero sized rects. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span>
        <span class="s1">no_collide_item3 = (</span><span class="s5">&quot;no collide 3&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict((no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item3))</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s1">d = rect_values </span><span class="s0">if </span><span class="s1">use_values </span><span class="s0">else </span><span class="s1">rect_keys</span>

            <span class="s1">collide_item = rect.collidedict(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s1">self.assertIsNone(collide_item)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__negative_sized_rects(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict works correctly with negative sized rects.&quot;&quot;&quot;</span>
        <span class="s1">neg_rect = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s1">)</span>

        <span class="s1">collide_item1 = (</span><span class="s5">&quot;collide 1&quot;</span><span class="s0">, </span><span class="s1">neg_rect.copy())</span>
        <span class="s1">collide_item2 = (</span><span class="s5">&quot;collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict((collide_item1</span><span class="s0">, </span><span class="s1">collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item1))</span>
        <span class="s1">value_collide_items = (collide_item1</span><span class="s0">, </span><span class="s1">collide_item2)</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>
        <span class="s1">key_collide_items = tuple((tuple(v)</span><span class="s0">, </span><span class="s1">k) </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">value_collide_items)</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s0">if </span><span class="s1">use_values:</span>
                <span class="s1">collide_items = value_collide_items</span>
                <span class="s1">d = rect_values</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">collide_items = key_collide_items</span>
                <span class="s1">d = rect_keys</span>

            <span class="s1">collide_item = neg_rect.collidedict(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s3"># The detected collision could be any of the possible items.</span>
            <span class="s1">self.assertIn(collide_item</span><span class="s0">, </span><span class="s1">collide_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__negative_sized_rects_as_args(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict works correctly with negative sized rect args.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">collide_item1 = (</span><span class="s5">&quot;collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s1">))</span>
        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict((collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2))</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s0">if </span><span class="s1">use_values:</span>
                <span class="s1">expected_item = collide_item1</span>
                <span class="s1">d = rect_values</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">expected_item = (tuple(collide_item1[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">, </span><span class="s1">collide_item1[</span><span class="s2">0</span><span class="s1">])</span>
                <span class="s1">d = rect_keys</span>

            <span class="s1">collide_item = rect.collidedict(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s1">self.assertTupleEqual(collide_item</span><span class="s0">, </span><span class="s1">expected_item)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__invalid_dict_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict correctly handles invalid dict parameters.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">invalid_value_dict = (</span><span class="s5">&quot;collide&quot;</span><span class="s0">, </span><span class="s1">rect.copy())</span>
        <span class="s1">invalid_key_dict = tuple(invalid_value_dict[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">, </span><span class="s1">invalid_value_dict[</span><span class="s2">0</span><span class="s1">]</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s1">d = invalid_value_dict </span><span class="s0">if </span><span class="s1">use_values </span><span class="s0">else </span><span class="s1">invalid_key_dict</span>

            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">collide_item = rect.collidedict(d</span><span class="s0">, </span><span class="s1">use_values)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__invalid_dict_value_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict correctly handles dicts with invalid values.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">rect_keys = {tuple(rect): </span><span class="s5">&quot;collide&quot;</span><span class="s1">}</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
            <span class="s1">collide_item = rect.collidedict(rect_keys</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__invalid_dict_key_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict correctly handles dicts with invalid keys.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">rect_values = {</span><span class="s5">&quot;collide&quot;</span><span class="s1">: rect.copy()}</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
            <span class="s1">collide_item = rect.collidedict(rect_values)</span>

    <span class="s0">def </span><span class="s1">test_collidedict__invalid_use_values_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedict correctly handles invalid use_values parameters.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">d = {}</span>

        <span class="s0">for </span><span class="s1">invalid_param </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">d</span><span class="s0">, </span><span class="s2">1.1</span><span class="s1">):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">collide_item = rect.collidedict(d</span><span class="s0">, </span><span class="s1">invalid_param)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall detects collisions.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">collide_item1 = (</span><span class="s5">&quot;collide 1&quot;</span><span class="s0">, </span><span class="s1">rect.copy())</span>
        <span class="s1">collide_item2 = (</span><span class="s5">&quot;collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">60</span><span class="s0">, </span><span class="s2">60</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">70</span><span class="s0">, </span><span class="s2">70</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict(</span>
            <span class="s1">(collide_item1</span><span class="s0">, </span><span class="s1">collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2)</span>
        <span class="s1">)</span>
        <span class="s1">value_collide_items = [collide_item1</span><span class="s0">, </span><span class="s1">collide_item2]</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>
        <span class="s1">key_collide_items = [(tuple(v)</span><span class="s0">, </span><span class="s1">k) </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">value_collide_items]</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s0">if </span><span class="s1">use_values:</span>
                <span class="s1">expected_items = value_collide_items</span>
                <span class="s1">d = rect_values</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">expected_items = key_collide_items</span>
                <span class="s1">d = rect_keys</span>

            <span class="s1">collide_items = rect.collidedictall(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s1">self._assertCountEqual(collide_items</span><span class="s0">, </span><span class="s1">expected_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__no_collision(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall returns an empty list when no collisions.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">60</span><span class="s0">, </span><span class="s2">60</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s1">no_collide_item3 = (</span><span class="s5">&quot;no collide 3&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">70</span><span class="s0">, </span><span class="s2">70</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict((no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item3))</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>

        <span class="s1">expected_items = []</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s1">d = rect_values </span><span class="s0">if </span><span class="s1">use_values </span><span class="s0">else </span><span class="s1">rect_keys</span>

            <span class="s1">collide_items = rect.collidedictall(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s1">self._assertCountEqual(collide_items</span><span class="s0">, </span><span class="s1">expected_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__barely_touching(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall works correctly for rects that barely touch.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s3"># Small rect to test barely touching collisions.</span>
        <span class="s1">collide_rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s1">collide_item1 = (</span><span class="s5">&quot;collide 1&quot;</span><span class="s0">, </span><span class="s1">collide_rect)</span>
        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">60</span><span class="s0">, </span><span class="s2">60</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s1">no_collide_item3 = (</span><span class="s5">&quot;no collide 3&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">70</span><span class="s0">, </span><span class="s2">70</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">no_collide_rect_values = dict(</span>
            <span class="s1">(no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item3)</span>
        <span class="s1">)</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">no_collide_rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">no_collide_rect_values.items()}</span>

        <span class="s3"># Tests the collide_rect on each of the rect's corners.</span>
        <span class="s0">for </span><span class="s1">attr </span><span class="s0">in </span><span class="s1">(</span><span class="s5">&quot;topleft&quot;</span><span class="s0">, </span><span class="s5">&quot;topright&quot;</span><span class="s0">, </span><span class="s5">&quot;bottomright&quot;</span><span class="s0">, </span><span class="s5">&quot;bottomleft&quot;</span><span class="s1">):</span>
            <span class="s1">setattr(collide_rect</span><span class="s0">, </span><span class="s1">attr</span><span class="s0">, </span><span class="s1">getattr(rect</span><span class="s0">, </span><span class="s1">attr))</span>

            <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
                <span class="s0">if </span><span class="s1">use_values:</span>
                    <span class="s1">expected_items = [collide_item1]</span>
                    <span class="s1">d = dict(no_collide_rect_values)</span>
                <span class="s0">else</span><span class="s1">:</span>
                    <span class="s1">expected_items = [(tuple(collide_item1[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">, </span><span class="s1">collide_item1[</span><span class="s2">0</span><span class="s1">])]</span>
                    <span class="s1">d = dict(no_collide_rect_keys)</span>

                <span class="s1">d.update(expected_items)  </span><span class="s3"># Add in the expected items.</span>

                <span class="s1">collide_items = rect.collidedictall(d</span><span class="s0">, </span><span class="s1">use_values)</span>

                <span class="s1">self._assertCountEqual(collide_items</span><span class="s0">, </span><span class="s1">expected_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__zero_sized_rects(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall works correctly with zero sized rects. 
 
        There should be no collisions with zero sized rects. 
        &quot;&quot;&quot;</span>
        <span class="s1">zero_rect1 = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">zero_rect2 = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">zero_rect3 = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">zero_rect4 = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">zero_rect5 = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s1">)</span>

        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">zero_rect1.copy())</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">zero_rect2.copy())</span>
        <span class="s1">no_collide_item3 = (</span><span class="s5">&quot;no collide 3&quot;</span><span class="s0">, </span><span class="s1">zero_rect3.copy())</span>
        <span class="s1">no_collide_item4 = (</span><span class="s5">&quot;no collide 4&quot;</span><span class="s0">, </span><span class="s1">zero_rect4.copy())</span>
        <span class="s1">no_collide_item5 = (</span><span class="s5">&quot;no collide 5&quot;</span><span class="s0">, </span><span class="s1">zero_rect5.copy())</span>
        <span class="s1">no_collide_item6 = (</span><span class="s5">&quot;no collide 6&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">no_collide_item7 = (</span><span class="s5">&quot;no collide 7&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict(</span>
            <span class="s1">(</span>
                <span class="s1">no_collide_item1</span><span class="s0">,</span>
                <span class="s1">no_collide_item2</span><span class="s0">,</span>
                <span class="s1">no_collide_item3</span><span class="s0">,</span>
                <span class="s1">no_collide_item4</span><span class="s0">,</span>
                <span class="s1">no_collide_item5</span><span class="s0">,</span>
                <span class="s1">no_collide_item6</span><span class="s0">,</span>
                <span class="s1">no_collide_item7</span><span class="s0">,</span>
            <span class="s1">)</span>
        <span class="s1">)</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>

        <span class="s1">expected_items = []</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s1">d = rect_values </span><span class="s0">if </span><span class="s1">use_values </span><span class="s0">else </span><span class="s1">rect_keys</span>

            <span class="s0">for </span><span class="s1">zero_rect </span><span class="s0">in </span><span class="s1">(</span>
                <span class="s1">zero_rect1</span><span class="s0">,</span>
                <span class="s1">zero_rect2</span><span class="s0">,</span>
                <span class="s1">zero_rect3</span><span class="s0">,</span>
                <span class="s1">zero_rect4</span><span class="s0">,</span>
                <span class="s1">zero_rect5</span><span class="s0">,</span>
            <span class="s1">):</span>
                <span class="s1">collide_items = zero_rect.collidedictall(d</span><span class="s0">, </span><span class="s1">use_values)</span>

                <span class="s1">self._assertCountEqual(collide_items</span><span class="s0">, </span><span class="s1">expected_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__zero_sized_rects_as_args(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall works correctly with zero sized rects 
        as args. 
 
        There should be no collisions with zero sized rects. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span>

        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span>
        <span class="s1">no_collide_item3 = (</span><span class="s5">&quot;no collide 3&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict((no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item3))</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>

        <span class="s1">expected_items = []</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s1">d = rect_values </span><span class="s0">if </span><span class="s1">use_values </span><span class="s0">else </span><span class="s1">rect_keys</span>

            <span class="s1">collide_items = rect.collidedictall(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s1">self._assertCountEqual(collide_items</span><span class="s0">, </span><span class="s1">expected_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__negative_sized_rects(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall works correctly with negative sized rects.&quot;&quot;&quot;</span>
        <span class="s1">neg_rect = Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s1">)</span>

        <span class="s1">collide_item1 = (</span><span class="s5">&quot;collide 1&quot;</span><span class="s0">, </span><span class="s1">neg_rect.copy())</span>
        <span class="s1">collide_item2 = (</span><span class="s5">&quot;collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>
        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict((collide_item1</span><span class="s0">, </span><span class="s1">collide_item2</span><span class="s0">, </span><span class="s1">no_collide_item1))</span>
        <span class="s1">value_collide_items = [collide_item1</span><span class="s0">, </span><span class="s1">collide_item2]</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>
        <span class="s1">key_collide_items = [(tuple(v)</span><span class="s0">, </span><span class="s1">k) </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">value_collide_items]</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s0">if </span><span class="s1">use_values:</span>
                <span class="s1">expected_items = value_collide_items</span>
                <span class="s1">d = rect_values</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">expected_items = key_collide_items</span>
                <span class="s1">d = rect_keys</span>

            <span class="s1">collide_items = neg_rect.collidedictall(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s1">self._assertCountEqual(collide_items</span><span class="s0">, </span><span class="s1">expected_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__negative_sized_rects_as_args(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall works correctly with negative sized rect 
        args. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">collide_item1 = (</span><span class="s5">&quot;collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s1">))</span>
        <span class="s1">no_collide_item1 = (</span><span class="s5">&quot;no collide 1&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s1">))</span>
        <span class="s1">no_collide_item2 = (</span><span class="s5">&quot;no collide 2&quot;</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s1">))</span>

        <span class="s3"># Dict to check collisions with values.</span>
        <span class="s1">rect_values = dict((collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item1</span><span class="s0">, </span><span class="s1">no_collide_item2))</span>
        <span class="s1">value_collide_items = [collide_item1]</span>

        <span class="s3"># Dict to check collisions with keys.</span>
        <span class="s1">rect_keys = {tuple(v): k </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">rect_values.items()}</span>
        <span class="s1">key_collide_items = [(tuple(v)</span><span class="s0">, </span><span class="s1">k) </span><span class="s0">for </span><span class="s1">k</span><span class="s0">, </span><span class="s1">v </span><span class="s0">in </span><span class="s1">value_collide_items]</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s0">if </span><span class="s1">use_values:</span>
                <span class="s1">expected_items = value_collide_items</span>
                <span class="s1">d = rect_values</span>
            <span class="s0">else</span><span class="s1">:</span>
                <span class="s1">expected_items = key_collide_items</span>
                <span class="s1">d = rect_keys</span>

            <span class="s1">collide_items = rect.collidedictall(d</span><span class="s0">, </span><span class="s1">use_values)</span>

            <span class="s1">self._assertCountEqual(collide_items</span><span class="s0">, </span><span class="s1">expected_items)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__invalid_dict_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall correctly handles invalid dict parameters.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">invalid_value_dict = (</span><span class="s5">&quot;collide&quot;</span><span class="s0">, </span><span class="s1">rect.copy())</span>
        <span class="s1">invalid_key_dict = tuple(invalid_value_dict[</span><span class="s2">1</span><span class="s1">])</span><span class="s0">, </span><span class="s1">invalid_value_dict[</span><span class="s2">0</span><span class="s1">]</span>

        <span class="s0">for </span><span class="s1">use_values </span><span class="s0">in </span><span class="s1">(</span><span class="s0">True, False</span><span class="s1">):</span>
            <span class="s1">d = invalid_value_dict </span><span class="s0">if </span><span class="s1">use_values </span><span class="s0">else </span><span class="s1">invalid_key_dict</span>

            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">collide_item = rect.collidedictall(d</span><span class="s0">, </span><span class="s1">use_values)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__invalid_dict_value_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall correctly handles dicts with invalid values.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">rect_keys = {tuple(rect): </span><span class="s5">&quot;collide&quot;</span><span class="s1">}</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
            <span class="s1">collide_items = rect.collidedictall(rect_keys</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__invalid_dict_key_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall correctly handles dicts with invalid keys.&quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">rect_values = {</span><span class="s5">&quot;collide&quot;</span><span class="s1">: rect.copy()}</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
            <span class="s1">collide_items = rect.collidedictall(rect_values)</span>

    <span class="s0">def </span><span class="s1">test_collidedictall__invalid_use_values_format(self):</span>
        <span class="s4">&quot;&quot;&quot;Ensures collidedictall correctly handles invalid use_values 
        parameters. 
        &quot;&quot;&quot;</span>
        <span class="s1">rect = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">d = {}</span>

        <span class="s0">for </span><span class="s1">invalid_param </span><span class="s0">in </span><span class="s1">(</span><span class="s0">None, </span><span class="s1">d</span><span class="s0">, </span><span class="s2">1.1</span><span class="s1">):</span>
            <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
                <span class="s1">collide_items = rect.collidedictall(d</span><span class="s0">, </span><span class="s1">invalid_param)</span>

    <span class="s0">def </span><span class="s1">test_collidelist(self):</span>

        <span class="s3"># __doc__ (as of 2008-08-02) for pygame.rect.Rect.collidelist:</span>

        <span class="s3"># Rect.collidelist(list): return index</span>
        <span class="s3"># test if one rectangle in a list intersects</span>
        <span class="s3">#</span>
        <span class="s3"># Test whether the rectangle collides with any in a sequence of</span>
        <span class="s3"># rectangles. The index of the first collision found is returned. If</span>
        <span class="s3"># no collisions are found an index of -1 is returned.</span>

        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">l = [Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)]</span>

        <span class="s1">self.assertEqual(r.collidelist(l)</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>

        <span class="s1">f = [Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)]</span>
        <span class="s1">self.assertEqual(r.collidelist(f)</span><span class="s0">, </span><span class="s1">-</span><span class="s2">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_collidelistall(self):</span>

        <span class="s3"># __doc__ (as of 2008-08-02) for pygame.rect.Rect.collidelistall:</span>

        <span class="s3"># Rect.collidelistall(list): return indices</span>
        <span class="s3"># test if all rectangles in a list intersect</span>
        <span class="s3">#</span>
        <span class="s3"># Returns a list of all the indices that contain rectangles that</span>
        <span class="s3"># collide with the Rect. If no intersecting rectangles are found, an</span>
        <span class="s3"># empty list is returned.</span>

        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>

        <span class="s1">f = [Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)]</span>
        <span class="s1">self.assertFalse(r.collidelistall(f))</span>

    <span class="s0">def </span><span class="s1">test_collidelistall_returns_empty_list(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">Rect(</span><span class="s2">112</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">Rect(-</span><span class="s2">20</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[])</span>

    <span class="s0">def </span><span class="s1">test_collidelistall_list_of_tuples(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>

        <span class="s1">f = [(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)]</span>
        <span class="s1">self.assertFalse(r.collidelistall(f))</span>

    <span class="s0">def </span><span class="s1">test_collidelistall_list_of_two_tuples(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>

        <span class="s1">f = [((</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">, </span><span class="s1">((</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))]</span>
        <span class="s1">self.assertFalse(r.collidelistall(f))</span>

    <span class="s0">def </span><span class="s1">test_collidelistall_list_of_lists(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>

        <span class="s1">f = [[</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">]]</span>
        <span class="s1">self.assertFalse(r.collidelistall(f))</span>

    <span class="s0">class </span><span class="s1">_ObjectWithRectAttribute:</span>
        <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">r):</span>
            <span class="s1">self.rect = r</span>

    <span class="s0">class </span><span class="s1">_ObjectWithCallableRectAttribute:</span>
        <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">r):</span>
            <span class="s1">self._rect = r</span>

        <span class="s0">def </span><span class="s1">rect(self):</span>
            <span class="s0">return </span><span class="s1">self._rect</span>

    <span class="s0">class </span><span class="s1">_ObjectWithRectProperty:</span>
        <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">r):</span>
            <span class="s1">self._rect = r</span>

        <span class="s1">@property</span>
        <span class="s0">def </span><span class="s1">rect(self):</span>
            <span class="s0">return </span><span class="s1">self._rect</span>

    <span class="s0">class </span><span class="s1">_ObjectWithMultipleRectAttribute:</span>
        <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">r1</span><span class="s0">, </span><span class="s1">r2</span><span class="s0">, </span><span class="s1">r3):</span>
            <span class="s1">self.rect1 = r1</span>
            <span class="s1">self.rect2 = r2</span>
            <span class="s1">self.rect3 = r3</span>

    <span class="s0">def </span><span class="s1">test_collidelistall_list_of_object_with_rect_attribute(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>

        <span class="s1">f = [</span>
            <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertFalse(r.collidelistall(f))</span>

    <span class="s0">def </span><span class="s1">test_collidelistall_list_of_object_with_callable_rect_attribute(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>

        <span class="s1">f = [</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertFalse(r.collidelistall(f))</span>

    <span class="s0">def </span><span class="s1">test_collidelistall_list_of_object_with_callable_rect_returning_object_with_rect_attribute(</span>
        <span class="s1">self</span><span class="s0">,</span>
    <span class="s1">):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>

        <span class="s1">f = [</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertFalse(r.collidelistall(f))</span>

    <span class="s0">def </span><span class="s1">test_collidelistall_list_of_object_with_rect_property(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">l = [</span>
            <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collidelistall(l)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>

        <span class="s1">f = [</span>
            <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertFalse(r.collidelistall(f))</span>

    <span class="s0">def </span><span class="s1">test_collideobjects_call_variants(self):</span>
        <span class="s3"># arrange</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">rects = [Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)]</span>
        <span class="s1">objects = [</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">200</span><span class="s0">, </span><span class="s2">300</span><span class="s0">, </span><span class="s2">400</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">200</span><span class="s0">, </span><span class="s2">300</span><span class="s0">, </span><span class="s2">400</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>

        <span class="s3"># act / verify</span>
        <span class="s1">r.collideobjects(rects)</span>
        <span class="s1">r.collideobjects(rects</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">None</span><span class="s1">)</span>
        <span class="s1">r.collideobjects(objects</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect1)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">r.collideobjects</span><span class="s0">, </span><span class="s1">objects)</span>

    <span class="s0">def </span><span class="s1">test_collideobjects_without_key(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">types_to_test = [</span>
            <span class="s1">[Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)]</span><span class="s0">,</span>
            <span class="s1">[((</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">, </span><span class="s1">((</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">, </span><span class="s1">((</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))]</span><span class="s0">,</span>
            <span class="s1">[[</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,  </span><span class="s3"># mix</span>
        <span class="s1">]</span>

        <span class="s0">for </span><span class="s1">l </span><span class="s0">in </span><span class="s1">types_to_test:</span>
            <span class="s0">with </span><span class="s1">self.subTest(type=l[</span><span class="s2">0</span><span class="s1">].__class__.__name__):</span>
                <span class="s3"># act</span>
                <span class="s1">actual = r.collideobjects(l)</span>
                <span class="s3"># assert</span>
                <span class="s1">self.assertEqual(actual</span><span class="s0">, </span><span class="s1">l[</span><span class="s2">1</span><span class="s1">])</span>

        <span class="s1">types_to_test = [</span>
            <span class="s1">[Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)]</span><span class="s0">,</span>
            <span class="s1">[((</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">, </span><span class="s1">((</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))]</span><span class="s0">,</span>
            <span class="s1">[[</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">]]</span><span class="s0">,</span>
            <span class="s1">[Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">[</span><span class="s2">100</span><span class="s0">, </span><span class="s2">100</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">4</span><span class="s1">]]</span><span class="s0">,  </span><span class="s3"># mix</span>
        <span class="s1">]</span>

        <span class="s0">for </span><span class="s1">f </span><span class="s0">in </span><span class="s1">types_to_test:</span>
            <span class="s0">with </span><span class="s1">self.subTest(type=f[</span><span class="s2">0</span><span class="s1">].__class__.__name__</span><span class="s0">, </span><span class="s1">expected=</span><span class="s0">None</span><span class="s1">):</span>
                <span class="s3"># act</span>
                <span class="s1">actual = r.collideobjects(f)</span>
                <span class="s3"># assert</span>
                <span class="s1">self.assertEqual(actual</span><span class="s0">, None</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_collideobjects_list_of_object_with_multiple_rect_attribute(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">things = [</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(-</span><span class="s2">73</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(-</span><span class="s2">5</span><span class="s0">, </span><span class="s1">-</span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">83</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">81</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">8</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(r.collideobjects(things</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect1)</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r.collideobjects(things</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect2)</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r.collideobjects(things</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect3)</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">1</span><span class="s1">])</span>

        <span class="s1">f = [</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">11</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">32</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">11</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(-</span><span class="s2">20</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertFalse(r.collideobjectsall(f</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect1))</span>
        <span class="s1">self.assertFalse(r.collideobjectsall(f</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect2))</span>
        <span class="s1">self.assertFalse(r.collideobjectsall(f</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect3))</span>

    <span class="s0">def </span><span class="s1">test_collideobjectsall_call_variants(self):</span>
        <span class="s3"># arrange</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>
        <span class="s1">rects = [Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)]</span>
        <span class="s1">objects = [</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">200</span><span class="s0">, </span><span class="s2">300</span><span class="s0">, </span><span class="s2">400</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">40</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">200</span><span class="s0">, </span><span class="s2">300</span><span class="s0">, </span><span class="s2">400</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>

        <span class="s3"># act / verify</span>
        <span class="s1">r.collideobjectsall(rects)</span>
        <span class="s1">r.collideobjectsall(rects</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">None</span><span class="s1">)</span>
        <span class="s1">r.collideobjectsall(objects</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect1)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">r.collideobjectsall</span><span class="s0">, </span><span class="s1">objects)</span>

    <span class="s0">def </span><span class="s1">test_collideobjectsall(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">types_to_test = [</span>
            <span class="s1">[</span>
                <span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
                <span class="s1">(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">((</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">((</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">((</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">((</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">]</span><span class="s0">,</span>
                <span class="s1">[</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">]</span><span class="s0">,</span>
                <span class="s1">[</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]</span><span class="s0">,</span>
                <span class="s1">[</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(</span>
                    <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span>
                <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">things </span><span class="s0">in </span><span class="s1">types_to_test:</span>
            <span class="s0">with </span><span class="s1">self.subTest(type=things[</span><span class="s2">0</span><span class="s1">].__class__.__name__):</span>
                <span class="s3"># act</span>
                <span class="s1">actual = r.collideobjectsall(things</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">None</span><span class="s1">)</span>
                <span class="s3"># assert</span>
                <span class="s1">self.assertEqual(actual</span><span class="s0">, </span><span class="s1">[things[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">3</span><span class="s1">]])</span>

        <span class="s1">types_to_test = [</span>
            <span class="s1">[Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)]</span><span class="s0">,</span>
            <span class="s1">[(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)]</span><span class="s0">,</span>
            <span class="s1">[((</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">, </span><span class="s1">((</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))]</span><span class="s0">,</span>
            <span class="s1">[[</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">]]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectAttribute(Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithCallableRectAttribute(Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">))</span><span class="s0">,</span>
                <span class="s1">self._ObjectWithRectProperty(Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">))</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s0">for </span><span class="s1">f </span><span class="s0">in </span><span class="s1">types_to_test:</span>
            <span class="s0">with </span><span class="s1">self.subTest(type=f[</span><span class="s2">0</span><span class="s1">].__class__.__name__</span><span class="s0">, </span><span class="s1">expected=</span><span class="s0">None</span><span class="s1">):</span>
                <span class="s3"># act</span>
                <span class="s1">actual = r.collideobjectsall(f)</span>
                <span class="s3"># assert</span>
                <span class="s1">self.assertFalse(actual)</span>

    <span class="s0">def </span><span class="s1">test_collideobjectsall_list_of_object_with_multiple_rect_attribute(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">things = [</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(-</span><span class="s2">73</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(-</span><span class="s2">5</span><span class="s0">, </span><span class="s1">-</span><span class="s2">5</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">15</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">100</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">83</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s1">-</span><span class="s2">81</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">3</span><span class="s0">, </span><span class="s2">8</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">r.collideobjectsall(things</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect1)</span><span class="s0">,</span>
            <span class="s1">[things[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">3</span><span class="s1">]]</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">r.collideobjectsall(things</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect2)</span><span class="s0">, </span><span class="s1">[things[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">1</span><span class="s1">]]</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">r.collideobjectsall(things</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect3)</span><span class="s0">, </span><span class="s1">[things[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">things[</span><span class="s2">3</span><span class="s1">]]</span>
        <span class="s1">)</span>

        <span class="s1">f = [</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">50</span><span class="s0">, </span><span class="s2">50</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">11</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">32</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
            <span class="s1">self._ObjectWithMultipleRectAttribute(</span>
                <span class="s1">Rect(</span><span class="s2">20</span><span class="s0">, </span><span class="s2">20</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">11</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(-</span><span class="s2">20</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">]</span>
        <span class="s1">self.assertFalse(r.collideobjectsall(f</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect1))</span>
        <span class="s1">self.assertFalse(r.collideobjectsall(f</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect2))</span>
        <span class="s1">self.assertFalse(r.collideobjectsall(f</span><span class="s0">, </span><span class="s1">key=</span><span class="s0">lambda </span><span class="s1">o: o.rect3))</span>

    <span class="s0">def </span><span class="s1">test_fit(self):</span>

        <span class="s3"># __doc__ (as of 2008-08-02) for pygame.rect.Rect.fit:</span>

        <span class="s3"># Rect.fit(Rect): return Rect</span>
        <span class="s3"># resize and move a rectangle with aspect ratio</span>
        <span class="s3">#</span>
        <span class="s3"># Returns a new rectangle that is moved and resized to fit another.</span>
        <span class="s3"># The aspect ratio of the original Rect is preserved, so the new</span>
        <span class="s3"># rectangle may be smaller than the target in either width or height.</span>

        <span class="s1">r = Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">30</span><span class="s1">)</span>

        <span class="s1">r2 = Rect(</span><span class="s2">30</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">10</span><span class="s1">)</span>

        <span class="s1">f = r.fit(r2)</span>
        <span class="s1">self.assertTrue(r2.contains(f))</span>

        <span class="s1">f2 = r2.fit(r)</span>
        <span class="s1">self.assertTrue(r.contains(f2))</span>

    <span class="s0">def </span><span class="s1">test_copy(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span>
        <span class="s1">c = r.copy()</span>
        <span class="s1">self.assertEqual(c</span><span class="s0">, </span><span class="s1">r)</span>

    <span class="s0">def </span><span class="s1">test_subscript(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">0</span><span class="s1">]</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">2</span><span class="s1">]</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">3</span><span class="s1">]</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r[-</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r[-</span><span class="s2">2</span><span class="s1">]</span><span class="s0">, </span><span class="s2">3</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r[-</span><span class="s2">4</span><span class="s1">]</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s0">, </span><span class="s1">r.__getitem__</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s0">, </span><span class="s1">r.__getitem__</span><span class="s0">, </span><span class="s1">-</span><span class="s2">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">0</span><span class="s1">:</span><span class="s2">2</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">0</span><span class="s1">:</span><span class="s2">4</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">0</span><span class="s1">:-</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r[:]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r[...]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">0</span><span class="s1">:</span><span class="s2">4</span><span class="s1">:</span><span class="s2">2</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">3</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">0</span><span class="s1">:</span><span class="s2">4</span><span class="s1">:</span><span class="s2">3</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(r[</span><span class="s2">3</span><span class="s1">::-</span><span class="s2">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s2">4</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">r.__getitem__</span><span class="s0">, None</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_ass_subscript(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">r[...] = </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">r.__setitem__</span><span class="s0">, None, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">r.__setitem__</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s5">&quot;&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s0">, </span><span class="s1">r.__setitem__</span><span class="s0">, </span><span class="s2">4</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s0">, </span><span class="s1">r.__setitem__</span><span class="s0">, </span><span class="s1">-</span><span class="s2">5</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">r[</span><span class="s2">0</span><span class="s1">] = </span><span class="s2">10</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">10</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">])</span>
        <span class="s1">r[</span><span class="s2">3</span><span class="s1">] = </span><span class="s2">40</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">10</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">40</span><span class="s1">])</span>
        <span class="s1">r[-</span><span class="s2">1</span><span class="s1">] = </span><span class="s2">400</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">10</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">400</span><span class="s1">])</span>
        <span class="s1">r[-</span><span class="s2">4</span><span class="s1">] = </span><span class="s2">100</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">100</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">400</span><span class="s1">])</span>
        <span class="s1">r[</span><span class="s2">1</span><span class="s1">:</span><span class="s2">3</span><span class="s1">] = </span><span class="s2">0</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">100</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">400</span><span class="s1">])</span>
        <span class="s1">r[...] = </span><span class="s2">0</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">])</span>
        <span class="s1">r[:] = </span><span class="s2">9</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">9</span><span class="s0">, </span><span class="s2">9</span><span class="s0">, </span><span class="s2">9</span><span class="s0">, </span><span class="s2">9</span><span class="s1">])</span>
        <span class="s1">r[:] = </span><span class="s2">11</span><span class="s0">, </span><span class="s2">12</span><span class="s0">, </span><span class="s2">13</span><span class="s0">, </span><span class="s2">14</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">11</span><span class="s0">, </span><span class="s2">12</span><span class="s0">, </span><span class="s2">13</span><span class="s0">, </span><span class="s2">14</span><span class="s1">])</span>
        <span class="s1">r[::-</span><span class="s2">1</span><span class="s1">] = r</span>
        <span class="s1">self.assertEqual(r</span><span class="s0">, </span><span class="s1">[</span><span class="s2">14</span><span class="s0">, </span><span class="s2">13</span><span class="s0">, </span><span class="s2">12</span><span class="s0">, </span><span class="s2">11</span><span class="s1">])</span>

    <span class="s0">def </span><span class="s1">test_ass_subscript_deletion(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s1">)</span>
        <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
            <span class="s0">del </span><span class="s1">r[</span><span class="s2">0</span><span class="s1">]</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
            <span class="s0">del </span><span class="s1">r[</span><span class="s2">0</span><span class="s1">:</span><span class="s2">2</span><span class="s1">]</span>

        <span class="s0">with </span><span class="s1">self.assertRaises(TypeError):</span>
            <span class="s0">del </span><span class="s1">r[...]</span>

    <span class="s0">def </span><span class="s1">test_collection_abc(self):</span>
        <span class="s1">r = Rect(</span><span class="s2">64</span><span class="s0">, </span><span class="s2">70</span><span class="s0">, </span><span class="s2">75</span><span class="s0">, </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(isinstance(r</span><span class="s0">, </span><span class="s1">Collection))</span>
        <span class="s1">self.assertFalse(isinstance(r</span><span class="s0">, </span><span class="s1">Sequence))</span>


<span class="s0">class </span><span class="s1">SubclassTest(unittest.TestCase):</span>
    <span class="s0">class </span><span class="s1">MyRect(Rect):</span>
        <span class="s0">def </span><span class="s1">__init__(self</span><span class="s0">, </span><span class="s1">*args</span><span class="s0">, </span><span class="s1">**kwds):</span>
            <span class="s1">super(SubclassTest.MyRect</span><span class="s0">, </span><span class="s1">self).__init__(*args</span><span class="s0">, </span><span class="s1">**kwds)</span>
            <span class="s1">self.an_attribute = </span><span class="s0">True</span>

    <span class="s0">def </span><span class="s1">test_copy(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(mr1.an_attribute)</span>
        <span class="s1">mr2 = mr1.copy()</span>
        <span class="s1">self.assertTrue(isinstance(mr2</span><span class="s0">, </span><span class="s1">self.MyRect))</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">getattr</span><span class="s0">, </span><span class="s1">mr2</span><span class="s0">, </span><span class="s5">&quot;an_attribute&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_move(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(mr1.an_attribute)</span>
        <span class="s1">mr2 = mr1.move(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(isinstance(mr2</span><span class="s0">, </span><span class="s1">self.MyRect))</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">getattr</span><span class="s0">, </span><span class="s1">mr2</span><span class="s0">, </span><span class="s5">&quot;an_attribute&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_inflate(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">20</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(mr1.an_attribute)</span>
        <span class="s1">mr2 = mr1.inflate(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(isinstance(mr2</span><span class="s0">, </span><span class="s1">self.MyRect))</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">getattr</span><span class="s0">, </span><span class="s1">mr2</span><span class="s0">, </span><span class="s5">&quot;an_attribute&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_clamp(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">19</span><span class="s0">, </span><span class="s2">12</span><span class="s0">, </span><span class="s2">5</span><span class="s0">, </span><span class="s2">5</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(mr1.an_attribute)</span>
        <span class="s1">mr2 = mr1.clamp(Rect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">self.assertTrue(isinstance(mr2</span><span class="s0">, </span><span class="s1">self.MyRect))</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">getattr</span><span class="s0">, </span><span class="s1">mr2</span><span class="s0">, </span><span class="s5">&quot;an_attribute&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_clip(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(mr1.an_attribute)</span>
        <span class="s1">mr2 = mr1.clip(Rect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">3</span><span class="s0">, </span><span class="s2">4</span><span class="s1">))</span>
        <span class="s1">self.assertTrue(isinstance(mr2</span><span class="s0">, </span><span class="s1">self.MyRect))</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">getattr</span><span class="s0">, </span><span class="s1">mr2</span><span class="s0">, </span><span class="s5">&quot;an_attribute&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_union(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(mr1.an_attribute)</span>
        <span class="s1">mr2 = mr1.union(Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">2</span><span class="s1">))</span>
        <span class="s1">self.assertTrue(isinstance(mr2</span><span class="s0">, </span><span class="s1">self.MyRect))</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">getattr</span><span class="s0">, </span><span class="s1">mr2</span><span class="s0">, </span><span class="s5">&quot;an_attribute&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_unionall(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">0</span><span class="s0">, </span><span class="s2">0</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(mr1.an_attribute)</span>
        <span class="s1">mr2 = mr1.unionall([Rect(-</span><span class="s2">2</span><span class="s0">, </span><span class="s1">-</span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Rect(</span><span class="s2">2</span><span class="s0">, </span><span class="s2">2</span><span class="s0">, </span><span class="s2">1</span><span class="s0">, </span><span class="s2">1</span><span class="s1">)])</span>
        <span class="s1">self.assertTrue(isinstance(mr2</span><span class="s0">, </span><span class="s1">self.MyRect))</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">getattr</span><span class="s0">, </span><span class="s1">mr2</span><span class="s0">, </span><span class="s5">&quot;an_attribute&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_fit(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">10</span><span class="s0">, </span><span class="s2">10</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(mr1.an_attribute)</span>
        <span class="s1">mr2 = mr1.fit(Rect(</span><span class="s2">30</span><span class="s0">, </span><span class="s2">30</span><span class="s0">, </span><span class="s2">15</span><span class="s0">, </span><span class="s2">10</span><span class="s1">))</span>
        <span class="s1">self.assertTrue(isinstance(mr2</span><span class="s0">, </span><span class="s1">self.MyRect))</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">getattr</span><span class="s0">, </span><span class="s1">mr2</span><span class="s0">, </span><span class="s5">&quot;an_attribute&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_collection_abc(self):</span>
        <span class="s1">mr1 = self.MyRect(</span><span class="s2">64</span><span class="s0">, </span><span class="s2">70</span><span class="s0">, </span><span class="s2">75</span><span class="s0">, </span><span class="s2">30</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(isinstance(mr1</span><span class="s0">, </span><span class="s1">Collection))</span>
        <span class="s1">self.assertFalse(isinstance(mr1</span><span class="s0">, </span><span class="s1">Sequence))</span>


<span class="s0">if </span><span class="s1">__name__ == </span><span class="s5">&quot;__main__&quot;</span><span class="s1">:</span>
    <span class="s1">unittest.main()</span>
</pre>
</body>
</html>