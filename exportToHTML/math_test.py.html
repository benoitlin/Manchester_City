<html>
<head>
<title>math_test.py</title>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<style type="text/css">
.s0 { color: #cc7832;}
.s1 { color: #a9b7c6;}
.s2 { color: #6a8759;}
.s3 { color: #629755; font-style: italic;}
.s4 { color: #808080;}
.s5 { color: #6897bb;}
</style>
</head>
<body bgcolor="#2b2b2b">
<table CELLSPACING=0 CELLPADDING=5 COLS=1 WIDTH="100%" BGCOLOR="#606060" >
<tr><td><center>
<font face="Arial, Helvetica" color="#000000">
math_test.py</font>
</center></td></tr></table>
<pre><span class="s0">import </span><span class="s1">math</span>
<span class="s0">import </span><span class="s1">platform</span>
<span class="s0">import </span><span class="s1">unittest</span>
<span class="s0">from </span><span class="s1">collections.abc </span><span class="s0">import </span><span class="s1">Collection</span><span class="s0">, </span><span class="s1">Sequence</span>

<span class="s0">import </span><span class="s1">pygame.math</span>
<span class="s0">from </span><span class="s1">pygame.math </span><span class="s0">import </span><span class="s1">Vector2</span><span class="s0">, </span><span class="s1">Vector3</span>

<span class="s1">IS_PYPY = </span><span class="s2">&quot;PyPy&quot; </span><span class="s1">== platform.python_implementation()</span>


<span class="s0">class </span><span class="s1">MathModuleTest(unittest.TestCase):</span>
    <span class="s3">&quot;&quot;&quot;Math module tests.&quot;&quot;&quot;</span>

    <span class="s0">def </span><span class="s1">test_clamp(self):</span>
        <span class="s3">&quot;&quot;&quot;Test clamp function.&quot;&quot;&quot;</span>

        <span class="s4"># Int tests</span>
        <span class="s4"># Test going above max</span>
        <span class="s1">result = pygame.math.clamp(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(result</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s4"># Test going below min</span>
        <span class="s1">result = pygame.math.clamp(-</span><span class="s5">10</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(result</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s4"># Test equal to max</span>
        <span class="s1">result = pygame.math.clamp(</span><span class="s5">5</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(result</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s4"># Test equal to min</span>
        <span class="s1">result = pygame.math.clamp(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(result</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s4"># Test between min and max</span>
        <span class="s1">result = pygame.math.clamp(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(result</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>

        <span class="s4"># Float tests</span>
        <span class="s4"># Test going above max</span>
        <span class="s1">result = pygame.math.clamp(</span><span class="s5">10.0</span><span class="s0">, </span><span class="s5">1.12</span><span class="s0">, </span><span class="s5">5.0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(result</span><span class="s0">, </span><span class="s5">5.0</span><span class="s1">)</span>
        <span class="s4"># Test going below min</span>
        <span class="s1">result = pygame.math.clamp(-</span><span class="s5">10.0</span><span class="s0">, </span><span class="s5">1.12</span><span class="s0">, </span><span class="s5">5.0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(result</span><span class="s0">, </span><span class="s5">1.12</span><span class="s1">)</span>
        <span class="s4"># Test equal to max</span>
        <span class="s1">result = pygame.math.clamp(</span><span class="s5">5.0</span><span class="s0">, </span><span class="s5">1.12</span><span class="s0">, </span><span class="s5">5.0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(result</span><span class="s0">, </span><span class="s5">5.0</span><span class="s1">)</span>
        <span class="s4"># Test equal to min</span>
        <span class="s1">result = pygame.math.clamp(</span><span class="s5">1.12</span><span class="s0">, </span><span class="s5">1.12</span><span class="s0">, </span><span class="s5">5.0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(result</span><span class="s0">, </span><span class="s5">1.12</span><span class="s1">)</span>
        <span class="s4"># Test between min and max</span>
        <span class="s1">result = pygame.math.clamp(</span><span class="s5">2.5</span><span class="s0">, </span><span class="s5">1.12</span><span class="s0">, </span><span class="s5">5.0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(result</span><span class="s0">, </span><span class="s5">2.5</span><span class="s1">)</span>

        <span class="s4"># Error tests</span>
        <span class="s4"># Not enough args</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">pygame.math.clamp</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s4"># Non numeric args</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">pygame.math.clamp</span><span class="s0">, </span><span class="s2">&quot;hello&quot;</span><span class="s0">, </span><span class="s2">&quot;py&quot;</span><span class="s0">, </span><span class="s2">&quot;thon&quot;</span><span class="s1">)</span>


<span class="s0">class </span><span class="s1">Vector2TypeTest(unittest.TestCase):</span>
    <span class="s0">def </span><span class="s1">setUp(self):</span>
        <span class="s1">self.zeroVec = Vector2()</span>
        <span class="s1">self.e1 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.e2 = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.t1 = (</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.l1 = list(self.t1)</span>
        <span class="s1">self.v1 = Vector2(self.t1)</span>
        <span class="s1">self.t2 = (</span><span class="s5">5.6</span><span class="s0">, </span><span class="s5">7.8</span><span class="s1">)</span>
        <span class="s1">self.l2 = list(self.t2)</span>
        <span class="s1">self.v2 = Vector2(self.t2)</span>
        <span class="s1">self.s1 = </span><span class="s5">5.6</span>
        <span class="s1">self.s2 = </span><span class="s5">7.8</span>

    <span class="s0">def </span><span class="s1">testConstructionDefault(self):</span>
        <span class="s1">v = Vector2()</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionScalar(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionScalarKeywords(self):</span>
        <span class="s1">v = Vector2(x=</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionKeywords(self):</span>
        <span class="s1">v = Vector2(x=</span><span class="s5">1</span><span class="s0">, </span><span class="s1">y=</span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">2.0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionXY(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionTuple(self):</span>
        <span class="s1">v = Vector2((</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionList(self):</span>
        <span class="s1">v = Vector2([</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionVector2(self):</span>
        <span class="s1">v = Vector2(Vector2(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testAttributeAccess(self):</span>
        <span class="s1">tmp = self.v1.x</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1.x)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">tmp = self.v1.y</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1.y)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.v1.x = </span><span class="s5">3.141</span>
        <span class="s1">self.assertEqual(self.v1.x</span><span class="s0">, </span><span class="s5">3.141</span><span class="s1">)</span>
        <span class="s1">self.v1.y = </span><span class="s5">3.141</span>
        <span class="s1">self.assertEqual(self.v1.y</span><span class="s0">, </span><span class="s5">3.141</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">assign_nonfloat():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v.x = </span><span class="s2">&quot;spam&quot;</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">assign_nonfloat)</span>

    <span class="s0">def </span><span class="s1">testCopy(self):</span>
        <span class="s1">v_copy0 = Vector2(</span><span class="s5">2004.0</span><span class="s0">, </span><span class="s5">2022.0</span><span class="s1">)</span>
        <span class="s1">v_copy1 = v_copy0.copy()</span>
        <span class="s1">self.assertEqual(v_copy0.x</span><span class="s0">, </span><span class="s1">v_copy1.x)</span>
        <span class="s1">self.assertEqual(v_copy0.y</span><span class="s0">, </span><span class="s1">v_copy1.y)</span>

    <span class="s0">def </span><span class="s1">test_move_towards_basic(self):</span>
        <span class="s1">expected = Vector2(</span><span class="s5">8.08</span><span class="s0">, </span><span class="s5">2006.87</span><span class="s1">)</span>
        <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
        <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
        <span class="s1">change_ip = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>

        <span class="s1">change = origin.move_towards(target</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">change_ip.move_towards_ip(target</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(round(change.x</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.x)</span>
        <span class="s1">self.assertEqual(round(change.y</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.y)</span>
        <span class="s1">self.assertEqual(round(change_ip.x</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.x)</span>
        <span class="s1">self.assertEqual(round(change_ip.y</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.y)</span>

    <span class="s0">def </span><span class="s1">test_move_towards_max_distance(self):</span>
        <span class="s1">expected = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021</span><span class="s1">)</span>
        <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
        <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
        <span class="s1">change_ip = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>

        <span class="s1">change = origin.move_towards(target</span><span class="s0">, </span><span class="s5">25</span><span class="s1">)</span>
        <span class="s1">change_ip.move_towards_ip(target</span><span class="s0">, </span><span class="s5">25</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(round(change.x</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.x)</span>
        <span class="s1">self.assertEqual(round(change.y</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.y)</span>
        <span class="s1">self.assertEqual(round(change_ip.x</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.x)</span>
        <span class="s1">self.assertEqual(round(change_ip.y</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.y)</span>

    <span class="s0">def </span><span class="s1">test_move_nowhere(self):</span>
        <span class="s1">expected = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
        <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
        <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
        <span class="s1">change_ip = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>

        <span class="s1">change = origin.move_towards(target</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">change_ip.move_towards_ip(target</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(round(change.x</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.x)</span>
        <span class="s1">self.assertEqual(round(change.y</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.y)</span>
        <span class="s1">self.assertEqual(round(change_ip.x</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.x)</span>
        <span class="s1">self.assertEqual(round(change_ip.y</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.y)</span>

    <span class="s0">def </span><span class="s1">test_move_away(self):</span>
        <span class="s1">expected = Vector2(</span><span class="s5">6.36</span><span class="s0">, </span><span class="s5">2001.13</span><span class="s1">)</span>
        <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
        <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
        <span class="s1">change_ip = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>

        <span class="s1">change = origin.move_towards(target</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">change_ip.move_towards_ip(target</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(round(change.x</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.x)</span>
        <span class="s1">self.assertEqual(round(change.y</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.y)</span>
        <span class="s1">self.assertEqual(round(change_ip.x</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.x)</span>
        <span class="s1">self.assertEqual(round(change_ip.y</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s1">expected.y)</span>

    <span class="s0">def </span><span class="s1">test_move_towards_self(self):</span>
        <span class="s1">vec = Vector2(</span><span class="s5">6.36</span><span class="s0">, </span><span class="s5">2001.13</span><span class="s1">)</span>
        <span class="s1">vec2 = vec.copy()</span>
        <span class="s0">for </span><span class="s1">dist </span><span class="s0">in </span><span class="s1">(-</span><span class="s5">3.54</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0.234</span><span class="s0">, </span><span class="s5">12</span><span class="s1">):</span>
            <span class="s1">self.assertEqual(vec.move_towards(vec2</span><span class="s0">, </span><span class="s1">dist)</span><span class="s0">, </span><span class="s1">vec)</span>
            <span class="s1">vec2.move_towards_ip(vec</span><span class="s0">, </span><span class="s1">dist)</span>
            <span class="s1">self.assertEqual(vec</span><span class="s0">, </span><span class="s1">vec2)</span>

    <span class="s0">def </span><span class="s1">test_move_towards_errors(self):</span>
        <span class="s0">def </span><span class="s1">overpopulate():</span>
            <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
            <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
            <span class="s1">origin.move_towards(target</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">overpopulate_ip():</span>
            <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
            <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
            <span class="s1">origin.move_towards_ip(target</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">invalid_types1():</span>
            <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
            <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
            <span class="s1">origin.move_towards(target</span><span class="s0">, </span><span class="s2">&quot;novial&quot;</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">invalid_types_ip1():</span>
            <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
            <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
            <span class="s1">origin.move_towards_ip(target</span><span class="s0">, </span><span class="s2">&quot;is&quot;</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">invalid_types2():</span>
            <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
            <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
            <span class="s1">origin.move_towards(</span><span class="s2">&quot;kinda&quot;</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">invalid_types_ip2():</span>
            <span class="s1">origin = Vector2(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s1">)</span>
            <span class="s1">target = Vector2(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s1">)</span>
            <span class="s1">origin.move_towards_ip(</span><span class="s2">&quot;cool&quot;</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">overpopulate)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">overpopulate_ip)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">invalid_types1)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">invalid_types_ip1)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">invalid_types2)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">invalid_types_ip2)</span>

    <span class="s0">def </span><span class="s1">testSequence(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">Vector2()[:]</span>
        <span class="s1">self.assertEqual(len(v)</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s5">0</span><span class="s1">]</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s0">, lambda</span><span class="s1">: v[</span><span class="s5">2</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s5">2</span><span class="s1">]</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s0">, lambda</span><span class="s1">: v[-</span><span class="s5">3</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:]</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[</span><span class="s5">1</span><span class="s1">:]</span><span class="s0">, </span><span class="s1">[</span><span class="s5">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1.2</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(list(v)</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(tuple(v)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">))</span>
        <span class="s1">v[</span><span class="s5">0</span><span class="s1">] = </span><span class="s5">5.6</span>
        <span class="s1">v[</span><span class="s5">1</span><span class="s1">] = </span><span class="s5">7.8</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">5.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">7.8</span><span class="s1">)</span>
        <span class="s1">v[:] = [</span><span class="s5">9.1</span><span class="s0">, </span><span class="s5">11.12</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">9.1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">11.12</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">overpopulate():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v[:] = [</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">]</span>

        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">overpopulate)</span>

        <span class="s0">def </span><span class="s1">underpopulate():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v[:] = [</span><span class="s5">1</span><span class="s1">]</span>

        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">underpopulate)</span>

        <span class="s0">def </span><span class="s1">assign_nonfloat():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v[</span><span class="s5">0</span><span class="s1">] = </span><span class="s2">&quot;spam&quot;</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">assign_nonfloat)</span>

    <span class="s0">def </span><span class="s1">testExtendedSlicing(self):</span>
        <span class="s4">#  deletion</span>
        <span class="s0">def </span><span class="s1">delSlice(vec</span><span class="s0">, </span><span class="s1">start=</span><span class="s0">None, </span><span class="s1">stop=</span><span class="s0">None, </span><span class="s1">step=</span><span class="s0">None</span><span class="s1">):</span>
            <span class="s0">if </span><span class="s1">start </span><span class="s0">is not None and </span><span class="s1">stop </span><span class="s0">is not None and </span><span class="s1">step </span><span class="s0">is not None</span><span class="s1">:</span>
                <span class="s0">del </span><span class="s1">vec[start:stop:step]</span>
            <span class="s0">elif </span><span class="s1">start </span><span class="s0">is not None and </span><span class="s1">stop </span><span class="s0">is None and </span><span class="s1">step </span><span class="s0">is not None</span><span class="s1">:</span>
                <span class="s0">del </span><span class="s1">vec[start::step]</span>
            <span class="s0">elif </span><span class="s1">start </span><span class="s0">is None and </span><span class="s1">stop </span><span class="s0">is None and </span><span class="s1">step </span><span class="s0">is not None</span><span class="s1">:</span>
                <span class="s0">del </span><span class="s1">vec[::step]</span>

        <span class="s1">v = Vector2(self.v1)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">delSlice</span><span class="s0">, </span><span class="s1">v</span><span class="s0">, None, None, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">delSlice</span><span class="s0">, </span><span class="s1">v</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, None, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">delSlice</span><span class="s0">, </span><span class="s1">v</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

        <span class="s4">#  assignment</span>
        <span class="s1">v = Vector2(self.v1)</span>
        <span class="s1">v[::</span><span class="s5">2</span><span class="s1">] = [-</span><span class="s5">1</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">[-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">self.v1.y])</span>
        <span class="s1">v = Vector2(self.v1)</span>
        <span class="s1">v[::-</span><span class="s5">2</span><span class="s1">] = [</span><span class="s5">10</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">[self.v1.x</span><span class="s0">, </span><span class="s5">10</span><span class="s1">])</span>
        <span class="s1">v = Vector2(self.v1)</span>
        <span class="s1">v[::-</span><span class="s5">1</span><span class="s1">] = v</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">[self.v1.y</span><span class="s0">, </span><span class="s1">self.v1.x])</span>
        <span class="s1">a = Vector2(self.v1)</span>
        <span class="s1">b = Vector2(self.v1)</span>
        <span class="s1">c = Vector2(self.v1)</span>
        <span class="s1">a[</span><span class="s5">1</span><span class="s1">:</span><span class="s5">2</span><span class="s1">] = [</span><span class="s5">2.2</span><span class="s1">]</span>
        <span class="s1">b[slice(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)] = [</span><span class="s5">2.2</span><span class="s1">]</span>
        <span class="s1">c[</span><span class="s5">1</span><span class="s1">:</span><span class="s5">2</span><span class="s1">:] = (</span><span class="s5">2.2</span><span class="s0">,</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(a</span><span class="s0">, </span><span class="s1">b)</span>
        <span class="s1">self.assertEqual(a</span><span class="s0">, </span><span class="s1">c)</span>
        <span class="s1">self.assertEqual(type(a)</span><span class="s0">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(type(b)</span><span class="s0">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(type(c)</span><span class="s0">, </span><span class="s1">type(self.v1))</span>

    <span class="s0">def </span><span class="s1">test_contains(self):</span>
        <span class="s1">c = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

        <span class="s4"># call __contains__ explicitly to test that it is defined</span>
        <span class="s1">self.assertTrue(c.__contains__(</span><span class="s5">0</span><span class="s1">))</span>
        <span class="s1">self.assertTrue(</span><span class="s5">0 </span><span class="s0">in </span><span class="s1">c)</span>
        <span class="s1">self.assertTrue(</span><span class="s5">1 </span><span class="s0">in </span><span class="s1">c)</span>
        <span class="s1">self.assertTrue(</span><span class="s5">2 </span><span class="s0">not in </span><span class="s1">c)</span>
        <span class="s1">self.assertFalse(c.__contains__(</span><span class="s5">2</span><span class="s1">))</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s2">&quot;string&quot; </span><span class="s0">in </span><span class="s1">c)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">3 </span><span class="s1">+ </span><span class="s5">4j </span><span class="s0">in </span><span class="s1">c)</span>

    <span class="s0">def </span><span class="s1">testAdd(self):</span>
        <span class="s1">v3 = self.v1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y + self.v2.y)</span>
        <span class="s1">v3 = self.v1 + self.t2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x + self.t2[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y + self.t2[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">v3 = self.v1 + self.l2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x + self.l2[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y + self.l2[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">v3 = self.t1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">0</span><span class="s1">] + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">1</span><span class="s1">] + self.v2.y)</span>
        <span class="s1">v3 = self.l1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">0</span><span class="s1">] + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">1</span><span class="s1">] + self.v2.y)</span>

    <span class="s0">def </span><span class="s1">testSub(self):</span>
        <span class="s1">v3 = self.v1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y - self.v2.y)</span>
        <span class="s1">v3 = self.v1 - self.t2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x - self.t2[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y - self.t2[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">v3 = self.v1 - self.l2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x - self.l2[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y - self.l2[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">v3 = self.t1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">0</span><span class="s1">] - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">1</span><span class="s1">] - self.v2.y)</span>
        <span class="s1">v3 = self.l1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">0</span><span class="s1">] - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">1</span><span class="s1">] - self.v2.y)</span>

    <span class="s0">def </span><span class="s1">testScalarMultiplication(self):</span>
        <span class="s1">v = self.s1 * self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">self.s1 * self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">self.s1 * self.v1.y)</span>
        <span class="s1">v = self.v1 * self.s2</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">self.v1.x * self.s2)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">self.v1.y * self.s2)</span>

    <span class="s0">def </span><span class="s1">testScalarDivision(self):</span>
        <span class="s1">v = self.v1 / self.s1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s0">, </span><span class="s1">self.v1.x / self.s1)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s0">, </span><span class="s1">self.v1.y / self.s1)</span>
        <span class="s1">v = self.v1 // self.s2</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">self.v1.x // self.s2)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">self.v1.y // self.s2)</span>

    <span class="s0">def </span><span class="s1">testBool(self):</span>
        <span class="s1">self.assertEqual(bool(self.zeroVec)</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(bool(self.v1)</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(</span><span class="s0">not </span><span class="s1">self.zeroVec)</span>
        <span class="s1">self.assertTrue(self.v1)</span>

    <span class="s0">def </span><span class="s1">testUnary(self):</span>
        <span class="s1">v = +self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">self.v1.y)</span>
        <span class="s1">self.assertNotEqual(id(v)</span><span class="s0">, </span><span class="s1">id(self.v1))</span>
        <span class="s1">v = -self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">-self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">-self.v1.y)</span>
        <span class="s1">self.assertNotEqual(id(v)</span><span class="s0">, </span><span class="s1">id(self.v1))</span>

    <span class="s0">def </span><span class="s1">testCompare(self):</span>
        <span class="s1">int_vec = Vector2(</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">flt_vec = Vector2(</span><span class="s5">3.0</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2.0</span><span class="s1">)</span>
        <span class="s1">zero_vec = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == flt_vec</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != flt_vec</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != zero_vec</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(flt_vec == zero_vec</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == (</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s1">)</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != (</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s1">)</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != [</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">]</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == [</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">]</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != </span><span class="s5">5</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == </span><span class="s5">5</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != [</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s0">, </span><span class="s5">0</span><span class="s1">]</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == [</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s0">, </span><span class="s5">0</span><span class="s1">]</span><span class="s0">, False</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testStr(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(str(v)</span><span class="s0">, </span><span class="s2">&quot;[1.2, 3.4]&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testRepr(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.__repr__()</span><span class="s0">, </span><span class="s2">&quot;&lt;Vector2(1.2, 3.4)&gt;&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">Vector2(v.__repr__()))</span>

    <span class="s0">def </span><span class="s1">testIter(self):</span>
        <span class="s1">it = self.v1.__iter__()</span>
        <span class="s1">next_ = it.__next__</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(StopIteration</span><span class="s0">, lambda</span><span class="s1">: next_())</span>
        <span class="s1">it1 = self.v1.__iter__()</span>
        <span class="s1">it2 = self.v1.__iter__()</span>
        <span class="s1">self.assertNotEqual(id(it1)</span><span class="s0">, </span><span class="s1">id(it2))</span>
        <span class="s1">self.assertEqual(id(it1)</span><span class="s0">, </span><span class="s1">id(it1.__iter__()))</span>
        <span class="s1">self.assertEqual(list(it1)</span><span class="s0">, </span><span class="s1">list(it2))</span>
        <span class="s1">self.assertEqual(list(self.v1.__iter__())</span><span class="s0">, </span><span class="s1">self.l1)</span>
        <span class="s1">idx = </span><span class="s5">0</span>
        <span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">self.v1:</span>
            <span class="s1">self.assertEqual(val</span><span class="s0">, </span><span class="s1">self.v1[idx])</span>
            <span class="s1">idx += </span><span class="s5">1</span>

    <span class="s0">def </span><span class="s1">test_rotate(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">v3 = v1.rotate(</span><span class="s5">90 </span><span class="s1">+ </span><span class="s5">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">v1 = Vector2(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s5">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s4"># issue 214</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).rotate(</span><span class="s5">359.99999999</span><span class="s1">)</span><span class="s0">, </span><span class="s1">Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_rotate_rad(self):</span>
        <span class="s1">tests = (</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi / </span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">-math.pi / </span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi / </span><span class="s5">4</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s0">for </span><span class="s1">initialVec</span><span class="s0">, </span><span class="s1">radians </span><span class="s0">in </span><span class="s1">tests:</span>
            <span class="s1">self.assertEqual(</span>
                <span class="s1">Vector2(initialVec).rotate_rad(radians)</span><span class="s0">,</span>
                <span class="s1">(math.cos(radians)</span><span class="s0">, </span><span class="s1">math.sin(radians))</span><span class="s0">,</span>
            <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_rotate_ip(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_ip(</span><span class="s5">90</span><span class="s1">)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v = Vector2(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_ip(-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_rotate_rad_ip(self):</span>
        <span class="s1">tests = (</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi / </span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">-math.pi / </span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi / </span><span class="s5">4</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s0">for </span><span class="s1">initialVec</span><span class="s0">, </span><span class="s1">radians </span><span class="s0">in </span><span class="s1">tests:</span>
            <span class="s1">vec = Vector2(initialVec)</span>
            <span class="s1">vec.rotate_rad_ip(radians)</span>
            <span class="s1">self.assertEqual(vec</span><span class="s0">, </span><span class="s1">(math.cos(radians)</span><span class="s0">, </span><span class="s1">math.sin(radians)))</span>

    <span class="s0">def </span><span class="s1">test_normalize(self):</span>
        <span class="s1">v = self.v1.normalize()</span>
        <span class="s4"># length is 1</span>
        <span class="s1">self.assertAlmostEqual(v.x * v.x + v.y * v.y</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s4"># v1 is unchanged</span>
        <span class="s1">self.assertEqual(self.v1.x</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.y</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s4"># v2 is parallel to v1</span>
        <span class="s1">self.assertAlmostEqual(self.v1.x * v.y - self.v1.y * v.x</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.normalize())</span>

    <span class="s0">def </span><span class="s1">test_normalize_ip(self):</span>
        <span class="s1">v = +self.v1</span>
        <span class="s4"># v has length != 1 before normalizing</span>
        <span class="s1">self.assertNotEqual(v.x * v.x + v.y * v.y</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s4"># inplace operations should return None</span>
        <span class="s1">self.assertEqual(v.normalize_ip()</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s4"># length is 1</span>
        <span class="s1">self.assertAlmostEqual(v.x * v.x + v.y * v.y</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s4"># v2 is parallel to v1</span>
        <span class="s1">self.assertAlmostEqual(self.v1.x * v.y - self.v1.y * v.x</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.normalize_ip())</span>

    <span class="s0">def </span><span class="s1">test_is_normalized(self):</span>
        <span class="s1">self.assertEqual(self.v1.is_normalized()</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">v = self.v1.normalize()</span>
        <span class="s1">self.assertEqual(v.is_normalized()</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.e2.is_normalized()</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.is_normalized()</span><span class="s0">, False</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_cross(self):</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.cross(self.v2)</span><span class="s0">, </span><span class="s1">self.v1.x * self.v2.y - self.v1.y * self.v2.x</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.cross(self.l2)</span><span class="s0">, </span><span class="s1">self.v1.x * self.l2[</span><span class="s5">1</span><span class="s1">] - self.v1.y * self.l2[</span><span class="s5">0</span><span class="s1">]</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.cross(self.t2)</span><span class="s0">, </span><span class="s1">self.v1.x * self.t2[</span><span class="s5">1</span><span class="s1">] - self.v1.y * self.t2[</span><span class="s5">0</span><span class="s1">]</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v2)</span><span class="s0">, </span><span class="s1">-self.v2.cross(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_dot(self):</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.dot(self.v2)</span><span class="s0">, </span><span class="s1">self.v1.x * self.v2.x + self.v1.y * self.v2.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.dot(self.l2)</span><span class="s0">, </span><span class="s1">self.v1.x * self.l2[</span><span class="s5">0</span><span class="s1">] + self.v1.y * self.l2[</span><span class="s5">1</span><span class="s1">]</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.dot(self.t2)</span><span class="s0">, </span><span class="s1">self.v1.x * self.t2[</span><span class="s5">0</span><span class="s1">] + self.v1.y * self.t2[</span><span class="s5">1</span><span class="s1">]</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.dot(self.v2)</span><span class="s0">, </span><span class="s1">self.v2.dot(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.dot(self.v2)</span><span class="s0">, </span><span class="s1">self.v1 * self.v2)</span>

    <span class="s0">def </span><span class="s1">test_angle_to(self):</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.rotate(self.v1.angle_to(self.v2)).normalize()</span><span class="s0">, </span><span class="s1">self.v2.normalize()</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).angle_to((-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span><span class="s0">, </span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).angle_to((</span><span class="s5">0</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">))</span><span class="s0">, </span><span class="s1">-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).angle_to((-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span><span class="s0">, </span><span class="s5">135</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(abs(Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).angle_to((-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)))</span><span class="s0">, </span><span class="s5">180</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_scale_to_length(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v.scale_to_length(</span><span class="s5">2.5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">Vector2(</span><span class="s5">2.5</span><span class="s0">, </span><span class="s5">2.5</span><span class="s1">) / math.sqrt(</span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.scale_to_length(</span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.scale_to_length(</span><span class="s5">0</span><span class="s1">)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">self.zeroVec)</span>

    <span class="s0">def </span><span class="s1">test_length(self):</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">).length()</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(-</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">).length()</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.length()</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_length_squared(self):</span>
        <span class="s1">self.assertEqual(Vector2(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">).length_squared()</span><span class="s0">, </span><span class="s5">25</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector2(-</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">).length_squared()</span><span class="s0">, </span><span class="s5">25</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.length_squared()</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_reflect(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">n = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.reflect(n)</span><span class="s0">, </span><span class="s1">Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.reflect(</span><span class="s5">3 </span><span class="s1">* n)</span><span class="s0">, </span><span class="s1">v.reflect(n))</span>
        <span class="s1">self.assertEqual(v.reflect(-v)</span><span class="s0">, </span><span class="s1">-v)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: v.reflect(self.zeroVec))</span>

    <span class="s0">def </span><span class="s1">test_reflect_ip(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(v1)</span>
        <span class="s1">n = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.reflect_ip(n)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s0">, </span><span class="s1">Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">v2 = Vector2(v1)</span>
        <span class="s1">v2.reflect_ip(</span><span class="s5">3 </span><span class="s1">* n)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s0">, </span><span class="s1">v1.reflect(n))</span>
        <span class="s1">v2 = Vector2(v1)</span>
        <span class="s1">v2.reflect_ip(-v1)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s0">, </span><span class="s1">-v1)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: v2.reflect_ip(Vector2()))</span>

    <span class="s0">def </span><span class="s1">test_distance_to(self):</span>
        <span class="s1">diff = self.v1 - self.v2</span>
        <span class="s1">self.assertEqual(self.e1.distance_to(self.e2)</span><span class="s0">, </span><span class="s1">math.sqrt(</span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e1.distance_to((</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span><span class="s0">, </span><span class="s1">math.sqrt(</span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e1.distance_to([</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">])</span><span class="s0">, </span><span class="s1">math.sqrt(</span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_to(self.v2)</span><span class="s0">, </span><span class="s1">math.sqrt(diff.x * diff.x + diff.y * diff.y)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_to(self.t2)</span><span class="s0">, </span><span class="s1">math.sqrt(diff.x * diff.x + diff.y * diff.y)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_to(self.l2)</span><span class="s0">, </span><span class="s1">math.sqrt(diff.x * diff.x + diff.y * diff.y)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.t1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.l1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.t2)</span><span class="s0">, </span><span class="s1">self.v2.distance_to(self.t1))</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.l2)</span><span class="s0">, </span><span class="s1">self.v2.distance_to(self.l1))</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v2)</span><span class="s0">, </span><span class="s1">self.v2.distance_to(self.v1))</span>

    <span class="s0">def </span><span class="s1">test_distance_squared_to(self):</span>
        <span class="s1">diff = self.v1 - self.v2</span>
        <span class="s1">self.assertEqual(self.e1.distance_squared_to(self.e2)</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.e1.distance_squared_to((</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.e1.distance_squared_to([</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">])</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.v2)</span><span class="s0">, </span><span class="s1">diff.x * diff.x + diff.y * diff.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.t2)</span><span class="s0">, </span><span class="s1">diff.x * diff.x + diff.y * diff.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.l2)</span><span class="s0">, </span><span class="s1">diff.x * diff.x + diff.y * diff.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.v1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.t1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.l1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.v2)</span><span class="s0">, </span><span class="s1">self.v2.distance_squared_to(self.v1)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.t2)</span><span class="s0">, </span><span class="s1">self.v2.distance_squared_to(self.t1)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.l2)</span><span class="s0">, </span><span class="s1">self.v2.distance_squared_to(self.l1)</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_update(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">v.update(</span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">Vector2((</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)))</span>
        <span class="s1">v.update(</span><span class="s5">5</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">Vector2(</span><span class="s5">5</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">v.update((</span><span class="s5">4</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertNotEqual(v</span><span class="s0">, </span><span class="s1">Vector2((</span><span class="s5">5</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)))</span>

    <span class="s0">def </span><span class="s1">test_swizzle(self):</span>
        <span class="s1">self.assertEqual(self.v1.yx</span><span class="s0">, </span><span class="s1">(self.v1.y</span><span class="s0">, </span><span class="s1">self.v1.x))</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.xxyyxy</span><span class="s0">,</span>
            <span class="s1">(self.v1.x</span><span class="s0">, </span><span class="s1">self.v1.x</span><span class="s0">, </span><span class="s1">self.v1.y</span><span class="s0">, </span><span class="s1">self.v1.y</span><span class="s0">, </span><span class="s1">self.v1.x</span><span class="s0">, </span><span class="s1">self.v1.y)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.v1.xy = self.t2</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s0">, </span><span class="s1">self.t2)</span>
        <span class="s1">self.v1.yx = self.t2</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s0">, </span><span class="s1">(self.t2[</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">self.t2[</span><span class="s5">0</span><span class="s1">]))</span>
        <span class="s1">self.assertEqual(type(self.v1)</span><span class="s0">, </span><span class="s1">Vector2)</span>

        <span class="s0">def </span><span class="s1">invalidSwizzleX():</span>
            <span class="s1">Vector2().xx = (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">invalidSwizzleY():</span>
            <span class="s1">Vector2().yy = (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">invalidSwizzleX)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">invalidSwizzleY)</span>

        <span class="s0">def </span><span class="s1">invalidAssignment():</span>
            <span class="s1">Vector2().xy = </span><span class="s5">3</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">invalidAssignment)</span>

        <span class="s0">def </span><span class="s1">unicodeAttribute():</span>
            <span class="s1">getattr(Vector2()</span><span class="s0">, </span><span class="s2">&quot;&quot;</span><span class="s1">)</span>

        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">unicodeAttribute)</span>

    <span class="s0">def </span><span class="s1">test_swizzle_return_types(self):</span>
        <span class="s1">self.assertEqual(type(self.v1.x)</span><span class="s0">, </span><span class="s1">float)</span>
        <span class="s1">self.assertEqual(type(self.v1.xy)</span><span class="s0">, </span><span class="s1">Vector2)</span>
        <span class="s1">self.assertEqual(type(self.v1.xyx)</span><span class="s0">, </span><span class="s1">Vector3)</span>
        <span class="s4"># but we don't have vector4 or above... so tuple.</span>
        <span class="s1">self.assertEqual(type(self.v1.xyxy)</span><span class="s0">, </span><span class="s1">tuple)</span>
        <span class="s1">self.assertEqual(type(self.v1.xyxyx)</span><span class="s0">, </span><span class="s1">tuple)</span>

    <span class="s0">def </span><span class="s1">test_elementwise(self):</span>
        <span class="s1">v1 = self.v1</span>
        <span class="s1">v2 = self.v2</span>
        <span class="s1">s1 = self.s1</span>
        <span class="s1">s2 = self.s2</span>
        <span class="s4"># behaviour for &quot;elementwise op scalar&quot;</span>
        <span class="s1">self.assertEqual(v1.elementwise() + s1</span><span class="s0">, </span><span class="s1">(v1.x + s1</span><span class="s0">, </span><span class="s1">v1.y + s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() - s1</span><span class="s0">, </span><span class="s1">(v1.x - s1</span><span class="s0">, </span><span class="s1">v1.y - s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() * s2</span><span class="s0">, </span><span class="s1">(v1.x * s2</span><span class="s0">, </span><span class="s1">v1.y * s2))</span>
        <span class="s1">self.assertEqual(v1.elementwise() / s2</span><span class="s0">, </span><span class="s1">(v1.x / s2</span><span class="s0">, </span><span class="s1">v1.y / s2))</span>
        <span class="s1">self.assertEqual(v1.elementwise() // s1</span><span class="s0">, </span><span class="s1">(v1.x // s1</span><span class="s0">, </span><span class="s1">v1.y // s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() ** s1</span><span class="s0">, </span><span class="s1">(v1.x**s1</span><span class="s0">, </span><span class="s1">v1.y**s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() % s1</span><span class="s0">, </span><span class="s1">(v1.x % s1</span><span class="s0">, </span><span class="s1">v1.y % s1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() &gt; s1</span><span class="s0">, </span><span class="s1">v1.x &gt; s1 </span><span class="s0">and </span><span class="s1">v1.y &gt; s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &lt; s1</span><span class="s0">, </span><span class="s1">v1.x &lt; s1 </span><span class="s0">and </span><span class="s1">v1.y &lt; s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() == s1</span><span class="s0">, </span><span class="s1">v1.x == s1 </span><span class="s0">and </span><span class="s1">v1.y == s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() != s1</span><span class="s0">, </span><span class="s1">s1 </span><span class="s0">not in </span><span class="s1">[v1.x</span><span class="s0">, </span><span class="s1">v1.y])</span>
        <span class="s1">self.assertEqual(v1.elementwise() &gt;= s1</span><span class="s0">, </span><span class="s1">v1.x &gt;= s1 </span><span class="s0">and </span><span class="s1">v1.y &gt;= s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &lt;= s1</span><span class="s0">, </span><span class="s1">v1.x &lt;= s1 </span><span class="s0">and </span><span class="s1">v1.y &lt;= s1)</span>
        <span class="s1">self.assertEqual(v1.elementwise() != s1</span><span class="s0">, </span><span class="s1">s1 </span><span class="s0">not in </span><span class="s1">[v1.x</span><span class="s0">, </span><span class="s1">v1.y])</span>
        <span class="s4"># behaviour for &quot;scalar op elementwise&quot;</span>
        <span class="s1">self.assertEqual(s1 + v1.elementwise()</span><span class="s0">, </span><span class="s1">(s1 + v1.x</span><span class="s0">, </span><span class="s1">s1 + v1.y))</span>
        <span class="s1">self.assertEqual(s1 - v1.elementwise()</span><span class="s0">, </span><span class="s1">(s1 - v1.x</span><span class="s0">, </span><span class="s1">s1 - v1.y))</span>
        <span class="s1">self.assertEqual(s1 * v1.elementwise()</span><span class="s0">, </span><span class="s1">(s1 * v1.x</span><span class="s0">, </span><span class="s1">s1 * v1.y))</span>
        <span class="s1">self.assertEqual(s1 / v1.elementwise()</span><span class="s0">, </span><span class="s1">(s1 / v1.x</span><span class="s0">, </span><span class="s1">s1 / v1.y))</span>
        <span class="s1">self.assertEqual(s1 // v1.elementwise()</span><span class="s0">, </span><span class="s1">(s1 // v1.x</span><span class="s0">, </span><span class="s1">s1 // v1.y))</span>
        <span class="s1">self.assertEqual(s1 ** v1.elementwise()</span><span class="s0">, </span><span class="s1">(s1**v1.x</span><span class="s0">, </span><span class="s1">s1**v1.y))</span>
        <span class="s1">self.assertEqual(s1 % v1.elementwise()</span><span class="s0">, </span><span class="s1">(s1 % v1.x</span><span class="s0">, </span><span class="s1">s1 % v1.y))</span>
        <span class="s1">self.assertEqual(s1 &lt; v1.elementwise()</span><span class="s0">, </span><span class="s1">s1 &lt; v1.x </span><span class="s0">and </span><span class="s1">s1 &lt; v1.y)</span>
        <span class="s1">self.assertEqual(s1 &gt; v1.elementwise()</span><span class="s0">, </span><span class="s1">s1 &gt; v1.x </span><span class="s0">and </span><span class="s1">s1 &gt; v1.y)</span>
        <span class="s1">self.assertEqual(s1 == v1.elementwise()</span><span class="s0">, </span><span class="s1">s1 == v1.x </span><span class="s0">and </span><span class="s1">s1 == v1.y)</span>
        <span class="s1">self.assertEqual(s1 != v1.elementwise()</span><span class="s0">, </span><span class="s1">s1 </span><span class="s0">not in </span><span class="s1">[v1.x</span><span class="s0">, </span><span class="s1">v1.y])</span>
        <span class="s1">self.assertEqual(s1 &lt;= v1.elementwise()</span><span class="s0">, </span><span class="s1">s1 &lt;= v1.x </span><span class="s0">and </span><span class="s1">s1 &lt;= v1.y)</span>
        <span class="s1">self.assertEqual(s1 &gt;= v1.elementwise()</span><span class="s0">, </span><span class="s1">s1 &gt;= v1.x </span><span class="s0">and </span><span class="s1">s1 &gt;= v1.y)</span>
        <span class="s1">self.assertEqual(s1 != v1.elementwise()</span><span class="s0">, </span><span class="s1">s1 </span><span class="s0">not in </span><span class="s1">[v1.x</span><span class="s0">, </span><span class="s1">v1.y])</span>

        <span class="s4"># behaviour for &quot;elementwise op vector&quot;</span>
        <span class="s1">self.assertEqual(type(v1.elementwise() * v2)</span><span class="s0">, </span><span class="s1">type(v1))</span>
        <span class="s1">self.assertEqual(v1.elementwise() + v2</span><span class="s0">, </span><span class="s1">v1 + v2)</span>
        <span class="s1">self.assertEqual(v1.elementwise() - v2</span><span class="s0">, </span><span class="s1">v1 - v2)</span>
        <span class="s1">self.assertEqual(v1.elementwise() * v2</span><span class="s0">, </span><span class="s1">(v1.x * v2.x</span><span class="s0">, </span><span class="s1">v1.y * v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() / v2</span><span class="s0">, </span><span class="s1">(v1.x / v2.x</span><span class="s0">, </span><span class="s1">v1.y / v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() // v2</span><span class="s0">, </span><span class="s1">(v1.x // v2.x</span><span class="s0">, </span><span class="s1">v1.y // v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() ** v2</span><span class="s0">, </span><span class="s1">(v1.x**v2.x</span><span class="s0">, </span><span class="s1">v1.y**v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() % v2</span><span class="s0">, </span><span class="s1">(v1.x % v2.x</span><span class="s0">, </span><span class="s1">v1.y % v2.y))</span>
        <span class="s1">self.assertEqual(v1.elementwise() &gt; v2</span><span class="s0">, </span><span class="s1">v1.x &gt; v2.x </span><span class="s0">and </span><span class="s1">v1.y &gt; v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &lt; v2</span><span class="s0">, </span><span class="s1">v1.x &lt; v2.x </span><span class="s0">and </span><span class="s1">v1.y &lt; v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &gt;= v2</span><span class="s0">, </span><span class="s1">v1.x &gt;= v2.x </span><span class="s0">and </span><span class="s1">v1.y &gt;= v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() &lt;= v2</span><span class="s0">, </span><span class="s1">v1.x &lt;= v2.x </span><span class="s0">and </span><span class="s1">v1.y &lt;= v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() == v2</span><span class="s0">, </span><span class="s1">v1.x == v2.x </span><span class="s0">and </span><span class="s1">v1.y == v2.y)</span>
        <span class="s1">self.assertEqual(v1.elementwise() != v2</span><span class="s0">, </span><span class="s1">v1.x != v2.x </span><span class="s0">and </span><span class="s1">v1.y != v2.y)</span>
        <span class="s4"># behaviour for &quot;vector op elementwise&quot;</span>
        <span class="s1">self.assertEqual(v2 + v1.elementwise()</span><span class="s0">, </span><span class="s1">v2 + v1)</span>
        <span class="s1">self.assertEqual(v2 - v1.elementwise()</span><span class="s0">, </span><span class="s1">v2 - v1)</span>
        <span class="s1">self.assertEqual(v2 * v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x * v1.x</span><span class="s0">, </span><span class="s1">v2.y * v1.y))</span>
        <span class="s1">self.assertEqual(v2 / v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x / v1.x</span><span class="s0">, </span><span class="s1">v2.y / v1.y))</span>
        <span class="s1">self.assertEqual(v2 // v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x // v1.x</span><span class="s0">, </span><span class="s1">v2.y // v1.y))</span>
        <span class="s1">self.assertEqual(v2 ** v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x**v1.x</span><span class="s0">, </span><span class="s1">v2.y**v1.y))</span>
        <span class="s1">self.assertEqual(v2 % v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x % v1.x</span><span class="s0">, </span><span class="s1">v2.y % v1.y))</span>
        <span class="s1">self.assertEqual(v2 &lt; v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x &lt; v1.x </span><span class="s0">and </span><span class="s1">v2.y &lt; v1.y)</span>
        <span class="s1">self.assertEqual(v2 &gt; v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x &gt; v1.x </span><span class="s0">and </span><span class="s1">v2.y &gt; v1.y)</span>
        <span class="s1">self.assertEqual(v2 &lt;= v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x &lt;= v1.x </span><span class="s0">and </span><span class="s1">v2.y &lt;= v1.y)</span>
        <span class="s1">self.assertEqual(v2 &gt;= v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x &gt;= v1.x </span><span class="s0">and </span><span class="s1">v2.y &gt;= v1.y)</span>
        <span class="s1">self.assertEqual(v2 == v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x == v1.x </span><span class="s0">and </span><span class="s1">v2.y == v1.y)</span>
        <span class="s1">self.assertEqual(v2 != v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x != v1.x </span><span class="s0">and </span><span class="s1">v2.y != v1.y)</span>

        <span class="s4"># behaviour for &quot;elementwise op elementwise&quot;</span>
        <span class="s1">self.assertEqual(v2.elementwise() + v1.elementwise()</span><span class="s0">, </span><span class="s1">v2 + v1)</span>
        <span class="s1">self.assertEqual(v2.elementwise() - v1.elementwise()</span><span class="s0">, </span><span class="s1">v2 - v1)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() * v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x * v1.x</span><span class="s0">, </span><span class="s1">v2.y * v1.y)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() / v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x / v1.x</span><span class="s0">, </span><span class="s1">v2.y / v1.y)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() // v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x // v1.x</span><span class="s0">, </span><span class="s1">v2.y // v1.y)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() ** v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x**v1.x</span><span class="s0">, </span><span class="s1">v2.y**v1.y)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() % v1.elementwise()</span><span class="s0">, </span><span class="s1">(v2.x % v1.x</span><span class="s0">, </span><span class="s1">v2.y % v1.y)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() &lt; v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x &lt; v1.x </span><span class="s0">and </span><span class="s1">v2.y &lt; v1.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() &gt; v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x &gt; v1.x </span><span class="s0">and </span><span class="s1">v2.y &gt; v1.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() &lt;= v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x &lt;= v1.x </span><span class="s0">and </span><span class="s1">v2.y &lt;= v1.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() &gt;= v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x &gt;= v1.x </span><span class="s0">and </span><span class="s1">v2.y &gt;= v1.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() == v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x == v1.x </span><span class="s0">and </span><span class="s1">v2.y == v1.y</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v2.elementwise() != v1.elementwise()</span><span class="s0">, </span><span class="s1">v2.x != v1.x </span><span class="s0">and </span><span class="s1">v2.y != v1.y</span>
        <span class="s1">)</span>

        <span class="s4"># other behaviour</span>
        <span class="s1">self.assertEqual(abs(v1.elementwise())</span><span class="s0">, </span><span class="s1">(abs(v1.x)</span><span class="s0">, </span><span class="s1">abs(v1.y)))</span>
        <span class="s1">self.assertEqual(-v1.elementwise()</span><span class="s0">, </span><span class="s1">-v1)</span>
        <span class="s1">self.assertEqual(+v1.elementwise()</span><span class="s0">, </span><span class="s1">+v1)</span>
        <span class="s1">self.assertEqual(bool(v1.elementwise())</span><span class="s0">, </span><span class="s1">bool(v1))</span>
        <span class="s1">self.assertEqual(bool(Vector2().elementwise())</span><span class="s0">, </span><span class="s1">bool(Vector2()))</span>
        <span class="s1">self.assertEqual(self.zeroVec.elementwise() ** </span><span class="s5">0</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: pow(Vector2(-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).elementwise()</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.elementwise() ** -</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.elementwise() ** -</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() / </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() // </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() % </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() / self.zeroVec</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() // self.zeroVec</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() % self.zeroVec</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">2 </span><span class="s1">/ self.zeroVec.elementwise())</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">2 </span><span class="s1">// self.zeroVec.elementwise())</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">2 </span><span class="s1">% self.zeroVec.elementwise())</span>

    <span class="s0">def </span><span class="s1">test_slerp(self):</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.slerp(self.v1</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.v1.slerp(self.zeroVec</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.slerp(self.zeroVec</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">))</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">steps = </span><span class="s5">10</span>
        <span class="s1">angle_step = v1.angle_to(v2) / steps</span>
        <span class="s0">for </span><span class="s1">i</span><span class="s0">, </span><span class="s1">u </span><span class="s0">in </span><span class="s1">((i</span><span class="s0">, </span><span class="s1">v1.slerp(v2</span><span class="s0">, </span><span class="s1">i / float(steps))) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(steps + </span><span class="s5">1</span><span class="s1">)):</span>
            <span class="s1">self.assertAlmostEqual(u.length()</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
            <span class="s1">self.assertAlmostEqual(v1.angle_to(u)</span><span class="s0">, </span><span class="s1">i * angle_step)</span>
        <span class="s1">self.assertEqual(u</span><span class="s0">, </span><span class="s1">v2)</span>

        <span class="s1">v1 = Vector2(</span><span class="s5">100</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s1">radial_factor = v2.length() / v1.length()</span>
        <span class="s0">for </span><span class="s1">i</span><span class="s0">, </span><span class="s1">u </span><span class="s0">in </span><span class="s1">((i</span><span class="s0">, </span><span class="s1">v1.slerp(v2</span><span class="s0">, </span><span class="s1">-i / float(steps))) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(steps + </span><span class="s5">1</span><span class="s1">)):</span>
            <span class="s1">self.assertAlmostEqual(</span>
                <span class="s1">u.length()</span><span class="s0">,</span>
                <span class="s1">(v2.length() - v1.length()) * (float(i) / steps) + v1.length()</span><span class="s0">,</span>
            <span class="s1">)</span>
        <span class="s1">self.assertEqual(u</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(v1.slerp(v1</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">v1)</span>
        <span class="s1">self.assertEqual(v2.slerp(v2</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: v1.slerp(-v1</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_lerp(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.lerp(v2</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">5</span><span class="s0">, </span><span class="s5">5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: v1.lerp(v2</span><span class="s0">, </span><span class="s5">2.5</span><span class="s1">))</span>

        <span class="s1">v1 = Vector2(-</span><span class="s5">10</span><span class="s0">, </span><span class="s1">-</span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">v2 = Vector2(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.lerp(v2</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">2.5</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_polar(self):</span>
        <span class="s1">v = Vector2()</span>
        <span class="s1">v.from_polar(self.v1.as_polar())</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s0">, </span><span class="s1">v)</span>
        <span class="s1">self.assertEqual(self.e1.as_polar()</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e2.as_polar()</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">90</span><span class="s1">))</span>
        <span class="s1">self.assertEqual((</span><span class="s5">2 </span><span class="s1">* self.e2).as_polar()</span><span class="s0">, </span><span class="s1">(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">90</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_polar((</span><span class="s0">None, None</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_polar(</span><span class="s2">&quot;ab&quot;</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_polar((</span><span class="s0">None, </span><span class="s5">1</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_polar((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_polar((</span><span class="s5">1</span><span class="s0">,</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_polar(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">v.from_polar((</span><span class="s5">0.5</span><span class="s0">, </span><span class="s5">90</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s5">0.5 </span><span class="s1">* self.e2)</span>
        <span class="s1">v.from_polar((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">self.e1)</span>

    <span class="s0">def </span><span class="s1">test_subclass_operation(self):</span>
        <span class="s0">class </span><span class="s1">Vector(pygame.math.Vector2):</span>
            <span class="s0">pass</span>

        <span class="s1">vec = Vector()</span>

        <span class="s1">vec_a = Vector(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">vec_b = Vector(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

        <span class="s1">vec_a + vec_b</span>
        <span class="s1">vec_a *= </span><span class="s5">2</span>

    <span class="s0">def </span><span class="s1">test_project_v2_onto_x_axis(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto x-axis, e.g. get the component pointing in the x-axis direction.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector2(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">x_axis = Vector2(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(x_axis)</span>

        <span class="s4"># assert</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertEqual(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">actual.y)</span>

    <span class="s0">def </span><span class="s1">test_project_v2_onto_y_axis(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto y-axis, e.g. get the component pointing in the y-axis direction.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector2(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">y_axis = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">100</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(y_axis)</span>

        <span class="s4"># assert</span>
        <span class="s1">self.assertEqual(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">actual.y)</span>

    <span class="s0">def </span><span class="s1">test_project_v2_onto_other(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto other vector.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector2(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">other = Vector2(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(other)</span>

        <span class="s4"># assert</span>
        <span class="s1">expected = v.dot(other) / other.dot(other) * other</span>
        <span class="s1">self.assertEqual(expected.x</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertEqual(expected.y</span><span class="s0">, </span><span class="s1">actual.y)</span>

    <span class="s0">def </span><span class="s1">test_project_v2_onto_other_as_tuple(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto other tuple as vector.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector2(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">other = Vector2(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(tuple(other))</span>

        <span class="s4"># assert</span>
        <span class="s1">expected = v.dot(other) / other.dot(other) * other</span>
        <span class="s1">self.assertEqual(expected.x</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertEqual(expected.y</span><span class="s0">, </span><span class="s1">actual.y)</span>

    <span class="s0">def </span><span class="s1">test_project_v2_onto_other_as_list(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto other list as vector.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector2(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">other = Vector2(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(list(other))</span>

        <span class="s4"># assert</span>
        <span class="s1">expected = v.dot(other) / other.dot(other) * other</span>
        <span class="s1">self.assertEqual(expected.x</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertEqual(expected.y</span><span class="s0">, </span><span class="s1">actual.y)</span>

    <span class="s0">def </span><span class="s1">test_project_v2_raises_if_other_has_zero_length(self):</span>
        <span class="s3">&quot;&quot;&quot;Check if exception is raise when projected on vector has zero length.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector2(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">other = Vector2(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s4"># act / assert</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v.project</span><span class="s0">, </span><span class="s1">other)</span>

    <span class="s0">def </span><span class="s1">test_project_v2_raises_if_other_is_not_iterable(self):</span>
        <span class="s3">&quot;&quot;&quot;Check if exception is raise when projected on vector is not iterable.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector2(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">other = </span><span class="s5">10</span>

        <span class="s4"># act / assert</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v.project</span><span class="s0">, </span><span class="s1">other)</span>

    <span class="s0">def </span><span class="s1">test_collection_abc(self):</span>
        <span class="s1">v = Vector2(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">Collection))</span>
        <span class="s1">self.assertFalse(isinstance(v</span><span class="s0">, </span><span class="s1">Sequence))</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v2_max(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">7</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">v2 = v1.clamp_magnitude(</span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">v3 = v1.clamp_magnitude(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s0">, </span><span class="s1">v3)</span>

        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>

        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>

        <span class="s1">expected_v2 = Vector2(</span><span class="s5">4.807619738204116</span><span class="s0">, </span><span class="s5">1.3736056394868903</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(expected_v2</span><span class="s0">, </span><span class="s1">v2)</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v2_min(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">v2 = v1.clamp_magnitude(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">expected_v2 = Vector2(</span><span class="s5">1.3416407864998738</span><span class="s0">, </span><span class="s5">2.6832815729997477</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(expected_v2</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(expected_v2</span><span class="s0">, </span><span class="s1">v1)</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v2_no_change(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s0">for </span><span class="s1">args </span><span class="s0">in </span><span class="s1">(</span>
            <span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">1.12</span><span class="s0">, </span><span class="s5">3.55</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">0.93</span><span class="s0">, </span><span class="s5">2.83</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">7.6</span><span class="s0">,</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">):</span>
            <span class="s0">with </span><span class="s1">self.subTest(args=args):</span>
                <span class="s1">v2 = v1.clamp_magnitude(*args)</span>
                <span class="s1">v1.clamp_magnitude_ip(*args)</span>
                <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>
                <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v2_edge_cases(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">v2 = v1.clamp_magnitude(</span><span class="s5">6</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>
        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">6</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertAlmostEqual(v1.length()</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>

        <span class="s1">v2 = v1.clamp_magnitude(</span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">Vector2())</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v2_errors(self):</span>
        <span class="s1">v1 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s0">for </span><span class="s1">invalid_args </span><span class="s0">in </span><span class="s1">(</span>
            <span class="s1">(</span><span class="s2">&quot;foo&quot;</span><span class="s0">, </span><span class="s2">&quot;bar&quot;</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">342.234</span><span class="s0">, </span><span class="s2">&quot;test&quot;</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">):</span>
            <span class="s0">with </span><span class="s1">self.subTest(invalid_args=invalid_args):</span>
                <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v1.clamp_magnitude</span><span class="s0">, </span><span class="s1">*invalid_args)</span>
                <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v1.clamp_magnitude_ip</span><span class="s0">, </span><span class="s1">*invalid_args)</span>

        <span class="s0">for </span><span class="s1">invalid_args </span><span class="s0">in </span><span class="s1">(</span>
            <span class="s1">(-</span><span class="s5">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span><span class="s0">,  </span><span class="s4"># min &gt; max</span>
            <span class="s1">(-</span><span class="s5">4</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(-</span><span class="s5">4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">):</span>
            <span class="s0">with </span><span class="s1">self.subTest(invalid_args=invalid_args):</span>
                <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v1.clamp_magnitude</span><span class="s0">, </span><span class="s1">*invalid_args)</span>
                <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v1.clamp_magnitude_ip</span><span class="s0">, </span><span class="s1">*invalid_args)</span>

        <span class="s4"># 0 vector</span>
        <span class="s1">v2 = Vector2()</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.clamp_magnitude</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.clamp_magnitude_ip</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_subclassing_v2(self):</span>
        <span class="s3">&quot;&quot;&quot;Check if Vector2 is subclassable&quot;&quot;&quot;</span>
        <span class="s1">v = Vector2(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s0">class </span><span class="s1">TestVector(Vector2):</span>
            <span class="s0">def </span><span class="s1">supermariobrosiscool(self):</span>
                <span class="s0">return </span><span class="s5">722</span>

        <span class="s1">other = TestVector(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(other.supermariobrosiscool()</span><span class="s0">, </span><span class="s5">722</span><span class="s1">)</span>
        <span class="s1">self.assertNotEqual(type(v)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertNotEqual(type(v)</span><span class="s0">, </span><span class="s1">type(other.copy()))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.reflect(v)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.lerp(v</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.slerp(v</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.rotate(</span><span class="s5">5</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.rotate_rad(</span><span class="s5">5</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.project(v)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.move_towards(v</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.clamp_magnitude(</span><span class="s5">5</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.clamp_magnitude(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.elementwise() + other))</span>

        <span class="s1">other1 = TestVector(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(type(other + other1)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertEqual(type(other - other1)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertEqual(type(other * </span><span class="s5">3</span><span class="s1">)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertEqual(type(other / </span><span class="s5">3</span><span class="s1">)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertEqual(type(other.elementwise() ** </span><span class="s5">3</span><span class="s1">)</span><span class="s0">, </span><span class="s1">TestVector)</span>


<span class="s0">class </span><span class="s1">Vector3TypeTest(unittest.TestCase):</span>
    <span class="s0">def </span><span class="s1">setUp(self):</span>
        <span class="s1">self.zeroVec = Vector3()</span>
        <span class="s1">self.e1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.e2 = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.e3 = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.t1 = (</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s5">9.6</span><span class="s1">)</span>
        <span class="s1">self.l1 = list(self.t1)</span>
        <span class="s1">self.v1 = Vector3(self.t1)</span>
        <span class="s1">self.t2 = (</span><span class="s5">5.6</span><span class="s0">, </span><span class="s5">7.8</span><span class="s0">, </span><span class="s5">2.1</span><span class="s1">)</span>
        <span class="s1">self.l2 = list(self.t2)</span>
        <span class="s1">self.v2 = Vector3(self.t2)</span>
        <span class="s1">self.s1 = </span><span class="s5">5.6</span>
        <span class="s1">self.s2 = </span><span class="s5">7.8</span>

    <span class="s0">def </span><span class="s1">testConstructionDefault(self):</span>
        <span class="s1">v = Vector3()</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionXYZ(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s5">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">9.6</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionTuple(self):</span>
        <span class="s1">v = Vector3((</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s5">9.6</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">9.6</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionList(self):</span>
        <span class="s1">v = Vector3([</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionVector3(self):</span>
        <span class="s1">v = Vector3(Vector3(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionScalar(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionScalarKeywords(self):</span>
        <span class="s1">v = Vector3(x=</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionKeywords(self):</span>
        <span class="s1">v = Vector3(x=</span><span class="s5">1</span><span class="s0">, </span><span class="s1">y=</span><span class="s5">2</span><span class="s0">, </span><span class="s1">z=</span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">2.0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">3.0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testConstructionMissing(self):</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">Vector3</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">Vector3</span><span class="s0">, </span><span class="s1">x=</span><span class="s5">1</span><span class="s0">, </span><span class="s1">y=</span><span class="s5">2</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testAttributeAccess(self):</span>
        <span class="s1">tmp = self.v1.x</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1.x)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">tmp = self.v1.y</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1.y)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">tmp = self.v1.z</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1.z)</span>
        <span class="s1">self.assertEqual(tmp</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">2</span><span class="s1">])</span>
        <span class="s1">self.v1.x = </span><span class="s5">3.141</span>
        <span class="s1">self.assertEqual(self.v1.x</span><span class="s0">, </span><span class="s5">3.141</span><span class="s1">)</span>
        <span class="s1">self.v1.y = </span><span class="s5">3.141</span>
        <span class="s1">self.assertEqual(self.v1.y</span><span class="s0">, </span><span class="s5">3.141</span><span class="s1">)</span>
        <span class="s1">self.v1.z = </span><span class="s5">3.141</span>
        <span class="s1">self.assertEqual(self.v1.z</span><span class="s0">, </span><span class="s5">3.141</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">assign_nonfloat():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v.x = </span><span class="s2">&quot;spam&quot;</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">assign_nonfloat)</span>

    <span class="s0">def </span><span class="s1">testCopy(self):</span>
        <span class="s1">v_copy0 = Vector3(</span><span class="s5">2014.0</span><span class="s0">, </span><span class="s5">2032.0</span><span class="s0">, </span><span class="s5">2076.0</span><span class="s1">)</span>
        <span class="s1">v_copy1 = v_copy0.copy()</span>
        <span class="s1">self.assertEqual(v_copy0.x</span><span class="s0">, </span><span class="s1">v_copy1.x)</span>
        <span class="s1">self.assertEqual(v_copy0.y</span><span class="s0">, </span><span class="s1">v_copy1.y)</span>
        <span class="s1">self.assertEqual(v_copy0.z</span><span class="s0">, </span><span class="s1">v_copy1.z)</span>

    <span class="s0">def </span><span class="s1">testSequence(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(len(v)</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s5">0</span><span class="s1">]</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[</span><span class="s5">2</span><span class="s1">]</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s0">, lambda</span><span class="s1">: v[</span><span class="s5">3</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s5">2</span><span class="s1">]</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v[-</span><span class="s5">3</span><span class="s1">]</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(IndexError</span><span class="s0">, lambda</span><span class="s1">: v[-</span><span class="s5">4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:]</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[</span><span class="s5">1</span><span class="s1">:]</span><span class="s0">, </span><span class="s1">[</span><span class="s5">3.4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1.2</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[:-</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v[</span><span class="s5">1</span><span class="s1">:</span><span class="s5">2</span><span class="s1">]</span><span class="s0">, </span><span class="s1">[</span><span class="s5">3.4</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(list(v)</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(tuple(v)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">))</span>
        <span class="s1">v[</span><span class="s5">0</span><span class="s1">] = </span><span class="s5">5.6</span>
        <span class="s1">v[</span><span class="s5">1</span><span class="s1">] = </span><span class="s5">7.8</span>
        <span class="s1">v[</span><span class="s5">2</span><span class="s1">] = -</span><span class="s5">2.1</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">5.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">7.8</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2.1</span><span class="s1">)</span>
        <span class="s1">v[:] = [</span><span class="s5">9.1</span><span class="s0">, </span><span class="s5">11.12</span><span class="s0">, </span><span class="s1">-</span><span class="s5">13.41</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">9.1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">11.12</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">13.41</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">overpopulate():</span>
            <span class="s1">v = Vector3()</span>
            <span class="s1">v[:] = [</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">]</span>

        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">overpopulate)</span>

        <span class="s0">def </span><span class="s1">underpopulate():</span>
            <span class="s1">v = Vector3()</span>
            <span class="s1">v[:] = [</span><span class="s5">1</span><span class="s1">]</span>

        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">underpopulate)</span>

        <span class="s0">def </span><span class="s1">assign_nonfloat():</span>
            <span class="s1">v = Vector2()</span>
            <span class="s1">v[</span><span class="s5">0</span><span class="s1">] = </span><span class="s2">&quot;spam&quot;</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">assign_nonfloat)</span>

    <span class="s0">def </span><span class="s1">testExtendedSlicing(self):</span>
        <span class="s4">#  deletion</span>
        <span class="s0">def </span><span class="s1">delSlice(vec</span><span class="s0">, </span><span class="s1">start=</span><span class="s0">None, </span><span class="s1">stop=</span><span class="s0">None, </span><span class="s1">step=</span><span class="s0">None</span><span class="s1">):</span>
            <span class="s0">if </span><span class="s1">start </span><span class="s0">is not None and </span><span class="s1">stop </span><span class="s0">is not None and </span><span class="s1">step </span><span class="s0">is not None</span><span class="s1">:</span>
                <span class="s0">del </span><span class="s1">vec[start:stop:step]</span>
            <span class="s0">elif </span><span class="s1">start </span><span class="s0">is not None and </span><span class="s1">stop </span><span class="s0">is None and </span><span class="s1">step </span><span class="s0">is not None</span><span class="s1">:</span>
                <span class="s0">del </span><span class="s1">vec[start::step]</span>
            <span class="s0">elif </span><span class="s1">start </span><span class="s0">is None and </span><span class="s1">stop </span><span class="s0">is None and </span><span class="s1">step </span><span class="s0">is not None</span><span class="s1">:</span>
                <span class="s0">del </span><span class="s1">vec[::step]</span>

        <span class="s1">v = Vector3(self.v1)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">delSlice</span><span class="s0">, </span><span class="s1">v</span><span class="s0">, None, None, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">delSlice</span><span class="s0">, </span><span class="s1">v</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, None, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">delSlice</span><span class="s0">, </span><span class="s1">v</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

        <span class="s4">#  assignment</span>
        <span class="s1">v = Vector3(self.v1)</span>
        <span class="s1">v[::</span><span class="s5">2</span><span class="s1">] = [-</span><span class="s5">1.1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2.2</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">[-</span><span class="s5">1.1</span><span class="s0">, </span><span class="s1">self.v1.y</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2.2</span><span class="s1">])</span>
        <span class="s1">v = Vector3(self.v1)</span>
        <span class="s1">v[::-</span><span class="s5">2</span><span class="s1">] = [</span><span class="s5">10</span><span class="s0">, </span><span class="s5">20</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">[</span><span class="s5">20</span><span class="s0">, </span><span class="s1">self.v1.y</span><span class="s0">, </span><span class="s5">10</span><span class="s1">])</span>
        <span class="s1">v = Vector3(self.v1)</span>
        <span class="s1">v[::-</span><span class="s5">1</span><span class="s1">] = v</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">[self.v1.z</span><span class="s0">, </span><span class="s1">self.v1.y</span><span class="s0">, </span><span class="s1">self.v1.x])</span>
        <span class="s1">a = Vector3(self.v1)</span>
        <span class="s1">b = Vector3(self.v1)</span>
        <span class="s1">c = Vector3(self.v1)</span>
        <span class="s1">a[</span><span class="s5">1</span><span class="s1">:</span><span class="s5">2</span><span class="s1">] = [</span><span class="s5">2.2</span><span class="s1">]</span>
        <span class="s1">b[slice(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)] = [</span><span class="s5">2.2</span><span class="s1">]</span>
        <span class="s1">c[</span><span class="s5">1</span><span class="s1">:</span><span class="s5">2</span><span class="s1">:] = (</span><span class="s5">2.2</span><span class="s0">,</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(a</span><span class="s0">, </span><span class="s1">b)</span>
        <span class="s1">self.assertEqual(a</span><span class="s0">, </span><span class="s1">c)</span>
        <span class="s1">self.assertEqual(type(a)</span><span class="s0">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(type(b)</span><span class="s0">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(type(c)</span><span class="s0">, </span><span class="s1">type(self.v1))</span>

    <span class="s0">def </span><span class="s1">test_contains(self):</span>
        <span class="s1">c = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s4"># call __contains__ explicitly to test that it is defined</span>
        <span class="s1">self.assertTrue(c.__contains__(</span><span class="s5">0</span><span class="s1">))</span>
        <span class="s1">self.assertTrue(</span><span class="s5">0 </span><span class="s0">in </span><span class="s1">c)</span>
        <span class="s1">self.assertTrue(</span><span class="s5">1 </span><span class="s0">in </span><span class="s1">c)</span>
        <span class="s1">self.assertTrue(</span><span class="s5">2 </span><span class="s0">in </span><span class="s1">c)</span>
        <span class="s1">self.assertTrue(</span><span class="s5">3 </span><span class="s0">not in </span><span class="s1">c)</span>
        <span class="s1">self.assertFalse(c.__contains__(</span><span class="s5">10</span><span class="s1">))</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s2">&quot;string&quot; </span><span class="s0">in </span><span class="s1">c)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">3 </span><span class="s1">+ </span><span class="s5">4j </span><span class="s0">in </span><span class="s1">c)</span>

    <span class="s0">def </span><span class="s1">testAdd(self):</span>
        <span class="s1">v3 = self.v1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y + self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.v1.z + self.v2.z)</span>
        <span class="s1">v3 = self.v1 + self.t2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x + self.t2[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y + self.t2[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.v1.z + self.t2[</span><span class="s5">2</span><span class="s1">])</span>
        <span class="s1">v3 = self.v1 + self.l2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x + self.l2[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y + self.l2[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.v1.z + self.l2[</span><span class="s5">2</span><span class="s1">])</span>
        <span class="s1">v3 = self.t1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">0</span><span class="s1">] + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">1</span><span class="s1">] + self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">2</span><span class="s1">] + self.v2.z)</span>
        <span class="s1">v3 = self.l1 + self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">0</span><span class="s1">] + self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">1</span><span class="s1">] + self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">2</span><span class="s1">] + self.v2.z)</span>

    <span class="s0">def </span><span class="s1">testSub(self):</span>
        <span class="s1">v3 = self.v1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y - self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.v1.z - self.v2.z)</span>
        <span class="s1">v3 = self.v1 - self.t2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x - self.t2[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y - self.t2[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.v1.z - self.t2[</span><span class="s5">2</span><span class="s1">])</span>
        <span class="s1">v3 = self.v1 - self.l2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.v1.x - self.l2[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.v1.y - self.l2[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.v1.z - self.l2[</span><span class="s5">2</span><span class="s1">])</span>
        <span class="s1">v3 = self.t1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">0</span><span class="s1">] - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">1</span><span class="s1">] - self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.t1[</span><span class="s5">2</span><span class="s1">] - self.v2.z)</span>
        <span class="s1">v3 = self.l1 - self.v2</span>
        <span class="s1">self.assertTrue(isinstance(v3</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">0</span><span class="s1">] - self.v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">1</span><span class="s1">] - self.v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">2</span><span class="s1">] - self.v2.z)</span>

    <span class="s0">def </span><span class="s1">testScalarMultiplication(self):</span>
        <span class="s1">v = self.s1 * self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">self.s1 * self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">self.s1 * self.v1.y)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">self.s1 * self.v1.z)</span>
        <span class="s1">v = self.v1 * self.s2</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">self.v1.x * self.s2)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">self.v1.y * self.s2)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">self.v1.z * self.s2)</span>

    <span class="s0">def </span><span class="s1">testScalarDivision(self):</span>
        <span class="s1">v = self.v1 / self.s1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s0">, </span><span class="s1">self.v1.x / self.s1)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s0">, </span><span class="s1">self.v1.y / self.s1)</span>
        <span class="s1">self.assertAlmostEqual(v.z</span><span class="s0">, </span><span class="s1">self.v1.z / self.s1)</span>
        <span class="s1">v = self.v1 // self.s2</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">self.v1.x // self.s2)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">self.v1.y // self.s2)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">self.v1.z // self.s2)</span>

    <span class="s0">def </span><span class="s1">testBool(self):</span>
        <span class="s1">self.assertEqual(bool(self.zeroVec)</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(bool(self.v1)</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(</span><span class="s0">not </span><span class="s1">self.zeroVec)</span>
        <span class="s1">self.assertTrue(self.v1)</span>

    <span class="s0">def </span><span class="s1">testUnary(self):</span>
        <span class="s1">v = +self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">self.v1.y)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">self.v1.z)</span>
        <span class="s1">self.assertNotEqual(id(v)</span><span class="s0">, </span><span class="s1">id(self.v1))</span>
        <span class="s1">v = -self.v1</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">type(self.v1)))</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">-self.v1.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">-self.v1.y)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">-self.v1.z)</span>
        <span class="s1">self.assertNotEqual(id(v)</span><span class="s0">, </span><span class="s1">id(self.v1))</span>

    <span class="s0">def </span><span class="s1">testCompare(self):</span>
        <span class="s1">int_vec = Vector3(</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s0">, </span><span class="s5">13</span><span class="s1">)</span>
        <span class="s1">flt_vec = Vector3(</span><span class="s5">3.0</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">13.0</span><span class="s1">)</span>
        <span class="s1">zero_vec = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == flt_vec</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != flt_vec</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != zero_vec</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(flt_vec == zero_vec</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == (</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s0">, </span><span class="s5">13</span><span class="s1">)</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != (</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s0">, </span><span class="s5">13</span><span class="s1">)</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != [</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">]</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == [</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">]</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != </span><span class="s5">5</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == </span><span class="s5">5</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec != [</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">]</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(int_vec == [</span><span class="s5">3</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">]</span><span class="s0">, False</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testStr(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s5">5.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(str(v)</span><span class="s0">, </span><span class="s2">&quot;[1.2, 3.4, 5.6]&quot;</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">testRepr(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1.2</span><span class="s0">, </span><span class="s5">3.4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">9.6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.__repr__()</span><span class="s0">, </span><span class="s2">&quot;&lt;Vector3(1.2, 3.4, -9.6)&gt;&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">Vector3(v.__repr__()))</span>

    <span class="s0">def </span><span class="s1">testIter(self):</span>
        <span class="s1">it = self.v1.__iter__()</span>
        <span class="s1">next_ = it.__next__</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(next_()</span><span class="s0">, </span><span class="s1">self.v1[</span><span class="s5">2</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(StopIteration</span><span class="s0">, lambda</span><span class="s1">: next_())</span>
        <span class="s1">it1 = self.v1.__iter__()</span>
        <span class="s1">it2 = self.v1.__iter__()</span>
        <span class="s1">self.assertNotEqual(id(it1)</span><span class="s0">, </span><span class="s1">id(it2))</span>
        <span class="s1">self.assertEqual(id(it1)</span><span class="s0">, </span><span class="s1">id(it1.__iter__()))</span>
        <span class="s1">self.assertEqual(list(it1)</span><span class="s0">, </span><span class="s1">list(it2))</span>
        <span class="s1">self.assertEqual(list(self.v1.__iter__())</span><span class="s0">, </span><span class="s1">self.l1)</span>
        <span class="s1">idx = </span><span class="s5">0</span>
        <span class="s0">for </span><span class="s1">val </span><span class="s0">in </span><span class="s1">self.v1:</span>
            <span class="s1">self.assertEqual(val</span><span class="s0">, </span><span class="s1">self.v1[idx])</span>
            <span class="s1">idx += </span><span class="s5">1</span>

    <span class="s0">def </span><span class="s1">test_rotate(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">axis = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s5">90</span><span class="s0">, </span><span class="s1">axis)</span>
        <span class="s1">v3 = v1.rotate(</span><span class="s5">90 </span><span class="s1">+ </span><span class="s5">360</span><span class="s0">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s1">v1 = Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(-</span><span class="s5">90</span><span class="s0">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s5">360</span><span class="s0">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s1">v2 = v1.rotate(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s4"># issue 214</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).rotate(</span><span class="s5">359.9999999</span><span class="s0">, </span><span class="s1">Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span><span class="s0">, </span><span class="s1">Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_rotate_rad(self):</span>
        <span class="s1">axis = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">tests = (</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi / </span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">-math.pi / </span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi / </span><span class="s5">4</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s0">for </span><span class="s1">initialVec</span><span class="s0">, </span><span class="s1">radians </span><span class="s0">in </span><span class="s1">tests:</span>
            <span class="s1">vec = Vector3(initialVec).rotate_rad(radians</span><span class="s0">, </span><span class="s1">axis)</span>
            <span class="s1">self.assertEqual(vec</span><span class="s0">, </span><span class="s1">(math.cos(radians)</span><span class="s0">, </span><span class="s1">math.sin(radians)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_rotate_ip(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">axis = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_ip(</span><span class="s5">90</span><span class="s0">, </span><span class="s1">axis)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v = Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_ip(-</span><span class="s5">90</span><span class="s0">, </span><span class="s1">axis)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_rotate_rad_ip(self):</span>
        <span class="s1">axis = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">tests = (</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi / </span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">-math.pi / </span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span><span class="s0">, </span><span class="s1">math.pi / </span><span class="s5">4</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s0">for </span><span class="s1">initialVec</span><span class="s0">, </span><span class="s1">radians </span><span class="s0">in </span><span class="s1">tests:</span>
            <span class="s1">vec = Vector3(initialVec)</span>
            <span class="s1">vec.rotate_rad_ip(radians</span><span class="s0">, </span><span class="s1">axis)</span>
            <span class="s1">self.assertEqual(vec</span><span class="s0">, </span><span class="s1">(math.cos(radians)</span><span class="s0">, </span><span class="s1">math.sin(radians)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_rotate_x(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_x(</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">v3 = v1.rotate_x(</span><span class="s5">90 </span><span class="s1">+ </span><span class="s5">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v3.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s1">v1 = Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_x(-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.y</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.z</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_x(</span><span class="s5">360</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertAlmostEqual(v1.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s1">v2 = v1.rotate_x(</span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertAlmostEqual(v1.z</span><span class="s0">, </span><span class="s1">v2.z)</span>

    <span class="s0">def </span><span class="s1">test_rotate_x_rad(self):</span>
        <span class="s1">vec = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">result = vec.rotate_x_rad(math.pi / </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(result</span><span class="s0">, </span><span class="s1">(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_rotate_x_ip(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_x_ip(</span><span class="s5">90</span><span class="s1">)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v = Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_x_ip(-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.z</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_rotate_x_rad_ip(self):</span>
        <span class="s1">vec = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">vec.rotate_x_rad_ip(math.pi / </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(vec</span><span class="s0">, </span><span class="s1">(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_rotate_y(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_y(</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">v3 = v1.rotate_y(</span><span class="s5">90 </span><span class="s1">+ </span><span class="s5">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.x</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v3.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v3.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertAlmostEqual(v3.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s1">v1 = Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_y(-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.y</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_y(</span><span class="s5">360</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertAlmostEqual(v1.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s1">v2 = v1.rotate_y(</span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s1">v2.z)</span>

    <span class="s0">def </span><span class="s1">test_rotate_y_rad(self):</span>
        <span class="s1">vec = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">result = vec.rotate_y_rad(math.pi / </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(result</span><span class="s0">, </span><span class="s1">(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_rotate_y_ip(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_y_ip(</span><span class="s5">90</span><span class="s1">)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v = Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_y_ip(-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_rotate_y_rad_ip(self):</span>
        <span class="s1">vec = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">vec.rotate_y_rad_ip(math.pi / </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(vec</span><span class="s0">, </span><span class="s1">(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_rotate_z(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_z(</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">v3 = v1.rotate_z(</span><span class="s5">90 </span><span class="s1">+ </span><span class="s5">360</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.x</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.y</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.x</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v3.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v3.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v3.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s1">v1 = Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_z(-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v2.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.z</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.rotate_z(</span><span class="s5">360</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s1">v2.z)</span>
        <span class="s1">v2 = v1.rotate_z(</span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v1.x</span><span class="s0">, </span><span class="s1">v2.x)</span>
        <span class="s1">self.assertAlmostEqual(v1.y</span><span class="s0">, </span><span class="s1">v2.y)</span>
        <span class="s1">self.assertEqual(v1.z</span><span class="s0">, </span><span class="s1">v2.z)</span>

    <span class="s0">def </span><span class="s1">test_rotate_z_rad(self):</span>
        <span class="s1">vec = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">result = vec.rotate_z_rad(math.pi / </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(result</span><span class="s0">, </span><span class="s1">(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_rotate_z_ip(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.rotate_z_ip(</span><span class="s5">90</span><span class="s1">)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v = Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v.rotate_z_ip(-</span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(v.y</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_rotate_z_rad_ip(self):</span>
        <span class="s1">vec = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">vec.rotate_z_rad_ip(math.pi / </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(vec</span><span class="s0">, </span><span class="s1">(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_normalize(self):</span>
        <span class="s1">v = self.v1.normalize()</span>
        <span class="s4"># length is 1</span>
        <span class="s1">self.assertAlmostEqual(v.x * v.x + v.y * v.y + v.z * v.z</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s4"># v1 is unchanged</span>
        <span class="s1">self.assertEqual(self.v1.x</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.y</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertEqual(self.v1.z</span><span class="s0">, </span><span class="s1">self.l1[</span><span class="s5">2</span><span class="s1">])</span>
        <span class="s4"># v2 is parallel to v1 (tested via cross product)</span>
        <span class="s1">cross = (</span>
            <span class="s1">(self.v1.y * v.z - self.v1.z * v.y) ** </span><span class="s5">2</span>
            <span class="s1">+ (self.v1.z * v.x - self.v1.x * v.z) ** </span><span class="s5">2</span>
            <span class="s1">+ (self.v1.x * v.y - self.v1.y * v.x) ** </span><span class="s5">2</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(cross</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.normalize())</span>

    <span class="s0">def </span><span class="s1">test_normalize_ip(self):</span>
        <span class="s1">v = +self.v1</span>
        <span class="s4"># v has length != 1 before normalizing</span>
        <span class="s1">self.assertNotEqual(v.x * v.x + v.y * v.y + v.z * v.z</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s4"># inplace operations should return None</span>
        <span class="s1">self.assertEqual(v.normalize_ip()</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s4"># length is 1</span>
        <span class="s1">self.assertAlmostEqual(v.x * v.x + v.y * v.y + v.z * v.z</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span>
        <span class="s4"># v2 is parallel to v1 (tested via cross product)</span>
        <span class="s1">cross = (</span>
            <span class="s1">(self.v1.y * v.z - self.v1.z * v.y) ** </span><span class="s5">2</span>
            <span class="s1">+ (self.v1.z * v.x - self.v1.x * v.z) ** </span><span class="s5">2</span>
            <span class="s1">+ (self.v1.x * v.y - self.v1.y * v.x) ** </span><span class="s5">2</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(cross</span><span class="s0">, </span><span class="s5">0.0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.normalize_ip())</span>

    <span class="s0">def </span><span class="s1">test_is_normalized(self):</span>
        <span class="s1">self.assertEqual(self.v1.is_normalized()</span><span class="s0">, False</span><span class="s1">)</span>
        <span class="s1">v = self.v1.normalize()</span>
        <span class="s1">self.assertEqual(v.is_normalized()</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.e2.is_normalized()</span><span class="s0">, True</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.is_normalized()</span><span class="s0">, False</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_cross(self):</span>
        <span class="s0">def </span><span class="s1">cross(a</span><span class="s0">, </span><span class="s1">b):</span>
            <span class="s0">return </span><span class="s1">Vector3(</span>
                <span class="s1">a[</span><span class="s5">1</span><span class="s1">] * b[</span><span class="s5">2</span><span class="s1">] - a[</span><span class="s5">2</span><span class="s1">] * b[</span><span class="s5">1</span><span class="s1">]</span><span class="s0">,</span>
                <span class="s1">a[</span><span class="s5">2</span><span class="s1">] * b[</span><span class="s5">0</span><span class="s1">] - a[</span><span class="s5">0</span><span class="s1">] * b[</span><span class="s5">2</span><span class="s1">]</span><span class="s0">,</span>
                <span class="s1">a[</span><span class="s5">0</span><span class="s1">] * b[</span><span class="s5">1</span><span class="s1">] - a[</span><span class="s5">1</span><span class="s1">] * b[</span><span class="s5">0</span><span class="s1">]</span><span class="s0">,</span>
            <span class="s1">)</span>

        <span class="s1">self.assertEqual(self.v1.cross(self.v2)</span><span class="s0">, </span><span class="s1">cross(self.v1</span><span class="s0">, </span><span class="s1">self.v2))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.l2)</span><span class="s0">, </span><span class="s1">cross(self.v1</span><span class="s0">, </span><span class="s1">self.l2))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.t2)</span><span class="s0">, </span><span class="s1">cross(self.v1</span><span class="s0">, </span><span class="s1">self.t2))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v2)</span><span class="s0">, </span><span class="s1">-self.v2.cross(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.cross(self.v1)</span><span class="s0">, </span><span class="s1">self.zeroVec)</span>

    <span class="s0">def </span><span class="s1">test_dot(self):</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.dot(self.v2)</span><span class="s0">,</span>
            <span class="s1">self.v1.x * self.v2.x + self.v1.y * self.v2.y + self.v1.z * self.v2.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.dot(self.l2)</span><span class="s0">,</span>
            <span class="s1">self.v1.x * self.l2[</span><span class="s5">0</span><span class="s1">] + self.v1.y * self.l2[</span><span class="s5">1</span><span class="s1">] + self.v1.z * self.l2[</span><span class="s5">2</span><span class="s1">]</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.dot(self.t2)</span><span class="s0">,</span>
            <span class="s1">self.v1.x * self.t2[</span><span class="s5">0</span><span class="s1">] + self.v1.y * self.t2[</span><span class="s5">1</span><span class="s1">] + self.v1.z * self.t2[</span><span class="s5">2</span><span class="s1">]</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.v2)</span><span class="s0">, </span><span class="s1">self.v2.dot(self.v1))</span>
        <span class="s1">self.assertAlmostEqual(self.v1.dot(self.v2)</span><span class="s0">, </span><span class="s1">self.v1 * self.v2)</span>

    <span class="s0">def </span><span class="s1">test_angle_to(self):</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).angle_to((-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span><span class="s0">, </span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).angle_to((</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">))</span><span class="s0">, </span><span class="s5">90</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).angle_to((-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span><span class="s0">, </span><span class="s5">135</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(abs(Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).angle_to((-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s1">)))</span><span class="s0">, </span><span class="s5">180</span><span class="s1">)</span>
        <span class="s4"># if we rotate v1 by the angle_to v2 around their cross product</span>
        <span class="s4"># we should look in the same direction</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.rotate(</span>
                <span class="s1">self.v1.angle_to(self.v2)</span><span class="s0">, </span><span class="s1">self.v1.cross(self.v2)</span>
            <span class="s1">).normalize()</span><span class="s0">,</span>
            <span class="s1">self.v2.normalize()</span><span class="s0">,</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_scale_to_length(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v.scale_to_length(</span><span class="s5">2.5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">Vector3(</span><span class="s5">2.5</span><span class="s0">, </span><span class="s5">2.5</span><span class="s0">, </span><span class="s5">2.5</span><span class="s1">) / math.sqrt(</span><span class="s5">3</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.scale_to_length(</span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.scale_to_length(</span><span class="s5">0</span><span class="s1">)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">self.zeroVec)</span>

    <span class="s0">def </span><span class="s1">test_length(self):</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s0">, </span><span class="s5">5</span><span class="s1">).length()</span><span class="s0">, </span><span class="s1">math.sqrt(</span><span class="s5">3 </span><span class="s1">* </span><span class="s5">3 </span><span class="s1">+ </span><span class="s5">4 </span><span class="s1">* </span><span class="s5">4 </span><span class="s1">+ </span><span class="s5">5 </span><span class="s1">* </span><span class="s5">5</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(Vector3(-</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s0">, </span><span class="s5">5</span><span class="s1">).length()</span><span class="s0">, </span><span class="s1">math.sqrt(-</span><span class="s5">3 </span><span class="s1">* -</span><span class="s5">3 </span><span class="s1">+ </span><span class="s5">4 </span><span class="s1">* </span><span class="s5">4 </span><span class="s1">+ </span><span class="s5">5 </span><span class="s1">* </span><span class="s5">5</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.zeroVec.length()</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_length_squared(self):</span>
        <span class="s1">self.assertEqual(Vector3(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s0">, </span><span class="s5">5</span><span class="s1">).length_squared()</span><span class="s0">, </span><span class="s5">3 </span><span class="s1">* </span><span class="s5">3 </span><span class="s1">+ </span><span class="s5">4 </span><span class="s1">* </span><span class="s5">4 </span><span class="s1">+ </span><span class="s5">5 </span><span class="s1">* </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(Vector3(-</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s0">, </span><span class="s5">5</span><span class="s1">).length_squared()</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3 </span><span class="s1">* -</span><span class="s5">3 </span><span class="s1">+ </span><span class="s5">4 </span><span class="s1">* </span><span class="s5">4 </span><span class="s1">+ </span><span class="s5">5 </span><span class="s1">* </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.zeroVec.length_squared()</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_reflect(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">n = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v.reflect(n)</span><span class="s0">, </span><span class="s1">Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v.reflect(</span><span class="s5">3 </span><span class="s1">* n)</span><span class="s0">, </span><span class="s1">v.reflect(n))</span>
        <span class="s1">self.assertEqual(v.reflect(-v)</span><span class="s0">, </span><span class="s1">-v)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: v.reflect(self.zeroVec))</span>

    <span class="s0">def </span><span class="s1">test_reflect_ip(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = Vector3(v1)</span>
        <span class="s1">n = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2.reflect_ip(n)</span><span class="s0">, None</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s0">, </span><span class="s1">Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">v2 = Vector3(v1)</span>
        <span class="s1">v2.reflect_ip(</span><span class="s5">3 </span><span class="s1">* n)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s0">, </span><span class="s1">v1.reflect(n))</span>
        <span class="s1">v2 = Vector3(v1)</span>
        <span class="s1">v2.reflect_ip(-v1)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s0">, </span><span class="s1">-v1)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: v2.reflect_ip(self.zeroVec))</span>

    <span class="s0">def </span><span class="s1">test_distance_to(self):</span>
        <span class="s1">diff = self.v1 - self.v2</span>
        <span class="s1">self.assertEqual(self.e1.distance_to(self.e2)</span><span class="s0">, </span><span class="s1">math.sqrt(</span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e1.distance_to((</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span><span class="s0">, </span><span class="s1">math.sqrt(</span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e1.distance_to([</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">])</span><span class="s0">, </span><span class="s1">math.sqrt(</span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_to(self.v2)</span><span class="s0">,</span>
            <span class="s1">math.sqrt(diff.x * diff.x + diff.y * diff.y + diff.z * diff.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_to(self.t2)</span><span class="s0">,</span>
            <span class="s1">math.sqrt(diff.x * diff.x + diff.y * diff.y + diff.z * diff.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_to(self.l2)</span><span class="s0">,</span>
            <span class="s1">math.sqrt(diff.x * diff.x + diff.y * diff.y + diff.z * diff.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.t1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.l1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.v2)</span><span class="s0">, </span><span class="s1">self.v2.distance_to(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.t2)</span><span class="s0">, </span><span class="s1">self.v2.distance_to(self.t1))</span>
        <span class="s1">self.assertEqual(self.v1.distance_to(self.l2)</span><span class="s0">, </span><span class="s1">self.v2.distance_to(self.l1))</span>

    <span class="s0">def </span><span class="s1">test_distance_to_exceptions(self):</span>
        <span class="s1">v2 = Vector2(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s1">v3 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

        <span class="s4"># illegal distance Vector3-Vector2 / Vector2-Vector3</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">v3)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v3.distance_to</span><span class="s0">, </span><span class="s1">v2)</span>

        <span class="s4"># distance to illegal tuple/list positions</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">,</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ValueError</span><span class="s0">,</span>
            <span class="s1">v2.distance_to</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s5">1</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s4"># vec3</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v3.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v3.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">,</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v3.distance_to</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ValueError</span><span class="s0">,</span>
            <span class="s1">v3.distance_to</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s5">1</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s4"># illegal types as positions</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s2">&quot;hello&quot;</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">([]</span><span class="s0">, </span><span class="s1">[]))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">&quot;hello&quot;</span><span class="s0">,</span><span class="s1">)))</span>

        <span class="s4"># illegal args number</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v2.distance_to)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v2.distance_to</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_distance_squared_to_exceptions(self):</span>
        <span class="s1">v2 = Vector2(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s1">v3 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">dist_t = v2.distance_squared_to</span>
        <span class="s1">dist_t3 = v3.distance_squared_to</span>
        <span class="s4"># illegal distance Vector3-Vector2 / Vector2-Vector3</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">v3)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t3</span><span class="s0">, </span><span class="s1">v2)</span>

        <span class="s4"># distance to illegal tuple/list positions</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">,</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ValueError</span><span class="s0">,</span>
            <span class="s1">dist_t</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s5">1</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s4"># vec3</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t3</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t3</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">,</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">dist_t3</span><span class="s0">, </span><span class="s1">[</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">])</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ValueError</span><span class="s0">,</span>
            <span class="s1">dist_t3</span><span class="s0">,</span>
            <span class="s1">[</span>
                <span class="s5">1</span><span class="s0">,</span>
            <span class="s1">]</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s4"># illegal types as positions</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s2">&quot;hello&quot;</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">([]</span><span class="s0">, </span><span class="s1">[]))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s1">(</span><span class="s2">&quot;hello&quot;</span><span class="s0">,</span><span class="s1">)))</span>

        <span class="s4"># illegal args number</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">dist_t)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">dist_t</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_distance_squared_to(self):</span>
        <span class="s1">diff = self.v1 - self.v2</span>
        <span class="s1">self.assertEqual(self.e1.distance_squared_to(self.e2)</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.e1.distance_squared_to((</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.e1.distance_squared_to([</span><span class="s5">0</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">])</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.v2)</span><span class="s0">,</span>
            <span class="s1">diff.x * diff.x + diff.y * diff.y + diff.z * diff.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.t2)</span><span class="s0">,</span>
            <span class="s1">diff.x * diff.x + diff.y * diff.y + diff.z * diff.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertAlmostEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.l2)</span><span class="s0">,</span>
            <span class="s1">diff.x * diff.x + diff.y * diff.y + diff.z * diff.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.v1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.t1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(self.v1.distance_squared_to(self.l1)</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.v2)</span><span class="s0">, </span><span class="s1">self.v2.distance_squared_to(self.v1)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.t2)</span><span class="s0">, </span><span class="s1">self.v2.distance_squared_to(self.t1)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.distance_squared_to(self.l2)</span><span class="s0">, </span><span class="s1">self.v2.distance_squared_to(self.l1)</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_swizzle(self):</span>
        <span class="s1">self.assertEqual(self.v1.yxz</span><span class="s0">, </span><span class="s1">(self.v1.y</span><span class="s0">, </span><span class="s1">self.v1.x</span><span class="s0">, </span><span class="s1">self.v1.z))</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.xxyyzzxyz</span><span class="s0">,</span>
            <span class="s1">(</span>
                <span class="s1">self.v1.x</span><span class="s0">,</span>
                <span class="s1">self.v1.x</span><span class="s0">,</span>
                <span class="s1">self.v1.y</span><span class="s0">,</span>
                <span class="s1">self.v1.y</span><span class="s0">,</span>
                <span class="s1">self.v1.z</span><span class="s0">,</span>
                <span class="s1">self.v1.z</span><span class="s0">,</span>
                <span class="s1">self.v1.x</span><span class="s0">,</span>
                <span class="s1">self.v1.y</span><span class="s0">,</span>
                <span class="s1">self.v1.z</span><span class="s0">,</span>
            <span class="s1">)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.v1.xyz = self.t2</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s0">, </span><span class="s1">self.t2)</span>
        <span class="s1">self.v1.zxy = self.t2</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s0">, </span><span class="s1">(self.t2[</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">self.t2[</span><span class="s5">2</span><span class="s1">]</span><span class="s0">, </span><span class="s1">self.t2[</span><span class="s5">0</span><span class="s1">]))</span>
        <span class="s1">self.v1.yz = self.t2[:</span><span class="s5">2</span><span class="s1">]</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s0">, </span><span class="s1">(self.t2[</span><span class="s5">1</span><span class="s1">]</span><span class="s0">, </span><span class="s1">self.t2[</span><span class="s5">0</span><span class="s1">]</span><span class="s0">, </span><span class="s1">self.t2[</span><span class="s5">1</span><span class="s1">]))</span>
        <span class="s1">self.assertEqual(type(self.v1)</span><span class="s0">, </span><span class="s1">Vector3)</span>

    <span class="s1">@unittest.skipIf(IS_PYPY</span><span class="s0">, </span><span class="s2">&quot;known pypy failure&quot;</span><span class="s1">)</span>
    <span class="s0">def </span><span class="s1">test_invalid_swizzle(self):</span>
        <span class="s0">def </span><span class="s1">invalidSwizzleX():</span>
            <span class="s1">Vector3().xx = (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">invalidSwizzleY():</span>
            <span class="s1">Vector3().yy = (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">invalidSwizzleZ():</span>
            <span class="s1">Vector3().zz = (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s0">def </span><span class="s1">invalidSwizzleW():</span>
            <span class="s1">Vector3().ww = (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>

        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">invalidSwizzleX)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">invalidSwizzleY)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">invalidSwizzleZ)</span>
        <span class="s1">self.assertRaises(AttributeError</span><span class="s0">, </span><span class="s1">invalidSwizzleW)</span>

        <span class="s0">def </span><span class="s1">invalidAssignment():</span>
            <span class="s1">Vector3().xy = </span><span class="s5">3</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">invalidAssignment)</span>

    <span class="s0">def </span><span class="s1">test_swizzle_return_types(self):</span>
        <span class="s1">self.assertEqual(type(self.v1.x)</span><span class="s0">, </span><span class="s1">float)</span>
        <span class="s1">self.assertEqual(type(self.v1.xy)</span><span class="s0">, </span><span class="s1">Vector2)</span>
        <span class="s1">self.assertEqual(type(self.v1.xyz)</span><span class="s0">, </span><span class="s1">Vector3)</span>
        <span class="s4"># but we don't have vector4 or above... so tuple.</span>
        <span class="s1">self.assertEqual(type(self.v1.xyxy)</span><span class="s0">, </span><span class="s1">tuple)</span>
        <span class="s1">self.assertEqual(type(self.v1.xyxyx)</span><span class="s0">, </span><span class="s1">tuple)</span>

    <span class="s0">def </span><span class="s1">test_dir_works(self):</span>
        <span class="s4"># not every single one of the attributes...</span>
        <span class="s1">attributes = {</span><span class="s2">&quot;lerp&quot;</span><span class="s0">, </span><span class="s2">&quot;normalize&quot;</span><span class="s0">, </span><span class="s2">&quot;normalize_ip&quot;</span><span class="s0">, </span><span class="s2">&quot;reflect&quot;</span><span class="s0">, </span><span class="s2">&quot;slerp&quot;</span><span class="s0">, </span><span class="s2">&quot;x&quot;</span><span class="s0">, </span><span class="s2">&quot;y&quot;</span><span class="s1">}</span>
        <span class="s4"># check if this selection of attributes are all there.</span>
        <span class="s1">self.assertTrue(attributes.issubset(set(dir(self.v1))))</span>

    <span class="s0">def </span><span class="s1">test_elementwise(self):</span>
        <span class="s4"># behaviour for &quot;elementwise op scalar&quot;</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() + self.s1</span><span class="s0">,</span>
            <span class="s1">(self.v1.x + self.s1</span><span class="s0">, </span><span class="s1">self.v1.y + self.s1</span><span class="s0">, </span><span class="s1">self.v1.z + self.s1)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() - self.s1</span><span class="s0">,</span>
            <span class="s1">(self.v1.x - self.s1</span><span class="s0">, </span><span class="s1">self.v1.y - self.s1</span><span class="s0">, </span><span class="s1">self.v1.z - self.s1)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() * self.s2</span><span class="s0">,</span>
            <span class="s1">(self.v1.x * self.s2</span><span class="s0">, </span><span class="s1">self.v1.y * self.s2</span><span class="s0">, </span><span class="s1">self.v1.z * self.s2)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() / self.s2</span><span class="s0">,</span>
            <span class="s1">(self.v1.x / self.s2</span><span class="s0">, </span><span class="s1">self.v1.y / self.s2</span><span class="s0">, </span><span class="s1">self.v1.z / self.s2)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() // self.s1</span><span class="s0">,</span>
            <span class="s1">(self.v1.x // self.s1</span><span class="s0">, </span><span class="s1">self.v1.y // self.s1</span><span class="s0">, </span><span class="s1">self.v1.z // self.s1)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() ** self.s1</span><span class="s0">,</span>
            <span class="s1">(self.v1.x**self.s1</span><span class="s0">, </span><span class="s1">self.v1.y**self.s1</span><span class="s0">, </span><span class="s1">self.v1.z**self.s1)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() % self.s1</span><span class="s0">,</span>
            <span class="s1">(self.v1.x % self.s1</span><span class="s0">, </span><span class="s1">self.v1.y % self.s1</span><span class="s0">, </span><span class="s1">self.v1.z % self.s1)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() &gt; self.s1</span><span class="s0">,</span>
            <span class="s1">self.v1.x &gt; self.s1 </span><span class="s0">and </span><span class="s1">self.v1.y &gt; self.s1 </span><span class="s0">and </span><span class="s1">self.v1.z &gt; self.s1</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() &lt; self.s1</span><span class="s0">,</span>
            <span class="s1">self.v1.x &lt; self.s1 </span><span class="s0">and </span><span class="s1">self.v1.y &lt; self.s1 </span><span class="s0">and </span><span class="s1">self.v1.z &lt; self.s1</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() == self.s1</span><span class="s0">,</span>
            <span class="s1">self.v1.x == self.s1 </span><span class="s0">and </span><span class="s1">self.v1.y == self.s1 </span><span class="s0">and </span><span class="s1">self.v1.z == self.s1</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() != self.s1</span><span class="s0">,</span>
            <span class="s1">self.v1.x != self.s1 </span><span class="s0">and </span><span class="s1">self.v1.y != self.s1 </span><span class="s0">and </span><span class="s1">self.v1.z != self.s1</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() &gt;= self.s1</span><span class="s0">,</span>
            <span class="s1">self.v1.x &gt;= self.s1 </span><span class="s0">and </span><span class="s1">self.v1.y &gt;= self.s1 </span><span class="s0">and </span><span class="s1">self.v1.z &gt;= self.s1</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() &lt;= self.s1</span><span class="s0">,</span>
            <span class="s1">self.v1.x &lt;= self.s1 </span><span class="s0">and </span><span class="s1">self.v1.y &lt;= self.s1 </span><span class="s0">and </span><span class="s1">self.v1.z &lt;= self.s1</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s4"># behaviour for &quot;scalar op elementwise&quot;</span>
        <span class="s1">self.assertEqual(</span><span class="s5">5 </span><span class="s1">+ self.v1.elementwise()</span><span class="s0">, </span><span class="s1">Vector3(</span><span class="s5">5</span><span class="s0">, </span><span class="s5">5</span><span class="s0">, </span><span class="s5">5</span><span class="s1">) + self.v1)</span>
        <span class="s1">self.assertEqual(</span><span class="s5">3.5 </span><span class="s1">- self.v1.elementwise()</span><span class="s0">, </span><span class="s1">Vector3(</span><span class="s5">3.5</span><span class="s0">, </span><span class="s5">3.5</span><span class="s0">, </span><span class="s5">3.5</span><span class="s1">) - self.v1)</span>
        <span class="s1">self.assertEqual(</span><span class="s5">7.5 </span><span class="s1">* self.v1.elementwise()</span><span class="s0">, </span><span class="s5">7.5 </span><span class="s1">* self.v1)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">-</span><span class="s5">3.5 </span><span class="s1">/ self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(-</span><span class="s5">3.5 </span><span class="s1">/ self.v1.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3.5 </span><span class="s1">/ self.v1.y</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3.5 </span><span class="s1">/ self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">-</span><span class="s5">3.5 </span><span class="s1">// self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(-</span><span class="s5">3.5 </span><span class="s1">// self.v1.x</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3.5 </span><span class="s1">// self.v1.y</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3.5 </span><span class="s1">// self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">-(</span><span class="s5">3.5 </span><span class="s1">** self.v1.elementwise())</span><span class="s0">,</span>
            <span class="s1">(-(</span><span class="s5">3.5</span><span class="s1">**self.v1.x)</span><span class="s0">, </span><span class="s1">-(</span><span class="s5">3.5</span><span class="s1">**self.v1.y)</span><span class="s0">, </span><span class="s1">-(</span><span class="s5">3.5</span><span class="s1">**self.v1.z))</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s5">3 </span><span class="s1">% self.v1.elementwise()</span><span class="s0">, </span><span class="s1">(</span><span class="s5">3 </span><span class="s1">% self.v1.x</span><span class="s0">, </span><span class="s5">3 </span><span class="s1">% self.v1.y</span><span class="s0">, </span><span class="s5">3 </span><span class="s1">% self.v1.z)</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s5">2 </span><span class="s1">&lt; self.v1.elementwise()</span><span class="s0">, </span><span class="s5">2 </span><span class="s1">&lt; self.v1.x </span><span class="s0">and </span><span class="s5">2 </span><span class="s1">&lt; self.v1.y </span><span class="s0">and </span><span class="s5">2 </span><span class="s1">&lt; self.v1.z</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s5">2 </span><span class="s1">&gt; self.v1.elementwise()</span><span class="s0">, </span><span class="s5">2 </span><span class="s1">&gt; self.v1.x </span><span class="s0">and </span><span class="s5">2 </span><span class="s1">&gt; self.v1.y </span><span class="s0">and </span><span class="s5">2 </span><span class="s1">&gt; self.v1.z</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s5">1 </span><span class="s1">== self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s5">1 </span><span class="s1">== self.v1.x </span><span class="s0">and </span><span class="s5">1 </span><span class="s1">== self.v1.y </span><span class="s0">and </span><span class="s5">1 </span><span class="s1">== self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s5">1 </span><span class="s1">!= self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s5">1 </span><span class="s1">!= self.v1.x </span><span class="s0">and </span><span class="s5">1 </span><span class="s1">!= self.v1.y </span><span class="s0">and </span><span class="s5">1 </span><span class="s1">!= self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s5">2 </span><span class="s1">&lt;= self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s5">2 </span><span class="s1">&lt;= self.v1.x </span><span class="s0">and </span><span class="s5">2 </span><span class="s1">&lt;= self.v1.y </span><span class="s0">and </span><span class="s5">2 </span><span class="s1">&lt;= self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">-</span><span class="s5">7 </span><span class="s1">&gt;= self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">-</span><span class="s5">7 </span><span class="s1">&gt;= self.v1.x </span><span class="s0">and </span><span class="s1">-</span><span class="s5">7 </span><span class="s1">&gt;= self.v1.y </span><span class="s0">and </span><span class="s1">-</span><span class="s5">7 </span><span class="s1">&gt;= self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">-</span><span class="s5">7 </span><span class="s1">!= self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">-</span><span class="s5">7 </span><span class="s1">!= self.v1.x </span><span class="s0">and </span><span class="s1">-</span><span class="s5">7 </span><span class="s1">!= self.v1.y </span><span class="s0">and </span><span class="s1">-</span><span class="s5">7 </span><span class="s1">!= self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s4"># behaviour for &quot;elementwise op vector&quot;</span>
        <span class="s1">self.assertEqual(type(self.v1.elementwise() * self.v2)</span><span class="s0">, </span><span class="s1">type(self.v1))</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() + self.v2</span><span class="s0">, </span><span class="s1">self.v1 + self.v2)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() + self.v2</span><span class="s0">, </span><span class="s1">self.v1 + self.v2)</span>
        <span class="s1">self.assertEqual(self.v1.elementwise() - self.v2</span><span class="s0">, </span><span class="s1">self.v1 - self.v2)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() * self.v2</span><span class="s0">,</span>
            <span class="s1">(self.v1.x * self.v2.x</span><span class="s0">, </span><span class="s1">self.v1.y * self.v2.y</span><span class="s0">, </span><span class="s1">self.v1.z * self.v2.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() / self.v2</span><span class="s0">,</span>
            <span class="s1">(self.v1.x / self.v2.x</span><span class="s0">, </span><span class="s1">self.v1.y / self.v2.y</span><span class="s0">, </span><span class="s1">self.v1.z / self.v2.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() // self.v2</span><span class="s0">,</span>
            <span class="s1">(self.v1.x // self.v2.x</span><span class="s0">, </span><span class="s1">self.v1.y // self.v2.y</span><span class="s0">, </span><span class="s1">self.v1.z // self.v2.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() ** self.v2</span><span class="s0">,</span>
            <span class="s1">(self.v1.x**self.v2.x</span><span class="s0">, </span><span class="s1">self.v1.y**self.v2.y</span><span class="s0">, </span><span class="s1">self.v1.z**self.v2.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() % self.v2</span><span class="s0">,</span>
            <span class="s1">(self.v1.x % self.v2.x</span><span class="s0">, </span><span class="s1">self.v1.y % self.v2.y</span><span class="s0">, </span><span class="s1">self.v1.z % self.v2.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() &gt; self.v2</span><span class="s0">,</span>
            <span class="s1">self.v1.x &gt; self.v2.x </span><span class="s0">and </span><span class="s1">self.v1.y &gt; self.v2.y </span><span class="s0">and </span><span class="s1">self.v1.z &gt; self.v2.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() &lt; self.v2</span><span class="s0">,</span>
            <span class="s1">self.v1.x &lt; self.v2.x </span><span class="s0">and </span><span class="s1">self.v1.y &lt; self.v2.y </span><span class="s0">and </span><span class="s1">self.v1.z &lt; self.v2.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() &gt;= self.v2</span><span class="s0">,</span>
            <span class="s1">self.v1.x &gt;= self.v2.x</span>
            <span class="s0">and </span><span class="s1">self.v1.y &gt;= self.v2.y</span>
            <span class="s0">and </span><span class="s1">self.v1.z &gt;= self.v2.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() &lt;= self.v2</span><span class="s0">,</span>
            <span class="s1">self.v1.x &lt;= self.v2.x</span>
            <span class="s0">and </span><span class="s1">self.v1.y &lt;= self.v2.y</span>
            <span class="s0">and </span><span class="s1">self.v1.z &lt;= self.v2.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() == self.v2</span><span class="s0">,</span>
            <span class="s1">self.v1.x == self.v2.x</span>
            <span class="s0">and </span><span class="s1">self.v1.y == self.v2.y</span>
            <span class="s0">and </span><span class="s1">self.v1.z == self.v2.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v1.elementwise() != self.v2</span><span class="s0">,</span>
            <span class="s1">self.v1.x != self.v2.x</span>
            <span class="s0">and </span><span class="s1">self.v1.y != self.v2.y</span>
            <span class="s0">and </span><span class="s1">self.v1.z != self.v2.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s4"># behaviour for &quot;vector op elementwise&quot;</span>
        <span class="s1">self.assertEqual(self.v2 + self.v1.elementwise()</span><span class="s0">, </span><span class="s1">self.v2 + self.v1)</span>
        <span class="s1">self.assertEqual(self.v2 - self.v1.elementwise()</span><span class="s0">, </span><span class="s1">self.v2 - self.v1)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 * self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x * self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y * self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z * self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 / self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x / self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y / self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z / self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 // self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x // self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y // self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z // self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 ** self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x**self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y**self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z**self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 % self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x % self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y % self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z % self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 &lt; self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x &lt; self.v1.x </span><span class="s0">and </span><span class="s1">self.v2.y &lt; self.v1.y </span><span class="s0">and </span><span class="s1">self.v2.z &lt; self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 &gt; self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x &gt; self.v1.x </span><span class="s0">and </span><span class="s1">self.v2.y &gt; self.v1.y </span><span class="s0">and </span><span class="s1">self.v2.z &gt; self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 &lt;= self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x &lt;= self.v1.x</span>
            <span class="s0">and </span><span class="s1">self.v2.y &lt;= self.v1.y</span>
            <span class="s0">and </span><span class="s1">self.v2.z &lt;= self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 &gt;= self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x &gt;= self.v1.x</span>
            <span class="s0">and </span><span class="s1">self.v2.y &gt;= self.v1.y</span>
            <span class="s0">and </span><span class="s1">self.v2.z &gt;= self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 == self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x == self.v1.x</span>
            <span class="s0">and </span><span class="s1">self.v2.y == self.v1.y</span>
            <span class="s0">and </span><span class="s1">self.v2.z == self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2 != self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x != self.v1.x</span>
            <span class="s0">and </span><span class="s1">self.v2.y != self.v1.y</span>
            <span class="s0">and </span><span class="s1">self.v2.z != self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s4"># behaviour for &quot;elementwise op elementwise&quot;</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() + self.v1.elementwise()</span><span class="s0">, </span><span class="s1">self.v2 + self.v1</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() - self.v1.elementwise()</span><span class="s0">, </span><span class="s1">self.v2 - self.v1</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() * self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x * self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y * self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z * self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() / self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x / self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y / self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z / self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() // self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x // self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y // self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z // self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() ** self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x**self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y**self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z**self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() % self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">(self.v2.x % self.v1.x</span><span class="s0">, </span><span class="s1">self.v2.y % self.v1.y</span><span class="s0">, </span><span class="s1">self.v2.z % self.v1.z)</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() &lt; self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x &lt; self.v1.x </span><span class="s0">and </span><span class="s1">self.v2.y &lt; self.v1.y </span><span class="s0">and </span><span class="s1">self.v2.z &lt; self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() &gt; self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x &gt; self.v1.x </span><span class="s0">and </span><span class="s1">self.v2.y &gt; self.v1.y </span><span class="s0">and </span><span class="s1">self.v2.z &gt; self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() &lt;= self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x &lt;= self.v1.x</span>
            <span class="s0">and </span><span class="s1">self.v2.y &lt;= self.v1.y</span>
            <span class="s0">and </span><span class="s1">self.v2.z &lt;= self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() &gt;= self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x &gt;= self.v1.x</span>
            <span class="s0">and </span><span class="s1">self.v2.y &gt;= self.v1.y</span>
            <span class="s0">and </span><span class="s1">self.v2.z &gt;= self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() == self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x == self.v1.x</span>
            <span class="s0">and </span><span class="s1">self.v2.y == self.v1.y</span>
            <span class="s0">and </span><span class="s1">self.v2.z == self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">self.v2.elementwise() != self.v1.elementwise()</span><span class="s0">,</span>
            <span class="s1">self.v2.x != self.v1.x</span>
            <span class="s0">and </span><span class="s1">self.v2.y != self.v1.y</span>
            <span class="s0">and </span><span class="s1">self.v2.z != self.v1.z</span><span class="s0">,</span>
        <span class="s1">)</span>

        <span class="s4"># other behaviour</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">abs(self.v1.elementwise())</span><span class="s0">, </span><span class="s1">(abs(self.v1.x)</span><span class="s0">, </span><span class="s1">abs(self.v1.y)</span><span class="s0">, </span><span class="s1">abs(self.v1.z))</span>
        <span class="s1">)</span>
        <span class="s1">self.assertEqual(-self.v1.elementwise()</span><span class="s0">, </span><span class="s1">-self.v1)</span>
        <span class="s1">self.assertEqual(+self.v1.elementwise()</span><span class="s0">, </span><span class="s1">+self.v1)</span>
        <span class="s1">self.assertEqual(bool(self.v1.elementwise())</span><span class="s0">, </span><span class="s1">bool(self.v1))</span>
        <span class="s1">self.assertEqual(bool(Vector3().elementwise())</span><span class="s0">, </span><span class="s1">bool(Vector3()))</span>
        <span class="s1">self.assertEqual(self.zeroVec.elementwise() ** </span><span class="s5">0</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: pow(Vector3(-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">).elementwise()</span><span class="s0">, </span><span class="s5">1.2</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.elementwise() ** -</span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() / </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() // </span><span class="s5">0</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() % </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() / self.zeroVec</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() // self.zeroVec</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(</span>
            <span class="s1">ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">).elementwise() % self.zeroVec</span>
        <span class="s1">)</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">2 </span><span class="s1">/ self.zeroVec.elementwise())</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">2 </span><span class="s1">// self.zeroVec.elementwise())</span>
        <span class="s1">self.assertRaises(ZeroDivisionError</span><span class="s0">, lambda</span><span class="s1">: </span><span class="s5">2 </span><span class="s1">% self.zeroVec.elementwise())</span>

    <span class="s0">def </span><span class="s1">test_slerp(self):</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.slerp(self.v1</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.v1.slerp(self.zeroVec</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: self.zeroVec.slerp(self.zeroVec</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">))</span>
        <span class="s1">steps = </span><span class="s5">10</span>
        <span class="s1">angle_step = self.e1.angle_to(self.e2) / steps</span>
        <span class="s0">for </span><span class="s1">i</span><span class="s0">, </span><span class="s1">u </span><span class="s0">in </span><span class="s1">(</span>
            <span class="s1">(i</span><span class="s0">, </span><span class="s1">self.e1.slerp(self.e2</span><span class="s0">, </span><span class="s1">i / float(steps))) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(steps + </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">):</span>
            <span class="s1">self.assertAlmostEqual(u.length()</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
            <span class="s1">self.assertAlmostEqual(self.e1.angle_to(u)</span><span class="s0">, </span><span class="s1">i * angle_step)</span>
        <span class="s1">self.assertEqual(u</span><span class="s0">, </span><span class="s1">self.e2)</span>

        <span class="s1">v1 = Vector3(</span><span class="s5">100</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">10</span><span class="s0">, </span><span class="s5">7</span><span class="s1">)</span>
        <span class="s1">radial_factor = v2.length() / v1.length()</span>
        <span class="s0">for </span><span class="s1">i</span><span class="s0">, </span><span class="s1">u </span><span class="s0">in </span><span class="s1">((i</span><span class="s0">, </span><span class="s1">v1.slerp(v2</span><span class="s0">, </span><span class="s1">-i / float(steps))) </span><span class="s0">for </span><span class="s1">i </span><span class="s0">in </span><span class="s1">range(steps + </span><span class="s5">1</span><span class="s1">)):</span>
            <span class="s1">self.assertAlmostEqual(</span>
                <span class="s1">u.length()</span><span class="s0">,</span>
                <span class="s1">(v2.length() - v1.length()) * (float(i) / steps) + v1.length()</span><span class="s0">,</span>
            <span class="s1">)</span>
        <span class="s1">self.assertEqual(u</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(v1.slerp(v1</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">v1)</span>
        <span class="s1">self.assertEqual(v2.slerp(v2</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: v1.slerp(-v1</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_lerp(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v2 = Vector3(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">10</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.lerp(v2</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">5</span><span class="s0">, </span><span class="s5">5</span><span class="s0">, </span><span class="s5">5</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, lambda</span><span class="s1">: v1.lerp(v2</span><span class="s0">, </span><span class="s5">2.5</span><span class="s1">))</span>

        <span class="s1">v1 = Vector3(-</span><span class="s5">10</span><span class="s0">, </span><span class="s1">-</span><span class="s5">5</span><span class="s0">, </span><span class="s1">-</span><span class="s5">20</span><span class="s1">)</span>
        <span class="s1">v2 = Vector3(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">10</span><span class="s0">, </span><span class="s1">-</span><span class="s5">20</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1.lerp(v2</span><span class="s0">, </span><span class="s5">0.5</span><span class="s1">)</span><span class="s0">, </span><span class="s1">(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">2.5</span><span class="s0">, </span><span class="s1">-</span><span class="s5">20</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_spherical(self):</span>
        <span class="s1">v = Vector3()</span>
        <span class="s1">v.from_spherical(self.v1.as_spherical())</span>
        <span class="s1">self.assertEqual(self.v1</span><span class="s0">, </span><span class="s1">v)</span>
        <span class="s1">self.assertEqual(self.e1.as_spherical()</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">90</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e2.as_spherical()</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">90</span><span class="s0">, </span><span class="s5">90</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(self.e3.as_spherical()</span><span class="s0">, </span><span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">))</span>
        <span class="s1">self.assertEqual((</span><span class="s5">2 </span><span class="s1">* self.e2).as_spherical()</span><span class="s0">, </span><span class="s1">(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">90</span><span class="s0">, </span><span class="s5">90</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_spherical((</span><span class="s0">None, None, None</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_spherical(</span><span class="s2">&quot;abc&quot;</span><span class="s1">))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_spherical((</span><span class="s0">None, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_spherical((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_spherical((</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)))</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, lambda</span><span class="s1">: v.from_spherical(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">))</span>
        <span class="s1">v.from_spherical((</span><span class="s5">0.5</span><span class="s0">, </span><span class="s5">90</span><span class="s0">, </span><span class="s5">90</span><span class="s1">))</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s5">0.5 </span><span class="s1">* self.e2)</span>

    <span class="s0">def </span><span class="s1">test_inplace_operators(self):</span>

        <span class="s1">v = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v *= </span><span class="s5">2</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">(</span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">2.0</span><span class="s1">))</span>

        <span class="s1">v = Vector3(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">4</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">v /= </span><span class="s5">2</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">(</span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">2.0</span><span class="s1">))</span>

        <span class="s1">v = Vector3(</span><span class="s5">3.0</span><span class="s0">, </span><span class="s5">3.0</span><span class="s0">, </span><span class="s5">3.0</span><span class="s1">)</span>
        <span class="s1">v -= (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">(</span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">2.0</span><span class="s1">))</span>

        <span class="s1">v = Vector3(</span><span class="s5">3.0</span><span class="s0">, </span><span class="s5">3.0</span><span class="s0">, </span><span class="s5">3.0</span><span class="s1">)</span>
        <span class="s1">v += (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">(</span><span class="s5">4.0</span><span class="s0">, </span><span class="s5">4.0</span><span class="s0">, </span><span class="s5">4.0</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_pickle(self):</span>
        <span class="s0">import </span><span class="s1">pickle</span>

        <span class="s1">v2 = Vector2(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">v3 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(pickle.loads(pickle.dumps(v2))</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(pickle.loads(pickle.dumps(v3))</span><span class="s0">, </span><span class="s1">v3)</span>

    <span class="s0">def </span><span class="s1">test_subclass_operation(self):</span>
        <span class="s0">class </span><span class="s1">Vector(pygame.math.Vector3):</span>
            <span class="s0">pass</span>

        <span class="s1">v = Vector(</span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">2.0</span><span class="s0">, </span><span class="s5">2.0</span><span class="s1">)</span>
        <span class="s1">v *= </span><span class="s5">2</span>
        <span class="s1">self.assertEqual(v</span><span class="s0">, </span><span class="s1">(</span><span class="s5">4.0</span><span class="s0">, </span><span class="s5">4.0</span><span class="s0">, </span><span class="s5">4.0</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_swizzle_constants(self):</span>
        <span class="s3">&quot;&quot;&quot;We can get constant values from a swizzle.&quot;&quot;&quot;</span>
        <span class="s1">v = Vector2(</span><span class="s5">7</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v.xy1</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">7.0</span><span class="s0">, </span><span class="s5">6.0</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_swizzle_four_constants(self):</span>
        <span class="s3">&quot;&quot;&quot;We can get 4 constant values from a swizzle.&quot;&quot;&quot;</span>
        <span class="s1">v = Vector2(</span><span class="s5">7</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(</span>
            <span class="s1">v.xy01</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">7.0</span><span class="s0">, </span><span class="s5">6.0</span><span class="s0">, </span><span class="s5">0.0</span><span class="s0">, </span><span class="s5">1.0</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_swizzle_oob(self):</span>
        <span class="s3">&quot;&quot;&quot;An out-of-bounds swizzle raises an AttributeError.&quot;&quot;&quot;</span>
        <span class="s1">v = Vector2(</span><span class="s5">7</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>
        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s1">v.xyz</span>

    <span class="s1">@unittest.skipIf(IS_PYPY</span><span class="s0">, </span><span class="s2">&quot;known pypy failure&quot;</span><span class="s1">)</span>
    <span class="s0">def </span><span class="s1">test_swizzle_set_oob(self):</span>
        <span class="s3">&quot;&quot;&quot;An out-of-bounds swizzle set raises an AttributeError.&quot;&quot;&quot;</span>
        <span class="s1">v = Vector2(</span><span class="s5">7</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>
        <span class="s0">with </span><span class="s1">self.assertRaises(AttributeError):</span>
            <span class="s1">v.xz = (</span><span class="s5">1</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_project_v3_onto_x_axis(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto x-axis, e.g. get the component pointing in the x-axis direction.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector3(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">x_axis = Vector3(</span><span class="s5">10</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(x_axis)</span>

        <span class="s4"># assert</span>
        <span class="s1">self.assertEqual(v.x</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertEqual(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">actual.y)</span>
        <span class="s1">self.assertEqual(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">actual.z)</span>

    <span class="s0">def </span><span class="s1">test_project_v3_onto_y_axis(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto y-axis, e.g. get the component pointing in the y-axis direction.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector3(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">y_axis = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">100</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(y_axis)</span>

        <span class="s4"># assert</span>
        <span class="s1">self.assertEqual(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertEqual(v.y</span><span class="s0">, </span><span class="s1">actual.y)</span>
        <span class="s1">self.assertEqual(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">actual.z)</span>

    <span class="s0">def </span><span class="s1">test_project_v3_onto_z_axis(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto z-axis, e.g. get the component pointing in the z-axis direction.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector3(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">y_axis = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">77</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(y_axis)</span>

        <span class="s4"># assert</span>
        <span class="s1">self.assertEqual(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertEqual(</span><span class="s5">0</span><span class="s0">, </span><span class="s1">actual.y)</span>
        <span class="s1">self.assertEqual(v.z</span><span class="s0">, </span><span class="s1">actual.z)</span>

    <span class="s0">def </span><span class="s1">test_project_v3_onto_other(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto other vector.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector3(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">other = Vector3(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">5</span><span class="s0">, </span><span class="s5">7</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(other)</span>

        <span class="s4"># assert</span>
        <span class="s1">expected = v.dot(other) / other.dot(other) * other</span>
        <span class="s1">self.assertAlmostEqual(expected.x</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertAlmostEqual(expected.y</span><span class="s0">, </span><span class="s1">actual.y)</span>
        <span class="s1">self.assertAlmostEqual(expected.z</span><span class="s0">, </span><span class="s1">actual.z)</span>

    <span class="s0">def </span><span class="s1">test_project_v3_onto_other_as_tuple(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto other tuple as vector.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector3(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">other = Vector3(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">5</span><span class="s0">, </span><span class="s5">7</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(tuple(other))</span>

        <span class="s4"># assert</span>
        <span class="s1">expected = v.dot(other) / other.dot(other) * other</span>
        <span class="s1">self.assertAlmostEqual(expected.x</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertAlmostEqual(expected.y</span><span class="s0">, </span><span class="s1">actual.y)</span>
        <span class="s1">self.assertAlmostEqual(expected.z</span><span class="s0">, </span><span class="s1">actual.z)</span>

    <span class="s0">def </span><span class="s1">test_project_v3_onto_other_as_list(self):</span>
        <span class="s3">&quot;&quot;&quot;Project onto other list as vector.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector3(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">other = Vector3(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">5</span><span class="s0">, </span><span class="s5">7</span><span class="s1">)</span>

        <span class="s4"># act</span>
        <span class="s1">actual = v.project(list(other))</span>

        <span class="s4"># assert</span>
        <span class="s1">expected = v.dot(other) / other.dot(other) * other</span>
        <span class="s1">self.assertAlmostEqual(expected.x</span><span class="s0">, </span><span class="s1">actual.x)</span>
        <span class="s1">self.assertAlmostEqual(expected.y</span><span class="s0">, </span><span class="s1">actual.y)</span>
        <span class="s1">self.assertAlmostEqual(expected.z</span><span class="s0">, </span><span class="s1">actual.z)</span>

    <span class="s0">def </span><span class="s1">test_project_v3_raises_if_other_has_zero_length(self):</span>
        <span class="s3">&quot;&quot;&quot;Check if exception is raise when projected on vector has zero length.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector3(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">other = Vector3(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s4"># act / assert</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v.project</span><span class="s0">, </span><span class="s1">other)</span>

    <span class="s0">def </span><span class="s1">test_project_v3_raises_if_other_is_not_iterable(self):</span>
        <span class="s3">&quot;&quot;&quot;Check if exception is raise when projected on vector is not iterable.&quot;&quot;&quot;</span>
        <span class="s4"># arrange</span>
        <span class="s1">v = Vector3(</span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>
        <span class="s1">other = </span><span class="s5">10</span>

        <span class="s4"># act / assert</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v.project</span><span class="s0">, </span><span class="s1">other)</span>

    <span class="s0">def </span><span class="s1">test_collection_abc(self):</span>
        <span class="s1">v = Vector3(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">4</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertTrue(isinstance(v</span><span class="s0">, </span><span class="s1">Collection))</span>
        <span class="s1">self.assertFalse(isinstance(v</span><span class="s0">, </span><span class="s1">Sequence))</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v3_max(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">7</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">v2 = v1.clamp_magnitude(</span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">v3 = v1.clamp_magnitude(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v2</span><span class="s0">, </span><span class="s1">v3)</span>

        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>

        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>

        <span class="s1">expected_v2 = Vector3(</span><span class="s5">4.635863249727653</span><span class="s0">, </span><span class="s5">1.3245323570650438</span><span class="s0">, </span><span class="s5">1.3245323570650438</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(expected_v2</span><span class="s0">, </span><span class="s1">v2)</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v3_min(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">3</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">v2 = v1.clamp_magnitude(</span><span class="s5">5</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">5</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span>
        <span class="s1">expected_v2 = Vector3(</span><span class="s5">4.008918628686366</span><span class="s0">, </span><span class="s5">1.3363062095621219</span><span class="s0">, </span><span class="s5">2.6726124191242437</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(expected_v2</span><span class="s0">, </span><span class="s1">v1)</span>
        <span class="s1">self.assertEqual(expected_v2</span><span class="s0">, </span><span class="s1">v2)</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v3_no_change(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s0">for </span><span class="s1">args </span><span class="s0">in </span><span class="s1">(</span>
            <span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">1.12</span><span class="s0">, </span><span class="s5">5.55</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">0.93</span><span class="s0">, </span><span class="s5">6.83</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">7.6</span><span class="s0">,</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">):</span>
            <span class="s0">with </span><span class="s1">self.subTest(args=args):</span>
                <span class="s1">v2 = v1.clamp_magnitude(*args)</span>
                <span class="s1">v1.clamp_magnitude_ip(*args)</span>
                <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>
                <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">))</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v3_edge_cases(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)</span>
        <span class="s1">v2 = v1.clamp_magnitude(</span><span class="s5">6</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>
        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">6</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertAlmostEqual(v1.length()</span><span class="s0">, </span><span class="s5">6</span><span class="s1">)</span>

        <span class="s1">v2 = v1.clamp_magnitude(</span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">v1.clamp_magnitude_ip(</span><span class="s5">0</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">v2)</span>
        <span class="s1">self.assertEqual(v1</span><span class="s0">, </span><span class="s1">Vector3())</span>

    <span class="s0">def </span><span class="s1">test_clamp_mag_v3_errors(self):</span>
        <span class="s1">v1 = Vector3(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s0">for </span><span class="s1">invalid_args </span><span class="s0">in </span><span class="s1">(</span>
            <span class="s1">(</span><span class="s2">&quot;foo&quot;</span><span class="s0">, </span><span class="s2">&quot;bar&quot;</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">342.234</span><span class="s0">, </span><span class="s2">&quot;test&quot;</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">):</span>
            <span class="s0">with </span><span class="s1">self.subTest(invalid_args=invalid_args):</span>
                <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v1.clamp_magnitude</span><span class="s0">, </span><span class="s1">*invalid_args)</span>
                <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">v1.clamp_magnitude_ip</span><span class="s0">, </span><span class="s1">*invalid_args)</span>

        <span class="s0">for </span><span class="s1">invalid_args </span><span class="s0">in </span><span class="s1">(</span>
            <span class="s1">(-</span><span class="s5">1</span><span class="s0">,</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span><span class="s0">,  </span><span class="s4"># min &gt; max</span>
            <span class="s1">(-</span><span class="s5">4</span><span class="s0">, </span><span class="s5">10</span><span class="s1">)</span><span class="s0">,</span>
            <span class="s1">(-</span><span class="s5">4</span><span class="s0">, </span><span class="s1">-</span><span class="s5">2</span><span class="s1">)</span><span class="s0">,</span>
        <span class="s1">):</span>
            <span class="s0">with </span><span class="s1">self.subTest(invalid_args=invalid_args):</span>
                <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v1.clamp_magnitude</span><span class="s0">, </span><span class="s1">*invalid_args)</span>
                <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v1.clamp_magnitude_ip</span><span class="s0">, </span><span class="s1">*invalid_args)</span>

        <span class="s4"># 0 vector</span>
        <span class="s1">v2 = Vector3()</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.clamp_magnitude</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(ValueError</span><span class="s0">, </span><span class="s1">v2.clamp_magnitude_ip</span><span class="s0">, </span><span class="s5">4</span><span class="s1">)</span>

    <span class="s0">def </span><span class="s1">test_subclassing_v3(self):</span>
        <span class="s3">&quot;&quot;&quot;Check if Vector3 is subclassable&quot;&quot;&quot;</span>
        <span class="s1">v = Vector3(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s0">class </span><span class="s1">TestVector(Vector3):</span>
            <span class="s0">def </span><span class="s1">supermariobrosiscool(self):</span>
                <span class="s0">return </span><span class="s5">722</span>

        <span class="s1">other = TestVector(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(other.supermariobrosiscool()</span><span class="s0">, </span><span class="s5">722</span><span class="s1">)</span>
        <span class="s1">self.assertNotEqual(type(v)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertNotEqual(type(v)</span><span class="s0">, </span><span class="s1">type(other.copy()))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.reflect(v)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.lerp(v</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.slerp(v</span><span class="s0">, </span><span class="s5">1</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.rotate(</span><span class="s5">5</span><span class="s0">, </span><span class="s1">v)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.rotate_rad(</span><span class="s5">5</span><span class="s0">, </span><span class="s1">v)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.project(v)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.move_towards(v</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.clamp_magnitude(</span><span class="s5">5</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.clamp_magnitude(</span><span class="s5">1</span><span class="s0">, </span><span class="s5">5</span><span class="s1">)))</span>
        <span class="s1">self.assertEqual(TestVector</span><span class="s0">, </span><span class="s1">type(other.elementwise() + other))</span>

        <span class="s1">other1 = TestVector(</span><span class="s5">4</span><span class="s0">, </span><span class="s5">2</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(type(other + other1)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertEqual(type(other - other1)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertEqual(type(other * </span><span class="s5">3</span><span class="s1">)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertEqual(type(other / </span><span class="s5">3</span><span class="s1">)</span><span class="s0">, </span><span class="s1">TestVector)</span>
        <span class="s1">self.assertEqual(type(other.elementwise() ** </span><span class="s5">3</span><span class="s1">)</span><span class="s0">, </span><span class="s1">TestVector)</span>

    <span class="s0">def </span><span class="s1">test_move_towards_basic(self):</span>
        <span class="s1">expected = Vector3(</span><span class="s5">7.93205057</span><span class="s0">, </span><span class="s5">2006.38284641</span><span class="s0">, </span><span class="s5">43.80780420</span><span class="s1">)</span>
        <span class="s1">origin = Vector3(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s0">, </span><span class="s5">42.13</span><span class="s1">)</span>
        <span class="s1">target = Vector3(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s0">, </span><span class="s5">54.1</span><span class="s1">)</span>
        <span class="s1">change_ip = origin.copy()</span>

        <span class="s1">change = origin.move_towards(target</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">change_ip.move_towards_ip(target</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(change</span><span class="s0">, </span><span class="s1">expected)</span>
        <span class="s1">self.assertEqual(change_ip</span><span class="s0">, </span><span class="s1">expected)</span>

    <span class="s0">def </span><span class="s1">test_move_towards_max_distance(self):</span>
        <span class="s1">expected = Vector3(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021</span><span class="s0">, </span><span class="s5">42.5</span><span class="s1">)</span>
        <span class="s1">origin = Vector3(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s0">, </span><span class="s5">17.5</span><span class="s1">)</span>
        <span class="s1">change_ip = origin.copy()</span>

        <span class="s1">change = origin.move_towards(expected</span><span class="s0">, </span><span class="s5">100</span><span class="s1">)</span>
        <span class="s1">change_ip.move_towards_ip(expected</span><span class="s0">, </span><span class="s5">100</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(change</span><span class="s0">, </span><span class="s1">expected)</span>
        <span class="s1">self.assertEqual(change_ip</span><span class="s0">, </span><span class="s1">expected)</span>

    <span class="s0">def </span><span class="s1">test_move_nowhere(self):</span>
        <span class="s1">origin = Vector3(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s0">, </span><span class="s5">24.5</span><span class="s1">)</span>
        <span class="s1">target = Vector3(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s0">, </span><span class="s5">3.2</span><span class="s1">)</span>
        <span class="s1">change_ip = origin.copy()</span>

        <span class="s1">change = origin.move_towards(target</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>
        <span class="s1">change_ip.move_towards_ip(target</span><span class="s0">, </span><span class="s5">0</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(change</span><span class="s0">, </span><span class="s1">origin)</span>
        <span class="s1">self.assertEqual(change_ip</span><span class="s0">, </span><span class="s1">origin)</span>

    <span class="s0">def </span><span class="s1">test_move_away(self):</span>
        <span class="s1">expected = Vector3(</span><span class="s5">6.74137906</span><span class="s0">, </span><span class="s5">2002.39831577</span><span class="s0">, </span><span class="s5">49.70890994</span><span class="s1">)</span>
        <span class="s1">origin = Vector3(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s0">, </span><span class="s5">52.2</span><span class="s1">)</span>
        <span class="s1">target = Vector3(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s0">, </span><span class="s5">78.64</span><span class="s1">)</span>
        <span class="s1">change_ip = origin.copy()</span>

        <span class="s1">change = origin.move_towards(target</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">change_ip.move_towards_ip(target</span><span class="s0">, </span><span class="s1">-</span><span class="s5">3</span><span class="s1">)</span>

        <span class="s1">self.assertEqual(change</span><span class="s0">, </span><span class="s1">expected)</span>
        <span class="s1">self.assertEqual(change_ip</span><span class="s0">, </span><span class="s1">expected)</span>

    <span class="s0">def </span><span class="s1">test_move_towards_self(self):</span>
        <span class="s1">vec = Vector3(</span><span class="s5">6.36</span><span class="s0">, </span><span class="s5">2001.13</span><span class="s0">, </span><span class="s1">-</span><span class="s5">123.14</span><span class="s1">)</span>
        <span class="s1">vec2 = vec.copy()</span>
        <span class="s0">for </span><span class="s1">dist </span><span class="s0">in </span><span class="s1">(-</span><span class="s5">3.54</span><span class="s0">, </span><span class="s1">-</span><span class="s5">1</span><span class="s0">, </span><span class="s5">0</span><span class="s0">, </span><span class="s5">0.234</span><span class="s0">, </span><span class="s5">12</span><span class="s1">):</span>
            <span class="s1">self.assertEqual(vec.move_towards(vec2</span><span class="s0">, </span><span class="s1">dist)</span><span class="s0">, </span><span class="s1">vec)</span>
            <span class="s1">vec2.move_towards_ip(vec</span><span class="s0">, </span><span class="s1">dist)</span>
            <span class="s1">self.assertEqual(vec</span><span class="s0">, </span><span class="s1">vec2)</span>

    <span class="s0">def </span><span class="s1">test_move_towards_errors(self):</span>
        <span class="s1">origin = Vector3(</span><span class="s5">7.22</span><span class="s0">, </span><span class="s5">2004.0</span><span class="s0">, </span><span class="s5">4.1</span><span class="s1">)</span>
        <span class="s1">target = Vector3(</span><span class="s5">12.30</span><span class="s0">, </span><span class="s5">2021.0</span><span class="s0">, </span><span class="s1">-</span><span class="s5">421.5</span><span class="s1">)</span>

        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">origin.move_towards</span><span class="s0">, </span><span class="s1">target</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">origin.move_towards_ip</span><span class="s0">, </span><span class="s1">target</span><span class="s0">, </span><span class="s5">3</span><span class="s0">, </span><span class="s5">2</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">origin.move_towards</span><span class="s0">, </span><span class="s1">target</span><span class="s0">, </span><span class="s2">&quot;a&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">origin.move_towards_ip</span><span class="s0">, </span><span class="s1">target</span><span class="s0">, </span><span class="s2">&quot;b&quot;</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">origin.move_towards</span><span class="s0">, </span><span class="s2">&quot;c&quot;</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>
        <span class="s1">self.assertRaises(TypeError</span><span class="s0">, </span><span class="s1">origin.move_towards_ip</span><span class="s0">, </span><span class="s2">&quot;d&quot;</span><span class="s0">, </span><span class="s5">3</span><span class="s1">)</span>


<span class="s0">if </span><span class="s1">__name__ == </span><span class="s2">&quot;__main__&quot;</span><span class="s1">:</span>
    <span class="s1">unittest.main()</span>
</pre>
</body>
</html>